{"version":3,"sources":["webpack:///webpack/bootstrap 8494b461855d18393e9a","webpack:///(webpack)/buildin/amd-define.js","webpack:///./src/utils/modern.ts","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/utils/file.ts","webpack:///./src/synth/synth.ts","webpack:///./src/utils/popups.ts","webpack:///./src/synth/timer.ts","webpack:///./src/synth/instrument.ts","webpack:///./src/live-coding/log.ts","webpack:///./src/synth/notes.ts","webpack:///./src/synth/palette.ts","webpack:///./src/synth/customNodes.ts","webpack:///./src/live-coding/scheduler.ts","webpack:///./src/live-coding/scales.ts","webpack:///./src/synthUI/analyzer.ts","webpack:///./src/live-coding/editor.ts","webpack:///./src/live-coding/instruments.ts","webpack:///./src/live-coding/editor-buffers.ts","webpack:///./src/live-coding/random.ts","webpack:///./src/main.ts","webpack:///./src/synthUI/synthUI.ts","webpack:///./src/synthUI/graph.ts","webpack:///./src/synthUI/paramsUI.ts","webpack:///./src/piano/noteInputs.ts","webpack:///./src/piano/keyboard.ts","webpack:///./src/piano/midi.ts","webpack:///./src/piano/piano.ts","webpack:///./src/piano/arpeggiator.ts","webpack:///./src/synthUI/presets.ts","webpack:///./src/live-coding/live-coding.ts","webpack:///./src/live-coding/track.ts","webpack:///./src/live-coding/effects.ts","webpack:///./src/third-party/tuna.ts","webpack:///./src/third-party/wavetable.ts","webpack:///./src/live-coding/editor-actions.ts","webpack:///./src/live-coding/rings.ts","webpack:///./node_modules/seedrandom/index.js","webpack:///./node_modules/seedrandom/lib/alea.js","webpack:///./node_modules/seedrandom/lib/xor128.js","webpack:///./node_modules/seedrandom/lib/xorwow.js","webpack:///./node_modules/seedrandom/lib/xorshift7.js","webpack:///./node_modules/seedrandom/lib/xor4096.js","webpack:///./node_modules/seedrandom/lib/tychei.js","webpack:///./node_modules/seedrandom/seedrandom.js","webpack:///crypto (ignored)","webpack:///./src/utils/routes.ts"],"names":[],"mappings":"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AAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IAClD,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IACjD,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;IACzC,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IAClD,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IACjD,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;IACzC,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IAClD,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IACjD,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;IACzC,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IAClD,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IACjD,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;IACzC,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IAClD,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IACjD,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;IACzC,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IAClD,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IACjD,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;IACzC,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE;IAClD,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;IACvD,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG;IAC9C,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,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;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;8CC3DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;;AAEA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,kBAAkB,YAAY;AAC9B;AACA,kBAAkB,YAAY;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,sCAAsC;AACjE;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB,EAAE;AAClD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,8CAA8C;AAC9C;;AAEA;AACA;;;AAGA;AACA;AACA,CAAC;AACD,iDAAqB,aAAa,EAAE;AAAA;AACpC,CAAC;AACD;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;;8CC/GA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,wCAAwC;AACjE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB,EAAE;AAClD;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD,iDAAqB,aAAa,EAAE;AAAA;AACpC,CAAC;AACD;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;;8CC9EA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,aAAa,aAAa;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,wCAAwC;AACjE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB,EAAE;AAClD;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD,iDAAqB,aAAa,EAAE;AAAA;AACpC,CAAC;AACD;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;;8CCnFA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC,8BAA8B;;AAE9B;AACA;;AAEA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB,wCAAwC;AACjE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB,EAAE;AAClD;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD,iDAAqB,aAAa,EAAE;AAAA;AACpC,CAAC;AACD;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;8CC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,8CAA8C;AAC9C,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,oCAAoC;AACpC,iCAAiC;AACjC;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB,wCAAwC;AACjE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB,EAAE;AAClD;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD,iDAAqB,aAAa,EAAE;AAAA;AACpC,CAAC;AACD;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;8CCjJA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,wCAAwC;AACjE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB,EAAE;AAClD;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD,iDAAqB,aAAa,EAAE;AAAA;AACpC,CAAC;AACD;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;;ACpGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB,iBAAiB;;AAElE;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,8BAA8B;AAC9B,0BAA0B;AAC1B,iBAAiB;AACjB,oBAAoB;AACpB;AACA,2BAA2B;AAC3B,aAAa;AACb,aAAa;AACb,eAAe;AACf;AACA,uBAAuB;AACvB;;AAEA,2BAA2B,sBAAsB;AACjD,2BAA2B,gCAAgC;AAC3D;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA,mCAAmC,qBAAqB,EAAE;AAC1D;;AAEA;AACA;AACA,2BAA2B,sBAAsB,aAAa;;AAE9D;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,kBAAkB;;AAElC;AACA;AACA;AACA;AACA,aAAa,WAAW;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C,EAAE;AACzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,iDAAqB,mBAAmB,EAAE;AAAA;AAC1C;;AAEA;AACA,CAAC;AACD;AACA;AACA;;;;;;;ACtPA,e;;;;;;;ACAA;AAAA,IAAI,OAAe;AACnB,IAAI,SAAiB;AAEf,qBAAsB,YAAoB;IAC/C,MAAM,CAAC,YAAY,GAAG,gBAAgB;IACtC,SAAS,GAAG,YAAY;IACxB,gBAAgB,EAAE;IAClB,MAAM,CAAC,SAAS,EAAE;AACnB,CAAC;AAED;IACC,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,SAAS;IACvC,CAAC,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE;IACvB,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,KAAK,EAAE;IAC7C,EAAE,CAAC,CAAC,OAAO,CAAC;QAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,YAAY,EAAE,OAAO,CAAC;IACvD,CAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;IACvC,OAAO,GAAG,IAAI;IACd,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;AACtB,CAAC;AAED;IACC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;QAClB,QAAQ,CAAC,aAAa,CAAC;QACvB,QAAQ,CAAC,OAAO,CAAC;KACjB,CAAC;AACH,CAAC;AAED,kBAAkB,KAAa;IAC9B,MAAM,CAAC,IAAI,OAAO,CAAO,OAAO,CAAC,EAAE;QAClC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,OAAO,EAAE,IAAI,CAAC,EAAE;YAC7B,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC;YACnC,OAAO,EAAE;QACV,CAAC,CAAC;IACH,CAAC,CAAC;AACH,CAAC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8494b461855d18393e9a","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 0\n// module chunks = 0","/**\n * Modernize browser interfaces so that TypeScript does not complain\n * when using new features.\n *\n * Also provides some basic utility funcitons\n */\n\nexport interface ModernWindow extends Window {\n\tAudioContext: AudioContext\n\twebkitAudioContext: AudioContext\n}\n\nexport interface ModernAudioNode extends AudioNode {\n\tdisconnect(output?: number | AudioNode | AudioParam): void\n}\n\n\nexport function removeArrayElement(a: any[], e: any): boolean {\n\tconst pos = a.indexOf(e)\n\tif (pos < 0) return false\t// not found\n\ta.splice(pos, 1)\n\treturn true\n}\n\nconst LOG_BASE = 2\n\nfunction logarithm(base: number, x: number): number {\n\treturn Math.log(x) / Math.log(base)\n}\n\nexport function linear2log(value: number, min: number, max: number): number {\n\tconst logRange = logarithm(LOG_BASE, max + 1 - min)\n\treturn logarithm(LOG_BASE, value + 1 - min) / logRange\n}\n\nexport function log2linear(value: number, min: number, max: number): number {\n\tconst logRange = logarithm(LOG_BASE, max + 1 - min)\n\treturn min + Math.pow(LOG_BASE, value * logRange) - 1\n}\n\nexport function focusable(elem: HTMLElement | null): HTMLElement {\n\twhile (elem != null && elem.tabIndex < 0 &&\n\t\telem.nodeName.toLowerCase() != 'body')\n\t\telem = elem.parentElement\n\treturn elem || document.body\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/modern.ts","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 2\n// module chunks = 0","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 3\n// module chunks = 0","// -------------------- Encoding / decoding --------------------\n\nexport function arrayBufferToBase64(buffer: number[]) {\n\tlet binary = ''\n\tlet bytes = new Uint8Array(buffer)\n\tlet len = bytes.byteLength\n\tfor (let i = 0; i < len; i++) {\n\t\tbinary += String.fromCharCode(bytes[i])\n\t}\n\treturn window.btoa(binary)\n}\n\nexport function base64ToArrayBuffer(base64: string) {\n\tlet binary_string = window.atob(base64)\n\tlet len = binary_string.length\n\tlet bytes = new Uint8Array(len)\n\tfor (let i = 0; i < len; i++) {\n\t\tbytes[i] = binary_string.charCodeAt(i)\n\t}\n\treturn bytes.buffer\n}\n\n\n// -------------------- Downloading --------------------\n\nexport function browserSupportsDownload(): boolean {\n\treturn !(<any>window).externalHost && 'download' in $('<a>')[0]\n}\n\nexport function download(fileName: string, fileData: string) {\n\tconst a = $('<a>')\n\ta.attr('download', fileName)\n\ta.attr('href',\n\t\t'data:application/octet-stream;base64,' + btoa(fileData))\n\tconst clickEvent = new MouseEvent('click',\n\t\t{ view: window, bubbles: true, cancelable: false })\n\ta[0].dispatchEvent(clickEvent)\n}\n\n\n// -------------------- Uploading --------------------\n\nexport type UploadCallback = (buf: any, file: any) => void\n\nexport function uploadText(event: JQuery.Event, cb: UploadCallback) {\n\tupload(event, cb, 'readAsText')\n}\n\nexport function uploadArrayBuffer(event: JQuery.Event, cb: UploadCallback) {\n\tupload(event, cb, 'readAsArrayBuffer')\n}\n\nfunction upload(event: JQuery.Event, cb: UploadCallback, readFunc: string) {\n\tlet files = (<any>event.target).files\n\tif (!files || files.length <= 0) return cb('', '')\n\tconst file = files[0]\n\tconst reader = new FileReader()\n\treader.onload = (loadEvt: any) => cb(loadEvt.target.result, file);\n\t// let func = (<any>reader)[readFunc]\n\t// func.bind(reader)(file)\n\t(<any>reader)[readFunc](file)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/file.ts","import { NoteHandler, NoteHandlers } from './notes'\nimport { NodeDef, NodeParamDef, NodePalette, palette } from './palette'\nimport { ModernAudioNode, removeArrayElement } from '../utils/modern'\nimport * as custom from './customNodes'\nimport * as file from '../utils/file'\n\n\nconst SEMITONE = Math.pow(2, 1 / 12)\nconst A4 = 57\n\n/**\n * Holds all data associated with an AudioNode\n */\nexport class NodeData {\n\t// Used by all nodes\n\ttype: string\n\tanode: ModernAudioNode\n\tnodeDef: NodeDef\n\t// Used by control nodes\n\tcontrolParam: string\n\tcontrolParams: string[] | null\n\tcontrolTarget: ModernAudioNode\n\t// Used by source audio nodes\n\tnoteHandler: NoteHandler\n\t// Flag to avoid deleting output node\n\tisOut = false\n\t// Reference to owner synth\n\tsynth: Synth\n\t// To be implemented by user code\n\tgetInputs(): NodeData[] {\n\t\tthrow 'Error: getInputs() function should be implemented by user'\n\t}\n}\n\n/**\n * Global paramters that apply to the whole monophonic synthesizer.\n */\nexport class Portamento {\n\ttime = 0\n\tratio = 0\n}\n\n// TODO *** refactor & decouple from UI\nexport interface ParamHandler {\n\tuiRender: string\n\tinitialize(anode: AudioNode, def: NodeDef): void\n\tparam2json(anode: AudioNode): any\n\tjson2param(anode: AudioNode, json: any): any\n}\n\n/**\n * Performs global operations on all AudioNodes:\n * - Manages AudioNode creation, initialization and connection\n * - Distributes MIDI keyboard events to NoteHandlers\n */\nexport class Synth {\n\tac: AudioContext\n\tcustomNodes: { [key: string]: Function } = {}\n\tparamHandlers: { [key: string]: ParamHandler } = {}\n\tpalette: NodePalette\n\tnoteHandlers: NoteHandler[] = []\n\tportamento = new Portamento()\n\toutGainNode: GainNode\n\n\tconstructor(ac: AudioContext) {\n\t\tthis.ac = ac\n\t\tthis.palette = palette\n\t\tthis.registerCustomNode('createADSR', custom.ADSR)\n\t\tthis.registerCustomNode('createNoise', custom.NoiseGenerator)\n\t\tthis.registerCustomNode('createNoiseCtrl', custom.NoiseCtrlGenerator)\n\t\tthis.registerCustomNode('createLineIn', custom.LineInNode)\n\t\tthis.registerCustomNode('createDetuner', custom.Detuner)\n\t\tthis.registerParamHandler('BufferDataHandler', new BufferDataHandler())\n\t\tthis.registerParamHandler('SoundBankHandler', new SoundBankHandler())\n\t}\n\n\tcreateAudioNode(type: string): AudioNode | null {\n\t\tconst def: NodeDef = palette[type]\n\t\tif (!def) return null\n\t\tconst factory: any = def.custom ? this.customNodes : this.ac\n\t\tif (!def.constructor || !factory[def.constructor]) return null\n\t\tconst anode = factory[def.constructor]()\n\t\tif (!anode.context) anode.context = this.ac\n\t\tthis.initNodeParams(anode, def, type)\n\t\treturn anode\n\t}\n\n\tinitNodeData(ndata: NodeData, type: string) {\n\t\tndata.synth = this\n\t\tndata.type = type\n\t\tlet anode = this.createAudioNode(type)\n\t\tif (!anode)\n\t\t\tthrow new Error(`No AudioNode found for \"${type}\"`)\n\t\tndata.anode = anode\n\t\tndata.nodeDef = this.palette[type]\n\t\tconst nh = ndata.nodeDef.noteHandler\n\t\tif (nh) {\n\t\t\tndata.noteHandler = new (<any>NoteHandlers)[nh](ndata)\n\t\t\tthis.addNoteHandler(ndata.noteHandler)\n\t\t}\n\t\treturn anode\n\t}\n\n\tinitOutputNodeData(ndata: NodeData, dst: AudioNode) {\n\t\tndata.synth = this\n\t\tndata.type = 'out'\n\t\tthis.outGainNode = this.ac.createGain()\n\t\tndata.anode = this.outGainNode\n\t\tndata.anode.connect(dst)\n\t\tndata.nodeDef = this.palette['Speaker']\n\t\tndata.isOut = true\n\t\treturn ndata.anode\n\t}\n\n\tremoveNodeData(data: NodeData) {\n\t\tif (data.noteHandler)\n\t\t\tthis.removeNoteHandler(data.noteHandler)\n\t}\n\n\tconnectNodes(srcData: NodeData, dstData: NodeData): void {\n\t\tif (srcData.nodeDef.control && !dstData.nodeDef.control) {\n\t\t\tlet anode: any = dstData.anode\n\t\t\tsrcData.controlParams = Object.keys(dstData.nodeDef.params)\n\t\t\t\t.filter(pname => anode[pname] instanceof AudioParam)\n\t\t\tsrcData.controlParam = srcData.controlParams[0]\n\t\t\tsrcData.controlTarget = dstData.anode\n\t\t\tsrcData.anode.connect(anode[srcData.controlParam])\n\t\t}\n\t\telse srcData.anode.connect(dstData.anode)\n\t}\n\n\tdisconnectNodes(srcData: NodeData, dstData: NodeData): void {\n\t\tif (srcData.nodeDef.control && !dstData.nodeDef.control) {\n\t\t\tsrcData.controlParams = null\n\t\t\tsrcData.anode.disconnect((<any>dstData.anode)[srcData.controlParam])\n\t\t}\n\t\telse\n\t\t\tsrcData.anode.disconnect(dstData.anode)\n\t}\n\n\tjson2NodeData(json: any, data: NodeData): void {\n\t\tlet anydata: any = data\n\t\tfor (const pname of Object.keys(json.params)) {\n\t\t\tconst pvalue = anydata.anode[pname]\n\t\t\tconst jv = json.params[pname]\n\t\t\tif (anydata.nodeDef.params[pname].handler)\n\t\t\t\tthis.paramHandlers[anydata.nodeDef.params[pname].handler]\n\t\t\t\t\t.json2param(anydata.anode, jv)\n\t\t\telse if (pvalue instanceof AudioParam) {\n\t\t\t\tpvalue.value = jv;\n\t\t\t\t(<any>pvalue)['_value'] = jv\n\t\t\t}\n\t\t\telse anydata.anode[pname] = jv\n\t\t}\n\t}\n\n\tnodeData2json(data: any): any {\n\t\tconst params: any = {}\n\t\tfor (const pname of Object.keys(data.nodeDef.params)) {\n\t\t\tconst pvalue = data.anode[pname]\n\t\t\tif (data.nodeDef.params[pname].handler)\n\t\t\t\tparams[pname] = this.paramHandlers[data.nodeDef.params[pname].handler]\n\t\t\t\t\t.param2json(data.anode)\n\t\t\telse if (pvalue instanceof AudioParam)\n\t\t\t\tif ((<any>pvalue)['_value'] === undefined) params[pname] = pvalue.value\n\t\t\t\telse params[pname] = (<any>pvalue)['_value']\n\t\t\telse params[pname] = pvalue\n\t\t}\n\t\treturn {\n\t\t\ttype: data.type,\n\t\t\tparams,\n\t\t\tcontrolParam: data.controlParam,\n\t\t\tcontrolParams: data.controlParams\n\t\t}\n\t}\n\n\tmidi2freqRatio(midi: number): number {\n\t\treturn Math.pow(SEMITONE, midi - A4)\n\t}\n\n\tnoteOn(midi: number, gain: number, when?: number): void {\n\t\tif (!when) when = this.ac.currentTime\n\t\tthis.outGainNode.gain.value = gain\n\t\tconst ratio = this.midi2freqRatio(midi)\n\t\tthis.setupNoteHandlers()\n\t\tfor (const nh of this.noteHandlers)\n\t\t\tnh.noteOn(midi, gain, ratio, when)\n\t\tthis.portamento.ratio = ratio\n\t}\n\n\tnoteOff(midi: number, gain: number, when?: number): void {\n\t\tif (!when) when = this.ac.currentTime\n\t\tfor (const nh of this.noteHandlers)\n\t\t\tnh.noteOff(midi, gain, when)\n\t}\n\n\taddNoteHandler(nh: NoteHandler): void {\n\t\tthis.noteHandlers.push(nh)\n\t}\n\n\tremoveNoteHandler(nh: NoteHandler): void {\n\t\tremoveArrayElement(this.noteHandlers, nh)\n\t}\n\n\tsetupNoteHandlers() {\n\t\tlet maxRelease = 0\n\t\tfor (const nh of this.noteHandlers) {\n\t\t\tif (nh.kbTrigger && nh.releaseTime > maxRelease)\n\t\t\t\tmaxRelease = nh.releaseTime\n\t\t}\n\t\tfor (const nh of this.noteHandlers) {\n\t\t\tif (!nh.kbTrigger)\n\t\t\t\tnh.releaseTime = maxRelease\n\t\t}\n\t}\n\n\tinitNodeParams(anode: AudioNode, def: NodeDef, type: string): void {\n\t\tlet anynode: any = anode\n\t\tfor (const param of Object.keys(def.params || {}))\n\t\t\tif (anynode[param] === undefined)\n\t\t\t\tconsole.warn(`Parameter '${param}' not found for node '${type}'`)\n\t\t\telse if (anynode[param] instanceof AudioParam)\n\t\t\t\tanynode[param].value = def.params[param].initial\n\t\t\telse if (def.params[param].handler) {\n\t\t\t\tdef.params[param].phandler = this.paramHandlers[def.params[param].handler || '']\n\t\t\t\tdef.params[param].phandler.initialize(anynode, def)\n\t\t\t}\n\t\t\telse\n\t\t\t\tanynode[param] = def.params[param].initial\n\t}\n\n\tregisterCustomNode(constructorName: string, nodeClass: any): void {\n\t\tthis.customNodes[constructorName] = () => new nodeClass(this.ac)\n\t}\n\n\tregisterParamHandler(hname: string, handler: ParamHandler): void {\n\t\tthis.paramHandlers[hname] = handler\n\t}\n\n}\n\n\n\n// -------------------- Parameter handlers --------------------\n\ninterface BufferAudioNode extends AudioNode {\n\t_encoded: any\n\t_buffer: AudioBuffer\n\t_buffers: AudioBuffer[]\n\t_encodedBuffers: any[]\n\t_names: string[]\n}\n\nclass BufferDataHandler implements ParamHandler {\n\tuiRender = 'renderBufferData'\n\tinitialize(anode: AudioNode, def: NodeDef): void {}\n\n\tparam2json(anode: BufferAudioNode): any {\n\t\treturn file.arrayBufferToBase64(anode._encoded)\n\t}\n\n\tjson2param(anode: BufferAudioNode, json: any) {\n\t\tconst encoded = file.base64ToArrayBuffer(json)\n\t\tanode._encoded = encoded\n\t\tanode.context.decodeAudioData(encoded, buffer => anode._buffer = buffer)\n\t}\n}\n\nclass SoundBankHandler implements ParamHandler {\n\tuiRender = 'renderSoundBank'\n\tinitialize(anode: BufferAudioNode, def: NodeDef): void {\n\t\tanode._buffers = []\n\t\tanode._encodedBuffers = []\n\t\tanode._names = []\n\t}\n\n\tparam2json(anode: BufferAudioNode): any {\n\t\tconst files = []\n\t\tconst encs = anode._encodedBuffers\n\t\tconst names = anode._names\n\t\tfor (let i = 0; i < names.length; i++)\n\t\t\tfiles.push({\n\t\t\t\tname: names[i],\n\t\t\t\tdata: file.arrayBufferToBase64(encs[i])\n\t\t\t})\n\t\treturn files\n\t}\n\n\tjson2param(anode: BufferAudioNode, json: any) {\n\t\tconst bufs = anode._buffers\n\t\tbufs.length = 0\n\t\tconst encs = anode._encodedBuffers\n\t\tencs.length = 0\n\t\tconst names = anode._names\n\t\tnames.length = 0\n\t\tfor (let i = 0; i < json.length; i++) {\n\t\t\tconst item = json[i]\n\t\t\tnames.push(item.name)\n\t\t\tconst encoded = file.base64ToArrayBuffer(item.data)\n\t\t\tencs.push(encoded)\n\t\t\tthis.decodeBuffer(anode, encoded, bufs, i)\n\t\t}\n\t}\n\n\tdecodeBuffer(anode: AudioNode, data: ArrayBuffer,\n\t\tbufs: any[], i: number) {\n\t\tanode.context.decodeAudioData(data, buffer => bufs[i] = buffer)\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synth/synth.ts","interface JQueryWithModal extends JQuery {\n\tmodal(options?: any): void\n}\n\n/** Informs whether a popup is open or not */\nexport let isOpen = false\nexport function setOpen(open: boolean) {\n\tisOpen = open\n}\n\n/** Bootstrap-based equivalent of standard alert function */\nexport function alert(msg: string, title?: string, hideClose?: boolean, options?: any): void {\n\tpopup.find('.popup-message').html(msg)\n\tpopup.find('.modal-title').text(title || 'Alert')\n\tpopup.find('.popup-ok').hide()\n\tif (hideClose)\n\t\tpopup.find('.popup-close').hide()\n\telse\n\t\tpopup.find('.popup-close').html('Close')\n\tpopup.find('.popup-prompt > input').hide()\n\tisOpen = true\n\tpopup.one('hidden.bs.modal', _ => isOpen = false)\n\tpopup.modal(options)\n}\n\n/** Like an alert, but without a close button */\nexport function progress(msg: string, title?: string): void {\n\talert(msg, title, true, { keyboard: false })\n}\n\n/** Closes a popup in case it is open */\nexport function close() {\n\tif (!isOpen) return\n\tpopup.find('.popup-ok').click()\n}\n\n/** Bootstrap-based equivalent of standard confirm function */\nexport function confirm(msg: string, title: string,\n\tcbClose: (b: boolean) => void, cbOpen?: () => void) {\n\tlet result = false\n\tpopup.find('.popup-message').html(msg)\n\tpopup.find('.modal-title').text(title || 'Please confirm')\n\tconst okButton = popup.find('.popup-ok')\n\tokButton.show().click(_ => result = true)\n\tpopup.find('.popup-prompt > input').hide()\n\tpopup.find('.popup-close').text('Cancel')\n\tpopup.one('shown.bs.modal', _ => {\n\t\tokButton.focus()\n\t\tif (cbOpen) cbOpen()\n\t})\n\tpopup.find('form').one('submit', _ => {\n\t\tresult = true\n\t\tokButton.click()\n\t\treturn false\n\t})\n\tpopup.one('hide.bs.modal', _ => {\n\t\tokButton.off('click')\n\t\tisOpen = false\n\t\tcbClose(result)\n\t})\n\tisOpen = true\n\tpopup.modal()\n}\n\n/** Bootstrap-based equivalent of standard prompt function */\nexport function prompt(msg: string, title: string,\n\tinitialValue: string, cb: ((s: any) => void) | null): void {\n\tconst input = popup.find('.popup-prompt > input')\n\tconfirm(msg, title, confirmed => {\n\t\tif (!cb) return\n\t\tif (!confirmed) cb(null)\n\t\telse cb(input.val())\n\t}, () => {\n\t\tinput.show()\n\t\tinput.focus()\n\t\tif (initialValue) {\n\t\t\tinput.val(initialValue)\n\t\t\tconst hinput: HTMLInputElement = <HTMLInputElement>input[0]\n\t\t\thinput.select()\n\t\t}\n\t\telse input.val('')\n\t})\n}\n\n\nconst popup = <JQueryWithModal> $(`\n\t<div class=\"normal-font modal fade\" id=\"myModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\">\n\t<div class=\"modal-dialog\" role=\"document\">\n\t\t<div class=\"modal-content\">\n\t\t<div class=\"modal-header\">\n\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t<h4 class=\"modal-title\" id=\"myModalLabel\"></h4>\n\t\t</div>\n\t\t<div class=\"modal-body\">\n\t\t\t<div class=\"popup-message\"></div>\n\t\t\t<form class=\"popup-prompt\">\n\t\t\t\t<input type=\"text\" style=\"width: 100%\">\n\t\t\t</form>\n\t\t</div>\n\t\t<div class=\"modal-footer\">\n\t\t\t<button type=\"button\" class=\"btn btn-default popup-close\" data-dismiss=\"modal\"></button>\n\t\t\t<button type=\"button\" class=\"btn btn-primary popup-ok\" data-dismiss=\"modal\">OK</button>\n\t\t</div>\n\t\t</div>\n\t</div>\n\t</div>\n`)\n\n$('body').append(popup)\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/popups.ts","export interface TimerCallback {\n\t(time: number): void\n}\n\nexport class Timer {\n\trunning: boolean\n\tac: AudioContext\n\tcb: TimerCallback\n\t_bpm: number\n\tahead: number\n\tnextNoteTime: number\n\tnoteDuration: number\n\n\tconstructor(ac: AudioContext, bpm = 60, ahead = 0.1) {\n\t\tthis.running = false\n\t\tthis.ac = ac\n\t\tthis.noteDuration = 0\n\t\tthis.nextNoteTime = 0\n\t\tthis.bpm = bpm\n\t\tthis.ahead = ahead\n\t}\n\n\tget bpm() { return this._bpm }\n\n\tset bpm(v) {\n\t\tthis._bpm = v\n\t\tthis.nextNoteTime -= this.noteDuration\n\t\tthis.noteDuration = (1 / 4) * 60 / this._bpm\n\t\tthis.nextNoteTime += this.noteDuration\n\t}\n\n\tstart(cb?: TimerCallback): void {\n\t\tif (this.running) return\n\t\tthis.running = true\n\t\tif (cb) this.cb = cb\n\t\tthis.nextNoteTime = this.ac.currentTime\n\t\tthis.tick()\n\t}\n\n\tstop(): void {\n\t\tthis.running = false\n\t}\n\n\ttick(): void {\n\t\tif (!this.running) return\n\t\trequestAnimationFrame(this.tick.bind(this))\n\t\twhile (this.nextNoteTime < this.ac.currentTime + this.ahead) {\n\t\t\tif (this.cb) this.cb(this.nextNoteTime)\n\t\t\tthis.nextNoteTime += this.noteDuration\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synth/timer.ts","import { Synth, NodeData, Portamento } from './synth'\n\n\n/**\n * A polyphonic synth controlling an array of voices\n */\nexport class Instrument {\n\tvoices: Voice[]\n\tpressed: number[]\n\treleased: number[]\n\tportamento: Portamento\n\n\tconstructor(ac: AudioContext, json: any, numVoices: number, dest?: AudioNode) {\n\t\t// Setup voices\n\t\tthis.pressed = []\n\t\tthis.released = []\n\t\tthis.voices = []\n\t\tfor (let i = 0; i < numVoices; i++) {\n\t\t\tthis.voices.push(new Voice(ac, json, dest))\n\t\t\tthis.released.push(i)\n\t\t}\n\t\t// Setup synth params by having a common instance for all voices\n\t\tthis.portamento = this.voices[0].synth.portamento\n\t\tif (json.keyboard && json.keyboard.portamento)\n\t\t\tthis.portamento.time = json.keyboard.portamento\n\t\tfor (let i = 1; i < numVoices; i++)\n\t\t\tthis.voices[i].synth.portamento = this.portamento\n\t}\n\n\tnoteOn(midi: number, velocity = 1, when?: number): void {\n\t\tconst vnum = this.findVoice()\n\t\tconst voice = this.voices[vnum]\n\t\tthis.pressed.push(vnum)\n\t\tvoice.noteOn(midi, velocity, when)\n\t}\n\n\tnoteOff(midi: number, velocity = 1, when?: number): void {\n\t\tfor (let i = 0; i < this.voices.length; i++) {\n\t\t\tconst voice = this.voices[i]\n\t\t\tif (voice.lastNote == midi) {\n\t\t\t\tvoice.noteOff(midi, velocity, when)\n\t\t\t\tthis.released.push(i)\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tallNotesOff() {\n\t\tfor (const voice of this.voices) {\n\t\t\tif (voice.lastNote) voice.noteOff(voice.lastNote)\n\t\t}\n\t}\n\n\tfindVoice(): number {\n\t\tlet voices: number[]\n\t\tif (this.released.length > 0) voices = this.released\n\t\telse if (this.pressed.length > 0) voices = this.pressed\n\t\telse throw 'This should never happen'\n\t\treturn voices.splice(0, 1)[0]\n\t}\n\n\tclose() {\n\t\tfor (const voice of this.voices) voice.close()\n\t}\n}\n\n\n/**\n * An independent monophonic synth\n */\nexport class Voice {\n\tsynth: Synth\n\tlastNote: number\n\tloader: SynthLoader\n\tnodes: NodeTable\n\n\tconstructor(ac: AudioContext, json: any, dest?: AudioNode) {\n\t\tthis.nodes = {}\n\t\tthis.loader = new SynthLoader()\n\t\tthis.synth = this.loader.load(ac, json, dest || ac.destination, this.nodes)\n\t\tthis.lastNote = 0\n\t}\n\n\tnoteOn(midi: number, velocity = 1, when?: number): void {\n\t\tthis.synth.noteOn(midi, velocity, when)\n\t\tthis.lastNote = midi\n\t}\n\n\tnoteOff(midi: number, velocity = 1, when?: number): void {\n\t\tthis.synth.noteOff(midi, velocity, when)\n\t\tthis.lastNote = 0\n\t}\n\n\tgetParameterNode(nname: string, pname: string): AudioParam {\n\t\tlet n = this.nodes[nname]\n\t\tif (!n)\n\t\t\tthrow new Error(`Node \"${nname}\" not found`)\n\t\tlet prm = (<any>n)[pname]\n\t\tif (!prm)\n\t\t\tthrow new Error(`Parameter \"${pname}\" not found in node \"${nname}\"`)\n\t\treturn prm\n\t}\n\n\tclose(): void {\n\t\t// This method must be called to avoid memory leaks at the Web Audio level\n\t\tif (this.lastNote) this.noteOff(this.lastNote, 1)\n\t\tthis.loader.close()\n\t}\n}\n\n\n// -------------------- Private --------------------\n\nclass VoiceNodeData extends NodeData {\n\tinputs: NodeData[] = []\n\tconstructor(public id: number) {\n\t\tsuper()\n\t}\n\tgetInputs(): NodeData[] {\n\t\treturn this.inputs\n\t}\n}\n\ninterface NodeTable {\n\t[k: string]: AudioNode\n}\n\nclass SynthLoader {\n\tnodes: VoiceNodeData[] = []\n\tsynth: Synth\n\n\tload(ac: AudioContext, json: any, dest: AudioNode, nodes: NodeTable): Synth {\n\t\tconst synth = new Synth(ac)\n\t\t// Add nodes into id-based table\n\t\tlet j = 0\n\t\tfor (const jn of json.nodes)\n\t\t\tthis.nodes[j++] = new VoiceNodeData(jn.id)\n\t\t// Then set their list of inputs\n\t\tfor (let i = 0; i < json.nodes.length; i++)\n\t\t\tfor (const inum of json.nodes[i].inputs) {\n\t\t\t\tlet input = this.nodeById(inum)\n\t\t\t\tif (input) this.nodes[i].inputs.push(input)\n\t\t\t}\n\t\t// Then set their data\n\t\tfor (let i = 0; i < json.nodes.length; i++) {\n\t\t\tconst type = json.nodeData[i].type\n\t\t\tlet anode: AudioNode\n\t\t\tif (type == 'out')\n\t\t\t\tanode = synth.initOutputNodeData(this.nodes[i], dest)\n\t\t\telse\n\t\t\t\tanode = synth.initNodeData(this.nodes[i], type)\n\t\t\tsynth.json2NodeData(json.nodeData[i], this.nodes[i])\n\t\t\tthis.registerNode(anode, nodes, json.nodes[i].name)\n\t\t}\n\t\t// Then notify connections to handler\n\t\tfor (const dst of this.nodes)\n\t\t\tfor (const src of dst.inputs)\n\t\t\t\tsynth.connectNodes(src, dst)\n\t\t// Finally, return the newly created synth\n\t\tthis.synth = synth\n\t\treturn synth\n\t}\n\n\tnodeById(id: number): VoiceNodeData | null {\n\t\tfor (const node of this.nodes)\n\t\t\tif (node.id === id) return node\n\t\treturn null\n\t}\n\n\tregisterNode(anode: AudioNode, nodes: NodeTable, name: string) {\n\t\tnodes[name] = anode\n\t}\n\n\tclose() {\n\t\tfor (const node of this.nodes)\n\t\t\tfor (const input of node.inputs)\n\t\t\t\tthis.synth.disconnectNodes(input, node)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synth/instrument.ts","import { Track } from './track'\nimport { Note } from './scales'\nimport { NoteInfo } from './scheduler'\n\nlet logEnabled = true\nlet logCount = 0\nconst MAX_LOG_LINES = 1000\n\n\nexport function logToPanel(always: boolean, asHTML: boolean, ...args: any[]) {\n\tif (!always && !logEnabled) return\n\tffTweak()\n\tif (logCount++ > MAX_LOG_LINES)\n\t\t$('#walc-log-content > *:first-child').remove()\n\tlet txt = args.join(', ')\n\tlet div = $('<div>')\n\tif (asHTML) div.html(txt)\n\telse div.text(txt)\n\t$('#walc-log-content').append(div)\n\tlet logContainer = $('#walc-log-container')\n\tlogContainer.scrollTop(MAX_LOG_LINES * 100)\n}\n\nexport function enableLog(flag: boolean) {\n\tlogEnabled = flag\n}\n\nexport function isLogEnabled() {\n\treturn logEnabled\n}\n\nexport function txt2html(s: string) {\n\treturn s.replace(/\\[([^\\]\\|]+)\\|([^\\]\\|]+)\\]/g,\n\t\t(x, y, z) => `<span class=\"${y}\">${z}</span>`\n\t)\n}\n\nexport function clearLog() {\n\tlogCount = 0\n\t$('#walc-log-content').empty()\n}\n\nexport function logNote(note: NoteInfo, track: Track) {\n\tlet time = formatTime(track, note)\n\tlet noteName = (<any>Note)[note.number]\n\tif (noteName && noteName.length < 3) noteName += ' '\n\tlet snote = noteName\n\t\t? `[log-bold|${noteName}] (${note.number})`\n\t\t: `[log-bold|${note.number}]`\n\tlet sinstr = `[log-instr|${note.instrument.name}]`\n\tlet strack = `[log-track|${track.name}]`\n\tlogToPanel(false, true, txt2html(\n\t\t`${time} - Note: ${snote} ${sinstr} ${strack}`\n\t))\n}\n\nexport function logEvent(track: Track, txt: string) {\n\tlet time = formatTime(track)\n\tlogToPanel(false, true, txt2html(`${time} - ${txt}`))\n}\n\nfunction formatTime(track: Track, note?: NoteInfo) {\n\tlet ntime = note ? note.time : 0\n\tlet t = ntime + track.time * track.loopCount - track.latency\n\tlet millis = (t % 1)\n\tlet smillis = millis.toLocaleString(undefined, {\n\t\tminimumFractionDigits: 3, maximumFractionDigits: 3\n\t}).substr(2)\n\tt = Math.floor(t)\n\tlet secs = (t % 60)\n\tlet ssecs = secs.toLocaleString(undefined, { minimumIntegerDigits: 2 })\n\tlet mins = Math.floor(t / 60)\n\treturn `[log-time|${mins}:${ssecs}.${smillis}]`\n}\n\nfunction ffTweak() {\n\tif (tweaked) return\n\ttweaked = true\n\tif (navigator.userAgent.indexOf('Firefox') < 0) return\n\tlet logContainer = $('#walc-log-container')\n\tlet h = logContainer.height()\n\tlogContainer.css('height', h + 'px')\n}\n\nlet tweaked = false\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/log.ts","import { NodeData } from './synth'\nimport { ADSR } from './customNodes'\nimport { ModernAudioNode, removeArrayElement } from '../utils/modern'\n\n\n/**\n * A note handler handles MIDI keyboard events on behalf of a synth node,\n * updating the node status accordingly.\n */\nexport interface NoteHandler {\n\tkbTrigger: boolean\n\treleaseTime: number\n\tnoteOn(midi: number, gain: number, ratio: number, when: number): void\n\tnoteOff(midi: number, gain: number, when: number): void\n}\n\n/**\n * Handles common AudioNode cloning, used by oscillator and buffered data nodes.\n */\nexport class BaseNoteHandler implements NoteHandler {\n\tndata: NodeData\n\toutTracker: OutputTracker\n\tkbTrigger = false\n\treleaseTime = 0\n\n\tconstructor(ndata: NodeData) {\n\t\tthis.ndata = ndata\n\t\tthis.outTracker = new OutputTracker(ndata.anode)\n\t}\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number): void {}\n\tnoteOff(midi: number, gain: number, when: number): void {}\n\n\tclone(): AudioNode | null {\n\t\t// Create clone\n\t\tlet ctor = this.ndata.nodeDef.constructor\n\t\tif (!ctor) return null\n\t\tconst anode = (<any>this.ndata.anode.context)[ctor]()\n\t\t// Copy parameters\n\t\tfor (const pname of Object.keys(this.ndata.nodeDef.params)) {\n\t\t\tconst param = (<any>this.ndata.anode)[pname]\n\t\t\tif (param instanceof AudioParam)\n\t\t\t\tanode[pname].value = param.value\n\t\t\telse if (param !== null && param !== undefined)\n\t\t\t\tanode[pname] = param\n\t\t}\n\t\t// Copy output connections\n\t\tfor (const out of this.outTracker.outputs) {\n\t\t\tlet o2: any = out\n\t\t\tif (o2.custom && o2.anode) o2 = o2.anode\n\t\t\tanode.connect(o2)\n\t\t}\n\t\t// Copy control input connections\n\t\tfor (const inData of this.ndata.getInputs()) {\n\t\t\tinData.anode.connect(anode[inData.controlParam])\n\t\t}\n\t\t// TODO should copy snapshot of list of inputs and outputs\n\t\t// ...in case user connects or disconnects during playback\n\t\treturn anode\n\t}\n\n\tdisconnect(anode: ModernAudioNode): void {\n\t\t// Disconnect outputs\n\t\tfor (const out of this.outTracker.outputs)\n\t\t\tanode.disconnect(out)\n\t\t// Disconnect control inputs\n\t\tfor (const inData of this.ndata.getInputs()) {\n\t\t\tinData.anode.disconnect((<any>anode)[inData.controlParam])\n\t\t}\n\t}\n\n\trampParam(param: MAudioParam, ratio: number, when: number): void {\n\t\tconst portamento = this.ndata.synth.portamento\n\t\tconst newv = param.value * ratio\n\t\tparam._value = newv\t// Required for ADSR to capture the correct value\n\t\tif (portamento.time > 0 && portamento.ratio > 0) {\n\t\t\tconst oldv = param.value * portamento.ratio\n\t\t\tparam.cancelScheduledValues(when)\n\t\t\tparam.linearRampToValueAtTime(oldv, when)\n\t\t\tparam.exponentialRampToValueAtTime(newv, when + portamento.time)\n\t\t}\n\t\telse param.setValueAtTime(newv, when)\n\t}\n}\n\n/**\n * Handles note events for an OscillatorNode\n */\nexport class OscNoteHandler extends BaseNoteHandler {\n\toscClone: OscillatorNode\n\tlastNote: number\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number): void {\n\t\tif (this.oscClone) this.oscClone.stop(when)\n\t\tthis.oscClone = <OscillatorNode>this.clone()\n\t\tthis.rampParam(<MAudioParam>this.oscClone.frequency, ratio, when)\n\t\tthis.oscClone.start(when)\n\t\tthis.lastNote = midi\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return\t// Avoid multple keys artifacts in mono mode\n\t\tthis.oscClone.stop(when + this.releaseTime)\n\t}\n}\n\n/**\n * Handles note events for an LFO node. This is identical to a regular\n * oscillator node, but the note does not affect the oscillator frequency\n */\nexport class LFONoteHandler extends OscNoteHandler {\n\trampParam(param: AudioParam, ratio: number, when: number) {\n\t\t// Disable portamento for LFO\n\t\tparam.setValueAtTime(param.value, when)\n\t}\n}\n\n/**\n * Handles note events for an AudioBufferSourceNode\n */\nexport class BufferNoteHandler extends BaseNoteHandler {\n\tabsn: AudioBufferSourceNode\n\tlastNote: number\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number): void {\n\t\tif (this.absn)\n\t\t\tthis.absn.stop(when)\n\t\tconst buf = (<any>this.ndata.anode)._buffer\n\t\tif (!buf) return\t// Buffer still loading or failed\n\t\tthis.absn = <AudioBufferSourceNode>this.clone()\n\t\tthis.absn.buffer = buf\n\t\tconst pbr = this.absn.playbackRate\n\t\tconst newRate = pbr.value * ratio\n\t\tthis.rampParam(<MAudioParam>pbr, pbr.value * ratio, when)\n\t\tthis.absn.start(when)\n\t\tthis.lastNote = midi\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return\n\t\tthis.absn.stop(when + this.releaseTime)\n\t}\n}\n\n/**\n * Performs computations about ramps so they can be easily rescheduled\n */\nexport class Ramp {\n\tconstructor(public v1: number, public v2: number, public t1: number, public t2: number) {}\n\tinside(t: number) {\n\t\treturn this.t1 < this.t2 && this.t1 <= t && t <= this.t2\n\t}\n\tcut(t: number) {\n\t\tconst newv = this.v1 + (this.v2 - this.v1) * (t - this.t1) / (this.t2 - this.t1)\n\t\treturn new Ramp(this.v1, newv, this.t1, t)\n\t}\n\trun(p: AudioParam, follow = false) {\n\t\tif (this.t2 - this.t1 <= 0) {\n\t\t\tp.setValueAtTime(this.v2, this.t2)\n\t\t}\n\t\telse {\n\t\t\tif (!follow) p.setValueAtTime(this.v1, this.t1)\n\t\t\tp.linearRampToValueAtTime(this.v2, this.t2)\n\t\t}\n\t}\n}\n\nexport interface MAudioParam extends AudioParam {\n\t_attack: Ramp\n\t_decay: Ramp\n\t_release: Ramp\n\t_value: number\n}\n/**\n * Handles note events for a custom ADSR node\n */\nexport class ADSRNoteHandler extends BaseNoteHandler {\n\tlastNote: number\n\tkbTrigger = true\n\n\tconstructor(ndata: NodeData) {\n\t\tsuper(ndata)\n\t\tconst adsr = this.getADSR()\n\t\tconst oldMethod = adsr.disconnect\n\t\tadsr.disconnect = (dest: AudioParam) => {\n\t\t\tthis.loopParams(param => {\n\t\t\t\tif (param == dest)\n\t\t\t\t\tparam.setValueAtTime(param._value, adsr.context.currentTime)\n\t\t\t})\n\t\t\toldMethod(dest)\n\t\t}\n\t}\n\n\tgetADSR(): ADSR {\n\t\tlet anode: any = this.ndata.anode\n\t\treturn anode\n\t}\n\n\tget releaseTime() {\n\t\tconst adsr = this.getADSR()\n\t\treturn adsr.release\n\t}\n\tset releaseTime(relTime: number) {}\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number): void {\n\t\tthis.lastNote = midi\n\t\tconst adsr = this.getADSR()\n\t\tthis.loopParams(param => {\n\t\t\tconst v = this.getParamValue(param)\n\t\t\tconst initial = (1 - adsr.depth) * v\n\t\t\tconst sustain = v * adsr.sustain + initial * (1 - adsr.sustain)\n\t\t\tconst now = adsr.context.currentTime\n\t\t\tparam.cancelScheduledValues(now)\n\t\t\tif (when > now)\n\t\t\t\tthis.rescheduleRamp(param, param._release, now)\n\t\t\tparam._attack = new Ramp(initial, v, when, when + adsr.attack)\n\t\t\tparam._decay = new Ramp(v, sustain, when + adsr.attack, when + adsr.attack + adsr.decay)\n\t\t\tparam._attack.run(param)\n\t\t\tparam._decay.run(param, true)\n\t\t})\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return\t// Avoid multple keys artifacts in mono mode\n\t\tconst adsr = this.getADSR()\n\t\tthis.loopParams(param => {\n\t\t\tlet v = this.getRampValueAtTime(param, when)\n\t\t\tif (v === null)\n\t\t\t\tv = this.getParamValue(param) * adsr.sustain\n\t\t\tconst finalv = (1 - adsr.depth) * v\n\t\t\tparam.cancelScheduledValues(when)\n\t\t\tconst now = adsr.context.currentTime\n\t\t\tif (when > now)\n\t\t\t\t// tslint:disable-next-line:no-unused-expression\n\t\t\t\tthis.rescheduleRamp(param, param._attack, now) ||\n\t\t\t\tthis.rescheduleRamp(param, param._decay, now)\n\t\t\tparam._release = new Ramp(v, finalv, when, when + adsr.release)\n\t\t\tparam._release.run(param)\n\t\t})\n\t}\n\n\trescheduleRamp(param: MAudioParam, ramp: Ramp, now: number): boolean {\n\t\tif (ramp && ramp.inside(now)) {\n\t\t\tramp.cut(now).run(param)\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tgetRampValueAtTime(param: MAudioParam, t: number): number | null {\n\t\tlet ramp\n\t\tif (param._attack && param._attack.inside(t))\n\t\t\treturn param._attack.cut(t).v2\n\t\tif (param._decay && param._decay.inside(t))\n\t\t\treturn param._decay.cut(t).v2\n\t\treturn null\n\t}\n\n\tloopParams(cb: (out: MAudioParam) => void): void {\n\t\tfor (const out of this.outTracker.outputs)\n\t\t\tif (out instanceof AudioParam)\n\t\t\t\tcb(<MAudioParam>out)\n\t}\n\n\tgetParamValue(p: MAudioParam): number {\n\t\tif (p._value === undefined) p._value = p.value\n\t\treturn p._value\n\t}\n}\n\n/**\n * Handles note events for any node that allows calling start() after stop(),\n * such as custom nodes.\n */\nexport class RestartableNoteHandler extends BaseNoteHandler {\n\tlastNote: number\n\tplaying = false\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number): void {\n\t\tconst anode: any = this.ndata.anode\n\t\tif (this.playing)\n\t\t\tanode.stop(when)\n\t\tthis.playing = true\n\t\tanode.start(when)\n\t\tthis.lastNote = midi\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return\n\t\tthis.playing = false\n\t\tconst anode: any = this.ndata.anode\n\t\tanode.stop(when + this.releaseTime)\n\t}\n}\n\n/**\n * Handles note events for the SoundBank source node\n */\nexport class SoundBankNoteHandler extends BaseNoteHandler {\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number) {\n\t\tconst bufs = (<any>this.ndata.anode)['_buffers']\n\t\tconst absn = <AudioBufferSourceNode>this.clone()\n\t\tabsn.buffer = bufs[midi % bufs.length]\n\t\tabsn.start(when)\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number) {}\n}\n\n// -------------------- Exported note handlers --------------------\n\n/**\n * Exports available note handlers so they are used by their respective\n * nodes from the palette.\n */\nexport const NoteHandlers = {\n\t'osc': OscNoteHandler,\n\t'buffer': BufferNoteHandler,\n\t'ADSR': ADSRNoteHandler,\n\t'LFO': LFONoteHandler,\n\t'restartable': RestartableNoteHandler,\n\t'soundBank': SoundBankNoteHandler\n}\n\n\n// -------------------- Private classes --------------------\n\n/**\n * Tracks a node output connections and disconnections, to be used\n * when cloning, removing or controlling nodes.\n */\nexport class OutputTracker {\n\toutputs: (AudioNode | AudioParam) [] = []\n\n\tconstructor(anode: AudioNode) {\n\t\tthis.onBefore(anode, 'connect', this.connect, (oldf, obj, args) => {\n\t\t\tif (args[0].custom && args[0].anode) args[0] = args[0].anode\n\t\t\toldf.apply(obj, args)\n\t\t})\n\t\tthis.onBefore(anode, 'disconnect', this.disconnect)\n\t}\n\n\tconnect(np: AudioParam) {\n\t\tthis.outputs.push(np)\n\t}\n\n\tdisconnect(np: AudioParam) {\n\t\tremoveArrayElement(this.outputs, np)\n\t}\n\n\tonBefore(obj: any, fname: string, funcToCall: Function,\n\t\tcb?: (oldf: Function, obj: any, args: any) => void): void {\n\t\tconst oldf = obj[fname]\n\t\tconst self = this\n\t\tobj[fname] = function() {\n\t\t\tfuncToCall.apply(self, arguments)\n\t\t\tif (cb) cb(oldf, obj, arguments)\n\t\t\telse oldf.apply(obj, arguments)\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synth/notes.ts","/** Configuration data for an AudioNode parameter */\nexport interface NodeParamDef {\n\tinitial: any\n\tmin?: number\n\tmax?: number\n\tlinear?: boolean\n\tchoices?: string[]\n\thandler?: string\n\tphandler?: any\n}\n\n/** Configuration data for an AudioNode */\nexport interface NodeDef {\n\tconstructor: string | null\n\tcustom?: boolean\n\tnoteHandler?: string\n\tcontrol?: boolean\n\tparams: { [key: string]: NodeParamDef }\n}\n\n/** A set of AudioNode configuration elements */\nexport interface NodePalette {\n\t[key: string]: NodeDef\n}\n\n// -------------------- Node palette definition --------------------\n\nconst OCTAVE_DETUNE: NodeParamDef = {\n\tinitial: 0,\n\tmin: -1200,\n\tmax: 1200,\n\tlinear: true\n}\n\n/**\n * The set of AudioNodes available to the application, along with\n * their configuration.\n */\nexport let palette: NodePalette = {\n\t// Sources\n\tOscillator: {\n\t\tconstructor: 'createOscillator',\n\t\tnoteHandler: 'osc',\n\t\tparams: {\n\t\t\tfrequency: { initial: 220, min: 20, max: 20000 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\ttype: {\n\t\t\t\tinitial: 'sawtooth',\n\t\t\t\tchoices: ['sine', 'square', 'sawtooth', 'triangle']\n\t\t\t}\n\t\t}\n\t},\n\tBuffer: {\n\t\tconstructor: 'createBufferSource',\n\t\tnoteHandler: 'buffer',\n\t\tparams: {\n\t\t\tplaybackRate: { initial: 1, min: 0, max: 8 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\tbuffer: {\n\t\t\t\tinitial: null,\n\t\t\t\thandler: 'BufferDataHandler'\n\t\t\t},\n\t\t\tloop: { initial: false },\n\t\t\tloopStart: { initial: 0, min: 0, max: 10 },\n\t\t\tloopEnd: { initial: 3, min: 0, max: 10 }\n\t\t}\n\t},\n\tNoise: {\n\t\tconstructor: 'createNoise',\n\t\tnoteHandler: 'restartable',\n\t\tcustom: true,\n\t\tparams: {\n\t\t\tgain:  { initial: 1, min: 0, max: 10 }\n\t\t}\n\t},\n\tLineIn: {\n\t\tconstructor: 'createLineIn',\n\t\tcustom: true,\n\t\tparams: {}\n\t},\n\tSoundBank: {\n\t\tconstructor: 'createBufferSource',\n\t\tnoteHandler: 'soundBank',\n\t\tparams: {\n\t\t\tbuffer: {\n\t\t\t\tinitial: null,\n\t\t\t\thandler: 'SoundBankHandler'\n\t\t\t}\n\t\t}\n\t},\n\t// Effects\n\tGain: {\n\t\tconstructor: 'createGain',\n\t\tparams: {\n\t\t\tgain: { initial: 1, min: 0, max: 10, linear: true }\n\t\t}\n\t},\n\tFilter: {\n\t\tconstructor: 'createBiquadFilter',\n\t\tparams: {\n\t\t\tfrequency: { initial: 440, min: 20, max: 20000 },\n\t\t\tQ: { initial: 0, min: 0, max: 100 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\tgain: { initial: 0, min: -40, max: 40, linear: true },\n\t\t\ttype: {\n\t\t\t\tinitial: 'lowpass',\n\t\t\t\tchoices: ['lowpass', 'highpass', 'bandpass',\n\t\t\t\t\t'lowshelf', 'highshelf', 'peaking', 'notch', 'allpass']\n\t\t\t}\n\t\t},\n\t},\n\tDelay: {\n\t\tconstructor: 'createDelay',\n\t\tparams: {\n\t\t\tdelayTime: { initial: 1, min: 0, max: 5 }\n\t\t}\n\t},\n\tStereoPan: {\n\t\tconstructor: 'createStereoPanner',\n\t\tparams: {\n\t\t\tpan: { initial: 0, min: -1, max: 1, linear: true }\n\t\t}\n\t},\n\tCompressor: {\n\t\tconstructor: 'createDynamicsCompressor',\n\t\tparams: {\n\t\t\tthreshold: { initial: -24, min: -100, max: 0, linear: true },\n\t\t\tknee: { initial: 30, min: 0, max: 40, linear: true },\n\t\t\tratio: { initial: 12, min: 1, max: 20, linear: true },\n\t\t\tattack: { initial: 0.003, min: 0, max: 1 },\n\t\t\trelease: { initial: 0.25, min: 0, max: 1 }\n\t\t}\n\t},\n\tDetuner: {\n\t\tconstructor: 'createDetuner',\n\t\tcustom: true,\n\t\tparams: {\n\t\t\toctave: { initial: 0, min: -2, max: 2, linear: true }\n\t\t}\n\t},\n\t// Controllers\n\tLFO: {\n\t\tconstructor: 'createOscillator',\n\t\tnoteHandler: 'LFO',\n\t\tcontrol: true,\n\t\tparams: {\n\t\t\tfrequency: { initial: 5, min: 0.01, max: 200 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\ttype: {\n\t\t\t\tinitial: 'sine',\n\t\t\t\tchoices: ['sine', 'square', 'sawtooth', 'triangle']\n\t\t\t}\n\t\t}\n\t},\n\tGainCtrl: {\n\t\tconstructor: 'createGain',\n\t\tcontrol: true,\n\t\tparams: {\n\t\t\tgain: { initial: 10, min: 0, max: 100, linear: true }\n\t\t}\n\t},\n\tADSR: {\n\t\tconstructor: 'createADSR',\n\t\tnoteHandler: 'ADSR',\n\t\tcontrol: true,\n\t\tcustom: true,\n\t\tparams: {\n\t\t\tattack:  { initial: 0.2, min: 0, max: 10 },\n\t\t\tdecay:   { initial: 0.5, min: 0, max: 10 },\n\t\t\tsustain: { initial: 0.5, min: 0, max: 1, linear: true },\n\t\t\trelease: { initial: 1.0, min: 0, max: 10 },\n\t\t\tdepth:   { initial: 1.0, min: 0, max: 1 }\n\t\t}\n\t},\n\tNoiseCtrl: {\n\t\tconstructor: 'createNoiseCtrl',\n\t\tcontrol: true,\n\t\tcustom: true,\n\t\tparams: {\n\t\t\tfrequency: { initial: 4, min: 0, max: 200 },\n\t\t\tdepth:  { initial: 20, min: 0, max: 200 }\n\t\t}\n\t},\n\t// Output\n\tSpeaker: {\n\t\tconstructor: null,\n\t\tparams: {}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synth/palette.ts","import { ModernAudioNode } from '../utils/modern'\n\n/**\n * Base class to derive all custom nodes from it\n */\nexport class CustomNodeBase implements ModernAudioNode {\n\tcustom = true\n\tchannelCount = 2\n\tchannelCountMode: ChannelCountMode = 'max'\n\tchannelInterpretation: ChannelInterpretation = 'speakers'\n\tcontext: AudioContext\n\tnumberOfInputs = 0\n\tnumberOfOutputs = 1\n\t// Connect - disconnect\n\tconnect(destination: AudioNode | AudioParam,\n\t\toutput?: number, input?: number): AudioNode {\n\t\t\treturn <AudioNode>destination\n\t\t}\n\tdisconnect(destination: AudioNode | AudioParam,\n\t\toutput?: number, input?: number): void {}\n\t// Required for extending EventTarget\n\taddEventListener() {}\n\tdispatchEvent(evt: Event): boolean { return false }\n\tremoveEventListener() {}\n}\n\n\n/**\n * Envelope generator that controls the evolution over time of a destination\n * node's parameter. All parameter control is performed in the corresponding\n * ADSR note handler.\n */\nexport class ADSR extends CustomNodeBase {\n\tattack = 0.2\n\tdecay = 0.5\n\tsustain = 0.5\n\trelease = 1\n\tdepth = 1\n\t// TODO linear / exponential\n}\n\n\n/**\n * Base ScriptProcessor, to derive all custom audio processing nodes from it.\n */\nexport class ScriptProcessor extends CustomNodeBase {\n\tgain = 1\n\tanode: ScriptProcessorNode\n\tplaying = false\n\n\tconstructor(ac: AudioContext) {\n\t\tsuper()\n\t\tthis.anode = ac.createScriptProcessor(1024)\n\t\tthis.anode.onaudioprocess = evt => this.processAudio(evt)\n\t}\n\n\tconnect(node: AudioNode) {\n\t\treturn this.anode.connect(node)\n\t}\n\n\tdisconnect() {\n\t\tthis.anode.disconnect()\n\t}\n\n\tstart() {\n\t\tthis.playing = true\n\t}\n\n\tstop() {\n\t\tthis.playing = false\n\t}\n\n\tprocessAudio(evt: AudioProcessingEvent) {}\n}\n\n\n/**\n * Simple noise generator\n */\nexport class NoiseGenerator extends ScriptProcessor {\n\tprocessAudio(evt: AudioProcessingEvent) {\n\t\tfor (let channel = 0; channel < evt.outputBuffer.numberOfChannels; channel++) {\n\t\t\tconst out = evt.outputBuffer.getChannelData(channel)\n\t\t\tfor (let sample = 0; sample < out.length; sample++)\n\t\t\t\tout[sample] = this.playing ? this.gain * (Math.random() * 2 - 1) : 0\n\t\t}\n\t}\n}\n\n\n/**\n * Noise generator to be used as control node.\n * It uses sample & hold in order to implement the 'frequency' parameter.\n */\nexport class NoiseCtrlGenerator extends ScriptProcessor {\n\tac: AudioContext\n\tfrequency: number\n\tdepth: number\n\tsct: number\n\tv: number\n\n\tconstructor(ac: AudioContext) {\n\t\tsuper(ac)\n\t\tthis.ac = ac\n\t\tthis.frequency = 4\n\t\tthis.depth = 20\n\t\tthis.sct = 0\n\t\tthis.v = 0\n\t}\n\n\tconnect(param: any) {\n\t\treturn this.anode.connect(param)\n\t}\n\n\tprocessAudio(evt: AudioProcessingEvent) {\n\t\tconst samplesPerCycle = this.ac.sampleRate / this.frequency\n\t\tfor (let channel = 0; channel < evt.outputBuffer.numberOfChannels; channel++) {\n\t\t\tlet out = evt.outputBuffer.getChannelData(channel)\n\t\t\tfor (let sample = 0; sample < out.length; sample++) {\n\t\t\t\tthis.sct++\n\t\t\t\tif (this.sct > samplesPerCycle) {\n\t\t\t\t\tthis.v = this.depth * (Math.random() * 2 - 1)\n\t\t\t\t\tthis.sct = 0 // this.sct - Math.floor(this.sct);\n\t\t\t\t}\n\t\t\t\tout[sample] = this.v\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * Simple Pitch Shifter implemented in a quick & dirty way\n */\nexport class Detuner extends ScriptProcessor {\n\toctave = 0\n\tnumberOfInputs = 1\n\n\tprocessAudio(evt: AudioProcessingEvent) {\n\t\tconst dx = Math.pow(2, this.octave)\n\t\tfor (let channel = 0; channel < evt.outputBuffer.numberOfChannels; channel++) {\n\t\t\tlet out = evt.outputBuffer.getChannelData(channel)\n\t\t\tlet inbuf = evt.inputBuffer.getChannelData(channel)\n\t\t\tlet sct = 0\n\t\t\tfor (let sample = 0; sample < out.length; sample++) {\n\t\t\t\tout[sample] = inbuf[Math.floor(sct)]\n\t\t\t\tsct += dx\n\t\t\t\tif (sct >= inbuf.length) sct = 0\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * Captures audio from the PC audio input.\n * Requires user's authorization to grab audio input.\n */\nexport class LineInNode extends CustomNodeBase {\n\tsrcNode: ModernAudioNode\n\tdstNode: ModernAudioNode\n\tstream: any\n\n\tconnect(anode: any) {\n\t\tif (this.srcNode) {\n\t\t\tthis.srcNode.connect(anode)\n\t\t\tthis.dstNode = anode\n\t\t\treturn anode\n\t\t}\n\t\tconst navigator: any = window.navigator\n\t\tnavigator.getUserMedia = (navigator.getUserMedia ||\n\t\t\tnavigator.webkitGetUserMedia ||\n\t\t\tnavigator.mozGetUserMedia ||\n\t\t\tnavigator.msGetUserMedia)\n\t\tnavigator.getUserMedia({ audio: true }, (stream: any) => {\n\t\t\tconst ac: any = anode.context\n\t\t\tthis.srcNode = ac.createMediaStreamSource(stream)\n\t\t\tlet a2: any = anode\n\t\t\tif (a2.custom && a2.anode) a2 = a2.anode\n\t\t\tthis.srcNode.connect(a2)\n\t\t\tthis.dstNode = anode\n\t\t\tthis.stream = stream\n\t\t}, (error: any) => console.error(error))\n\t}\n\n\tdisconnect() {\n\t\tthis.srcNode.disconnect(this.dstNode)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synth/customNodes.ts","import { Instrument } from '../synth/instrument'\n\nimport { LCInstrument } from './instruments'\nimport { Effect } from './effects'\nimport { Track } from './track'\nimport { Timer } from '../synth/timer'\nimport { logNote, logEvent, logToPanel, txt2html } from './log'\n\n\ninterface InstrumentOptions {\n\tinstrument: LCInstrument\n\t[k: string]: number | LCInstrument\n}\n\ninterface EffectOptions {\n\teffect: Effect\n\t[k: string]: number | Effect\n}\n\nexport type NoteOptions = InstrumentOptions | EffectOptions\n\nexport interface NoteInfo {\n\ttrack: Track\n\tinstrument: LCInstrument\n\tnumber: number\n\ttime: number\n\tvelocity: number\n\tduration?: number\n\toptions?: NoteOptions\n}\n\nexport type NoteListener = (note: NoteInfo) => void\n\ninterface InstrumentTable {\n\t[instrName: string]: LCInstrument\n}\n\ninterface EffectTable {\n\t[effectName: string]: Effect\n}\n\ninterface TrackTable {\n\t[trackName: string]: Track\n}\n\nexport let instruments: InstrumentTable = {}\nexport let effects: EffectTable = {}\nexport let userTracks: TrackTable = {}\nexport let tracks: TrackTable = {}\n\nlet nextTracks: TrackTable = {}\nlet noteInfoListener = function(n: NoteInfo) {}\n\n\nexport function scheduleTrack(t: Track) {\n\tt.startTime = t.ac.currentTime\n\tif (tracks[t.name])\n\t\tnextTracks[t.name] = t\n\telse\n\t\ttracks[t.name] = t\n\tt.callback(t)\n\tt.playing = true\n}\n\nexport function timerTickHandler(timer: Timer, time: number) {\n\teachTrack(t => playTrack(timer, t, time))\n}\n\nexport function eachTrack(cb: (t: Track) => void) {\n\tlet tnames = Object.getOwnPropertyNames(tracks)\n\tfor (let tname of tnames)\n\t\tcb(tracks[tname])\n}\n\nexport function listenNotes(listener: NoteListener) {\n\tnoteInfoListener = listener\n}\n\nfunction playTrack(timer: Timer, track: Track, time: number) {\n\tlet played\n\tdo {\n\t\tplayed = false\n\t\tif (shouldTrackEnd(track)) break\n\t\ttrack = tracks[track.name]\n\t\tlet note = track.notes[track.notect]\n\t\tif (track.startTime + note.time <= time) {\n\t\t\tplayNote(track, note, timer, track.startTime)\n\t\t\tplayed = true\n\t\t\ttrack.notect++\n\t\t}\n\t} while (played)\n}\n\nfunction playNote(track: Track, note: NoteInfo, timer: Timer, startTime: number) {\n\tif (note.options) setOptions(note.options)\n\tif (note.number < 1) return\n\tlogNote(note, track)\n\tnoteInfoListener(note)\t// TODO time accuracy could be improved\n\tnote.instrument.noteOn(\n\t\tnote.number, note.velocity, startTime + note.time)\n\tlet duration = note.duration\n\t\t|| note.instrument.duration || timer.noteDuration\n\tnote.instrument.noteOff(\n\t\tnote.number, note.velocity, startTime + note.time + duration)\n}\n\nfunction setOptions(opts: NoteOptions) {\n\tif (opts.effect) {\n\t\tlet e = <Effect> opts.effect\n\t\tfor (let pname of Object.getOwnPropertyNames(opts))\n\t\t\tif (pname != 'effect') e.param(pname, <number>opts[pname])\n\t}\n\telse if (opts.instrument) {\n\t\tlet i = <LCInstrument> opts.instrument\n\t\tfor (let pname of Object.getOwnPropertyNames(opts))\n\t\t\tif (pname != 'instrument') i.param(pname, <number>opts[pname])\n\t}\n}\n\nfunction shouldTrackEnd(track: Track) {\n\tif (track.stopped) return true\n\tif (track.notect < track.notes.length) return false\n\ttrack.notect = 0\n\tif (track.shouldStop) {\n\t\ttrack.stopped = true\n\t\ttrack.shouldStop = false\n\t\treturn true\n\t}\n\tif (nextTracks[track.name]) {\n\t\tlet nextTrack = nextTracks[track.name]\n\t\tnextTrack.startTime = track.startTime + track.time\n\t\ttracks[track.name] = nextTrack\n\t\tuserTracks[track.name] = nextTrack\n\t\tdelete nextTracks[track.name]\n\t\treturn false\n\t}\n\tif (track.loop) {\n\t\ttrack.startTime += track.time\n\t\ttrack.loopCount++\n\t\tlogEvent(track, `Track [log-track|${track.name}] has looped`)\n\t\ttrack.notes = []\n\t\ttrack.time = 0\n\t\ttry {\n\t\t\ttrack.callback(track)\n\t\t} catch (e) {\n\t\t\ttrack.loop = false\n\t\t\tlogToPanel(true, true, txt2html(\n\t\t\t\t`[log-bold|Runtime error]: \"${e.message}\" in track \"${track.name}\" - looping stopped`\n\t\t\t))\n\t\t\tconsole.error(e)\n\t\t}\n\t\treturn false\n\t}\n\telse {\n\t\t// Update latency and loopCount just for the sake of logEvent\n\t\ttrack.latency = 0\n\t\ttrack.loopCount++\n\t\tlogEvent(track, `Track [log-track|${track.name}] has ended`)\n\t\tdelete tracks[track.name]\n\t\tdelete userTracks[track.name]\n\t\treturn true\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/scheduler.ts","export let Note = {\n\tC0: 12, Cs0: 13, Db0: 13, D0: 14, Ds0: 15, Eb0: 15,\n\tE0: 16, F0: 17, Fs0: 18, Gb0: 18, G0: 19, Gs0: 20,\n\tAb0: 20, A0: 21, As0: 22, Bb0: 22, B0: 23,\n\tC1: 24, Cs1: 25, Db1: 25, D1: 26, Ds1: 27, Eb1: 27,\n\tE1: 28, F1: 29, Fs1: 30, Gb1: 30, G1: 31, Gs1: 32,\n\tAb1: 32, A1: 33, As1: 34, Bb1: 34, B1: 35,\n\tC2: 36, Cs2: 37, Db2: 37, D2: 38, Ds2: 39, Eb2: 39,\n\tE2: 40, F2: 41, Fs2: 42, Gb2: 42, G2: 43, Gs2: 44,\n\tAb2: 44, A2: 45, As2: 46, Bb2: 46, B2: 47,\n\tC3: 48, Cs3: 49, Db3: 49, D3: 50, Ds3: 51, Eb3: 51,\n\tE3: 52, F3: 53, Fs3: 54, Gb3: 54, G3: 55, Gs3: 56,\n\tAb3: 56, A3: 57, As3: 58, Bb3: 58, B3: 59,\n\tC4: 60, Cs4: 61, Db4: 61, D4: 62, Ds4: 63, Eb4: 63,\n\tE4: 64, F4: 65, Fs4: 66, Gb4: 66, G4: 67, Gs4: 68,\n\tAb4: 68, A4: 69, As4: 70, Bb4: 70, B4: 71,\n\tC5: 72, Cs5: 73, Db5: 73, D5: 74, Ds5: 75, Eb5: 75,\n\tE5: 76, F5: 77, Fs5: 78, Gb5: 78, G5: 79, Gs5: 80,\n\tAb5: 80, A5: 81, As5: 82, Bb5: 82, B5: 83,\n\tC6: 84, Cs6: 85, Db6: 85, D6: 86, Ds6: 87, Eb6: 87,\n\tE6: 88, F6: 89, Fs6: 90, Gb6: 90, G6: 91, Gs6: 92,\n\tAb6: 92, A6: 93, As6: 94, Bb6: 94, B6: 95,\n\tC7: 96, Cs7: 97, Db7: 97, D7: 98, Ds7: 99, Eb7: 99,\n\tE7: 100, F7: 101, Fs7: 102, Gb7: 102, G7: 103, Gs7: 104,\n\tAb7: 104, A7: 105, As7: 106, Bb7: 106, B7: 107,\n\tC8: 108, Cs8: 109, Db8: 109, D8: 110, Ds8: 111, Eb8: 111,\n\tE8: 112, F8: 113, Fs8: 114, Gb8: 114, G8: 115, Gs8: 116,\n\tAb8: 116, A8: 117, As8: 118, Bb8: 118, B8: 119\n}\n\nconst NoteDeltas: any = {\n\tmajor: [0, 2, 4, 5, 7, 9, 11, 12],\n\tmajor_pentatonic: [0, 2, 4, 7, 9, 12],\n\tminor: [0, 2, 3, 5, 7, 8, 10, 12],\n\tminor_pentatonic: [0, 3, 5, 7, 10, 12],\n\tchromatic: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n}\n\nfunction invertEnum(enm: any) {\n\tfor (let k of Object.getOwnPropertyNames(enm))\n\t\tenm[enm[k]] = k\n}\n\ninvertEnum(Note)\n\n\nfunction makeSingleScale(note: number, type: string) {\n\tlet deltas: number[] = NoteDeltas[type]\n\tif (!deltas)\n\t\tthrow new Error(`Scale type \"${type}\" does not exist`)\n\tlet r = []\n\tfor (let delta of deltas)\n\t\tr.push(note + delta)\n\treturn r.ring()\n}\n\nexport function makeScale(note: number, type = 'major', octaves = 1) {\n\tif (octaves <= 1)\n\t\treturn makeSingleScale(note, type)\n\tlet r = [].ring()\n\tfor (let oct = 0; oct < octaves; oct++) {\n\t\tr = <any>r.concat(<any>makeSingleScale(note + oct * 12, type))\n\t\tif (oct < octaves - 1) r = r.butlast()\n\t}\n\treturn r\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/scales.ts","import { ModernAudioNode } from '../utils/modern'\n\n/**\n * Displays FFT and Oscilloscope graphs from the output of a given AudioNode\n */\nexport class AudioAnalyzer {\n\tinput: ModernAudioNode | null\n\tanode: AnalyserNode\n\tcanvasFFT: HTMLCanvasElement\n\tgcFFT: CanvasRenderingContext2D | null\n\tcanvasOsc: HTMLCanvasElement\n\tgcOsc: CanvasRenderingContext2D | null\n\toscData: Uint8Array\n\tfftData: Uint8Array\n\n\tconstructor(jqfft: JQuery, jqosc: JQuery) {\n\t\tthis.canvasFFT = this.createCanvas(jqfft)\n\t\tthis.gcFFT = this.canvasFFT.getContext('2d')\n\t\tthis.canvasOsc = this.createCanvas(jqosc)\n\t\tthis.gcOsc = this.canvasOsc.getContext('2d')\n\t}\n\n\tcreateCanvas(panel: JQuery): HTMLCanvasElement {\n\t\tconst jqCanvas = $(`<canvas width=\"${panel.width()}\" height=\"${panel.height()}\">`)\n\t\tpanel.append(jqCanvas)\n\t\tconst canvas = <HTMLCanvasElement>jqCanvas[0]\n\t\treturn canvas\n\t}\n\n\tcreateAnalyzerNode(ac: AudioContext) {\n\t\tif (this.anode) return\n\t\tthis.anode = ac.createAnalyser()\n\t\tthis.fftData = new Uint8Array(this.anode.fftSize)\n\t\tthis.oscData = new Uint8Array(this.anode.fftSize)\n\t}\n\n\tanalyze(input: AudioNode) {\n\t\tthis.disconnect()\n\t\tthis.createAnalyzerNode(input.context)\n\t\tthis.input = input\n\t\tthis.input.connect(this.anode)\n\t\tthis.requestAnimationFrame()\n\t}\n\n\tdisconnect() {\n\t\tif (!this.input) return\n\t\tthis.input.disconnect(this.anode)\n\t\tthis.input = null\n\t}\n\n\trequestAnimationFrame() {\n\t\twindow.requestAnimationFrame(_ => this.updateCanvas())\n\t}\n\tupdateCanvas() {\n\t\tif (!this.input) return\n\t\tif (this.gcFFT)\n\t\t\tthis.drawFFT(this.gcFFT, this.canvasFFT, this.fftData, '#00FF00')\n\t\tif (this.gcOsc)\n\t\t\tthis.drawOsc(this.gcOsc, this.canvasOsc, this.oscData, '#FFFF00')\n\t\tthis.requestAnimationFrame()\n\t}\n\n\tdrawFFT(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\t\t\tdata: Uint8Array, color: string) {\n\t\tconst [w, h] = this.setupDraw(gc, canvas, data, color)\n\t\tthis.anode.getByteFrequencyData(data)\n\t\tconst dx = (data.length / 2) / canvas.width\n\t\tlet x = 0\n\t\t// TODO calculate average of all samples from x to x + dx - 1\n\t\tfor (let i = 0; i < w; i++) {\n\t\t\tlet y = data[Math.floor(x)]\n\t\t\tx += dx\n\t\t\tgc.moveTo(i, h - 1)\n\t\t\tgc.lineTo(i, h - 1 - h * y / 256)\n\t\t}\n\t\tgc.stroke()\n\t\tgc.closePath()\n\t}\n\n\tdrawOsc(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\t\tdata: Uint8Array, color: string) {\n\t\tconst [w, h] = this.setupDraw(gc, canvas, data, color)\n\t\tthis.anode.getByteTimeDomainData(data)\n\t\tgc.moveTo(0, h / 2)\n\t\tlet x = 0\n\t\twhile (data[x] > 128 && x < data.length / 4) x++\n\t\twhile (data[x] < 128 && x < data.length / 4) x++\n\t\tconst dx = (data.length * 0.75) / canvas.width\n\t\tfor (let i = 0; i < w; i++) {\n\t\t\tlet y = data[Math.floor(x)]\n\t\t\tx += dx\n\t\t\tgc.lineTo(i, h * y / 256)\n\t\t}\n\t\tgc.stroke()\n\t\tgc.closePath()\n\t}\n\n\tsetupDraw(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\t\tdata: Uint8Array, color: string) {\n\t\tconst w = canvas.width\n\t\tconst h = canvas.height\n\t\tgc.clearRect(0, 0, w, h)\n\t\tgc.beginPath()\n\t\tgc.strokeStyle = color\n\t\treturn [w, h]\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synthUI/analyzer.ts","import { Presets } from '../synthUI/presets'\nimport { SynthUI } from '../synthUI/synthUI'\n\nimport { LiveCoding } from './live-coding'\nimport { registerActions } from './editor-actions'\nimport { setupRing } from './rings'\nimport { Note } from './scales'\nimport { random } from './random'\nimport { handleBuffers } from './editor-buffers'\nimport { AudioAnalyzer } from '../synthUI/analyzer'\nimport { logToPanel, txt2html } from './log'\nimport { instruments, effects, userTracks } from './scheduler'\n\n\nlet sinkDiv = document.createElement('div')\n\nfunction byId(id: string) {\n\treturn document.getElementById(id) || sinkDiv\n}\n\n// -------------------- Editor setup --------------------\n\nlet global = <any>window\nlet monacoRequire = global.require\ndeclare let monaco: any\nlet editor: any\nlet _synthUI: SynthUI\nlet analyzer: AudioAnalyzer\nlet decorations: any[] = []\n\nfunction loadMonaco(cb: () => void) {\n\tmonacoRequire.config({ paths: { 'vs': 'js/vendor/monaco/min/vs' }})\n\tmonacoRequire(['vs/editor/editor.main'], cb)\n}\n\nexport function createEditor(\n\tac: AudioContext, presets: Presets, synthUI: SynthUI): Promise<any> {\n\tsetupGlobals(new LiveCoding(ac, presets, synthUI))\n\t_synthUI = synthUI\n\treturn new Promise(resolve =>\n\t\tloadMonaco(() => resolve(setupEditor()))\n\t)\n}\n\nfunction setupEditor() {\n\tlet editorElem = byId('walc-code-editor')\n\tsetupDefinitions()\n\teditor = monaco.editor.create(editorElem, {\n\t\tvalue: '',\n\t\tlanguage: 'typescript',\n\t\tlineNumbers: false,\n\t\trenderLineHighlight: 'none',\n\t\tminimap: { enabled: false }\n\t\t// fontSize: 15\n\t})\n\thandleEditorResize(editorElem)\n\tregisterActions(editor)\n\teditor.focus()\n\thandleBuffers(editor)\n\tsetupCompletion()\n\t$(document).on('route:show', (e, h) => {\n\t\tif (h != '#live-coding') return\n\t\teditor.focus()\n\t\twindow.scrollTo(0, 0)\n\t})\n\tanalyzer = new AudioAnalyzer($('#walc-graph-fft'), $('#walc-graph-osc'))\n\treturn editor\n}\n\nfunction setupGlobals(lc: LiveCoding) {\n\tglobal.lc = lc\n\tglobal.instruments = instruments\n\tglobal.effects = effects\n\tglobal.tracks = userTracks\n\tglobal.Note = Note\n\tglobal.random = random\n\tglobal.p5 = global\n\tglobal.global = {}\n\tsetupRing()\n}\n\nfunction addTypeScriptDefinitions(defs: string) {\n\tmonaco.languages.typescript.typescriptDefaults.addExtraLib(defs)\n}\n\nfunction setupDefinitions() {\n\tfetch('js/lc-definitions.ts')\n\t.then(response => response.text())\n\t.then(addTypeScriptDefinitions)\n\tif (document.location.pathname.endsWith('p5j.html'))\n\t\tfetch('js/p5.d.ts')\n\t\t.then(response => response.text())\n\t\t.then(addTypeScriptDefinitions)\n}\n\nfunction createProposals(name: string, obj: any) {\n\tlet members = []\n\tif (name.endsWith('s')) name = name.substr(0, name.length - 1)\n\tfor (let pname in obj) members.push({\n\t\tlabel: pname,\n\t\tkind: monaco.languages.CompletionItemKind.Field,\n\t\tdocumentation: `The ${pname} ${name}`,\n\t\tinsertText: pname\n\t})\n\treturn members\n}\n\nfunction setupCompletion() {\n\tmonaco.languages.registerCompletionItemProvider('typescript', {\n\t\tprovideCompletionItems: function(model: any, pos: any) {\n\t\t\tlet lnum = pos.lineNumber\n\t\t\tlet txt = model.getValueInRange({\n\t\t\t\tstartLineNumber: lnum, startColumn: 1,\n\t\t\t\tendLineNumber: lnum, endColumn: pos.column\n\t\t\t})\n\t\t\tlet globals: any = { instruments, effects, tracks: userTracks, global }\n\t\t\tfor (let name in globals)\n\t\t\t\tif (txt.endsWith(name + '.'))\n\t\t\t\t\treturn createProposals(name, globals[name])\n\t\t\treturn []\n\t\t}\n\t})\n}\n\nfunction handleEditorResize(elem: HTMLElement) {\n\tlet edw = elem.clientWidth\n\tsetInterval(_ => {\n\t\tlet newW = elem.clientWidth\n\t\tif (edw != newW) {\n\t\t\tedw = newW\n\t\t\teditor.layout()\n\t\t}\n\t}, 1000)\n}\n\nfunction setupAnalyzers() {\n\tanalyzer.analyze(_synthUI.outNode)\n}\n\n// -------------------- Error handling --------------------\n\nfunction getRuntimeErrorDecoration(lineNum: number) {\n\tlet decs = editor.getLineDecorations(lineNum)\n\tif (!decs || decs.length <= 0) return null\n\tfor (let dec of decs)\n\t\tif (dec.options.className == 'walc-error') return dec\n\treturn null\n}\n\nfunction getErrorLocation(e: any) {\n\t// Safari\n\tif (e.line)\n\t\treturn { line: e.line, column: e.column }\n\t// Chrome: <anonymous>\n\t// Firefox: > eval\n\tif (!e.stack) return null\n\tlet match = e.stack.match(/(<anonymous>|> eval):(\\d+):(\\d+)/)\n\tif (match && match.length == 4) {\n\t\treturn {\n\t\t\tline: parseInt(match[2], 10),\n\t\t\tcolumn: parseInt(match[3], 10)\n\t\t}\n\t}\n\treturn null\n}\n\nfunction showError(msg: string, line: number, col: number) {\n\tlogToPanel(true, true, txt2html(\n\t\t`[log-bold|Runtime error]: \"${msg}\" at line ${line}, column ${col}`\n\t))\n\teditor.revealLineInCenter(line)\n\tlet errorRange = getErrorRange(editor.getModel().getLineContent(line), col)\n\tdecorations = editor.deltaDecorations(decorations, [{\n\t\trange: new monaco.Range(line, errorRange.from, line, errorRange.to),\n\t\toptions: {\n\t\t\tisWholeLine: false,\n\t\t\tclassName: 'walc-error',\n\t\t\thoverMessage: ['**Runtime Error**', msg ]\n\t\t}\n\t}])\n\treturn errorRange\n}\n\nfunction getErrorRange(s: string, col: number) {\n\ts = s.substring(col - 1)\n\tlet m = s.match(/\\s*[\\w_$]+/)\n\tif (m && m.index !== undefined && m[0]) {\n\t\treturn { from: col + m.index, to: col + m.index + m[0].length }\n\t}\n\treturn { from: 0, to: s.length + 1 }\n}\n\n// -------------------- Code execution --------------------\n\nexport function flashRange(range: any) {\n\tlet decs: any[] = []\n\tdecs = editor.deltaDecorations(decs, [{\n\t\trange,\n\t\toptions: {\n\t\t\tisWholeLine: false,\n\t\t\tclassName: 'walc-running'\n\t\t}\n\t}])\n\tsetTimeout(_ => {\n\t\t$('.walc-running').css('background-color', 'inherit')\n\t\tsetTimeout(() => {\n\t\t\tdecs = editor.deltaDecorations(decs, [])\n\t\t}, 1000)\n\t}, 100)\n}\n\nexport function doRunCode(code: string) {\n\trandom.seed(random.seed())\n\tsetupAnalyzers()\n\ttry {\n\t\tdecorations = editor.deltaDecorations(decorations, [])\n\t\t// tslint:disable-next-line:no-eval\n\t\teval(code)\n\t} catch (e) {\n\t\tlet location = getErrorLocation(e)\n\t\tif (location)\n\t\t\tshowError(e.message, location.line, location.column)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/editor.ts","import { Instrument } from '../synth/instrument'\nimport { Presets } from '../synthUI/presets'\nimport { LiveCoding } from './live-coding'\nimport { WebAudioFontPlayer } from '../third-party/wavetable'\nimport { logToPanel, txt2html } from './log'\n\n\nexport interface LCInstrument {\n\tname: string\n\tduration: number\n\tparam(pname: string, value?: number,\n\t\trampTime?: number, exponential?: boolean): number | this\n\tparamNames(): string[]\n\tnoteOn(midi: number, velocity: number, when?: number): void\n\tnoteOff(midi: number, velocity: number, when?: number): void\n\tconnect(node: AudioNode): void\n\tinitialize(): void\n\tshutdown(): void\n}\n\n\n// ---------- Providers ----------\n\ntype InstrumentProvider = (lc: LiveCoding,\n\tpreset: string, name?: string, numVoices?: number) => LCInstrument\n\ninterface InstrProviderTable {\n\t[prefix: string]: InstrumentProvider\n}\n\nlet providers: InstrProviderTable = {\n\tModulator: modulatorInstrProvider,\n\twavetable: wavetableInstrProvider,\n\tsample: sampleInstrProvider\n}\n\n\nexport function registerProvider(prefix: string, provider: InstrumentProvider) {\n\tproviders[prefix] = provider\n}\n\nexport function createInstrument(\n\tlc: LiveCoding,\t// This is ugly and should be refactored\n\tpreset: number | string | PresetData,\n\tname?: string,\n\tnumVoices = 4) {\n\tif (typeof preset != 'string')\n\t\treturn modulatorInstrProvider(lc, preset, name, numVoices)\n\tif (preset.indexOf('/') < 0) preset = 'Modulator/' + preset\n\tlet [prefix, iname] = preset.split('/')\n\tlet provider = providers[prefix]\n\tif (!provider) throw new Error(\n\t\t`Instrument '${preset}' not found: unknown prefix '${provider}'`)\n\treturn provider(lc, iname, name, numVoices)\n}\n\nfunction modulatorInstrProvider(\n\tlc: LiveCoding,\t// This is ugly and should be refactored\n\tpreset: number | string | PresetData,\n\tname?: string,\n\tnumVoices = 4) {\n\tlet prst = getPreset(lc.presets, preset)\n\tlet instr = new ModulatorInstrument(\n\t\tlc.context, prst, numVoices, lc.synthUI.outNode)\n\tinstr.name = name || prst.name\n\tinstr.duration = findNoteDuration(prst)\n\treturn instr\n}\n\nfunction wavetableInstrProvider(\n\tlc: LiveCoding,\n\tpreset: string,\n\tname?: string,\n\tnumVoices = 4) {\n\tlet instr = new WavetableInstrument(lc.context, preset, name)\n\treturn instr\n}\n\nfunction sampleInstrProvider(\n\tlc: LiveCoding,\n\tpreset: string,\n\tname?: string,\n\tnumVoices = 4) {\n\tlet instr = new SampleInstrument(lc.context, preset, name)\n\treturn instr\n}\n\n\n// ------------------------- Modulator instrument -------------------------\n\nclass ModulatorInstrument extends Instrument implements LCInstrument {\n\tname: string\n\tduration: number\n\n\tasync initialize() {\n\t\tlogInstrReady(this.name)\n\t}\n\n\tshutdown() {}\n\n\tparam(pname: string, value?: number, rampTime?: number, exponential = true) {\n\t\tlet names = pname.split('/')\n\t\tif (names.length < 2) throw new Error(\n\t\t\t`Instrument parameters require \"node/param\" format`)\n\t\tlet node = names[0]\n\t\tlet name = names[1]\n\t\tif (value === undefined) {\n\t\t\tlet prm = this.voices[0].getParameterNode(node, name)\n\t\t\treturn prm.value\n\t\t}\n\t\tfor (let v of this.voices) {\n\t\t\tlet prm: any = v.getParameterNode(node, name)\n\t\t\tthis.updateValue(prm, value, rampTime, exponential)\n\t\t}\n\t\treturn this\n\t}\n\n\tparamNames() {\n\t\tlet pnames = []\n\t\tlet v = this.voices[0]\n\t\tfor (let nname of Object.getOwnPropertyNames(v.nodes))\n\t\t\tfor (let pname in v.nodes[nname])\n\t\t\t\tif ((<any>v.nodes[nname])[pname] instanceof AudioParam)\n\t\t\t\t\tpnames.push(nname + '/' + pname)\n\t\treturn pnames\n\t}\n\n\tconnect(node: AudioNode) {\n\t\tfor (let v of this.voices) {\n\t\t\tv.synth.outGainNode.disconnect()\n\t\t\tv.synth.outGainNode.connect(node)\n\t\t}\n\t}\n\n\tprivate updateValue(prm: AudioParam, value: number, rampTime?: number, exponential = true) {\n\t\tif (rampTime === undefined) {\n\t\t\t(<any>prm)._value = value\n\t\t\tprm.value = value\n\t\t\t}\n\t\telse {\n\t\t\tlet ctx = this.voices[0].synth.ac\n\t\t\tif (exponential) {\n\t\t\t\tprm.exponentialRampToValueAtTime(value, ctx.currentTime + rampTime)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprm.linearRampToValueAtTime(value, ctx.currentTime + rampTime)\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// ---------- Helpers ----------\n\nexport interface PresetData {\n\tname: string\n\tnodes: any[]\n\tnodeData: any[]\n\tmodulatorType: string\n}\n\nfunction getPreset(presets: Presets, preset: number | string | PresetData) {\n\tif (typeof preset == 'number') {\n\t\tlet maxPrst = presets.presets.length\n\t\tif (preset < 1 || preset > maxPrst)\n\t\t\tthrow new Error(`The preset number should be between 1 and ${maxPrst}`)\n\t\treturn presets.presets[preset - 1]\n\t}\n\telse if (typeof preset == 'string') {\n\t\tfor (let prs of presets.presets)\n\t\tif (prs.name == preset) return prs\n\t\tthrow new Error(`Preset \"${preset}\" does not exist`)\n\t}\n\treturn preset\n}\n\nfunction findNoteDuration(preset: any) {\n\tlet duration = 0\n\tfor (let node of preset.nodeData) {\n\t\tif (node.type == 'ADSR') {\n\t\t\tlet d = node.params.attack + node.params.decay\n\t\t\tif (d > duration)\n\t\t\t\tduration = d\n\t\t}\n\t}\n\tif (duration) duration += 0.01\n\treturn duration\n}\n\n\n// ------------------------- Wavetable instrument -------------------------\n\nclass WavetableInstrument implements LCInstrument {\n\tname: string\n\tduration: number\n\tpreset: object\n\tdestination: AudioNode\n\tenvelopes: any[] = []\n\n\tconstructor(public ctx: AudioContext, public presetName: string, name?: string) {\n\t\tthis.duration = 0\n\t\tif (name === undefined) name = presetName\n\t\tthis.name = name\n\t}\n\n\tasync initialize() {\n\t\tlog(`Loading instrument [log-instr|${this.name}]...`)\n\t\tthis.preset = await this.loadInstrument(this.presetName)\n\t\tlogInstrReady(this.name)\n\t}\n\n\tshutdown() {\n\t\twtPlayer.expireEnvelopes(this.ctx)\n\t}\n\n\tparam(pname: string, value?: number, rampTime?: number, exponential = true) {\n\t\t// TODO maybe provide ADSR\n\t\treturn this\n\t}\n\n\tparamNames() {\n\t\t// TODO implement\n\t\tlet pnames: string[] = []\n\t\treturn pnames\n\t}\n\n\tconnect(node: AudioNode) {\n\t\tthis.destination = node\n\t}\n\n\tnoteOn(midi: number, velocity: number, when?: number): void {\n\t\tif (when === undefined) when = this.ctx.currentTime\n\t\tlet envelope = wtPlayer.queueWaveTable(\n\t\t\tthis.ctx, this.destination, this.preset, when, midi, 9999, velocity\n\t\t)\n\t\tthis.envelopes[midi] = envelope\n\t}\n\n\tnoteOff(midi: number, velocity: number, when?: number): void {\n\t\tlet envelope = this.envelopes[midi]\n\t\tif (envelope) envelope.cancel(when)\n\t}\n\n\tprivate async adjustPreset(preset: object) {\n\t\treturn new Promise(resolve =>\n\t\t\twtPlayer.adjustPreset(this.ctx, preset, resolve)\n\t\t)\n\t}\n\n\tprivate async fetchPreset(name: string) {\n\t\tlet response = await fetch(this.getURL(name, '_sf2_file'))\n\t\tif (!response.ok)\n\t\t\tresponse = await fetch(this.getURL(name, '_sf2'))\n\t\tif (!response.ok) {\n\t\t\tlet msg = `wavetable preset '${name}' not found`\n\t\t\tlog('[log-bold|Error]: ' + msg)\n\t\t\tthrow new Error(msg)\n\t\t}\n\t\tlet data = await response.json()\n\t\treturn data\n\t}\n\n\tprivate async loadInstrument(name: string) {\n\t\tlet preset = await this.fetchPreset(name)\n\t\tawait this.adjustPreset(preset)\n\t\treturn preset\n\t}\n\n\tprivate getURL(name: string, suffix: string) {\n\t\t// The following files have both _sf2 and _sf2_file ending:\n\t\t// \t\t0280_LesPaul, 0290_LesPaul, 0291_LesPaul, 0292_LesPaul\n\t\t// \t\t0300_LesPaul, 0301_LesPaul, 0310_LesPaul\n\t\t// Therefore it is better to load them using their full name\n\t\tif (!name.endsWith('_sf2_file') && !name.endsWith('_sf2'))\n\t\t\tname += suffix\n\t\treturn `wavetables/${name}.json`\n\t}\n}\n\nlet wtPlayer = new WebAudioFontPlayer()\n\n\n// ------------------------- Samples -------------------------\n\ntype SampleTable = { [name: string]: AudioBuffer }\n\nlet samples: SampleTable = {}\nlet context = new AudioContext()\n\nexport function loadSamples(files: FileList) {\n\tfor (let i = 0; i < files.length; i++)\n\t\tloadSample(files[i])\n}\n\nasync function loadSample(file: File) {\n\tif (!file.type.startsWith('audio/'))\n\t\treturn log(`[log-bold|Error]: file ${file.name} is not an audio file`)\n\tlet fname = removeExtension(file.name)\n\tlog(`Loading sample [log-instr|${fname}]...`)\n\tlet data = await readSampleFile(file)\n\tlet buffer = await decodeSample(data)\n\tsamples[fname] = buffer\n\tlog(`Sample [log-instr|${fname}] ready`)\n}\n\nasync function readSampleFile(file: File) {\n\treturn new Promise<ArrayBuffer>(resolve => {\n\t\tlet reader = new FileReader()\n\t\treader.onload = (loadEvt: any) => resolve(loadEvt.target.result)\n\t\treader.readAsArrayBuffer(file)\n\t})\n}\n\nasync function decodeSample(data: ArrayBuffer) {\n\treturn new Promise<AudioBuffer>(resolve => {\n\t\tcontext.decodeAudioData(data, resolve)\n\t})\n}\n\nfunction removeExtension(fname: string) {\n\tlet pos = fname.lastIndexOf('.')\n\tif (pos <= 0) return fname\n\treturn fname.substr(0, pos)\n}\n\n\nclass SampleInstrument implements LCInstrument {\n\tname: string\n\tduration: number\n\tsrc: AudioBufferSourceNode\n\tbuffer: AudioBuffer\n\tdestination: AudioNode\n\tbaseNote = 69\n\tignoreNote = true\n\tloops = 1\n\tloopStart = 0\n\tloopEnd = 1000\n\n\tconstructor(public ctx: AudioContext, preset: string, name?: string) {\n\t\tthis.buffer = samples[preset]\n\t\tif (!this.buffer) throw new Error(`Sample '${preset}' not found`)\n\t\tthis.name = name || preset\n\t\tthis.duration = this.buffer.duration\n\t\tthis.loopEnd = this.duration\n\t}\n\n\tasync initialize() {\n\t\tlogInstrReady(this.name)\n\t}\n\n\tshutdown() {}\n\n\tparam(pname: string, value?: number,\n\t\trampTime?: number, exponential?: boolean): number | this {\n\t\tif (this.paramNames().indexOf(pname) < 0)\n\t\t\tthrow new Error(\n\t\t\t\t`Parameter '${pname}' not found in instrument '${this.name}'`)\n\t\tlet that: any = this\n\t\tif (value === undefined) return that[pname]\n\t\tthat[pname] = value\n\t\treturn this\n\t}\n\n\tparamNames() {\n\t\t// TODO 'attack' and 'release'\n\t\treturn ['baseNote', 'ignoreNote', 'loops', 'loopStart', 'loopEnd']\n\t}\n\n\tnoteOn(midi: number, velocity: number, when?: number) {\n\t\tlet bufferNode = this.ctx.createBufferSource()\n\t\tthis.src = bufferNode\n\t\tbufferNode.buffer = this.buffer\n\t\tlet dst = this.connectGain(velocity)\n\t\tbufferNode.connect(dst)\n\t\tlet ratio = this.ignoreNote ? 1 : this.midi2Ratio(midi)\n\t\tbufferNode.playbackRate.value = ratio\n\t\tthis.duration = this.buffer.duration / ratio\n\t\tthis.setupLooping(ratio)\n\t\tbufferNode.start(when)\n\t}\n\n\tnoteOff(midi: number, velocity: number, when?: number) {\n\t\tthis.src.stop(when)\n\t}\n\n\tconnect(node: AudioNode) {\n\t\tthis.destination = node\n\t}\n\n\tprivate midi2Ratio(midi: number): number {\n\t\tconst semitone = Math.pow(2, 1 / 12)\n\t\treturn Math.pow(semitone, midi - this.baseNote)\n\t}\n\n\tprivate connectGain(velocity: number) {\n\t\tlet dst = this.destination\n\t\tif (velocity == 1) return dst\n\t\tlet gain = this.ctx.createGain()\n\t\tgain.gain.value = velocity\n\t\tgain.connect(dst)\n\t\treturn gain\n\t}\n\n\tprivate setupLooping(ratio: number) {\n\t\tif (this.loops == 1) return\n\t\tthis.src.loop = true\n\t\tthis.src.loopStart = this.loopStart\n\t\tthis.src.loopEnd = this.loopEnd\n\t\tthis.duration = this.loopEnd + (this.loopEnd - this.loopStart) * (this.loops - 1)\n\t\tthis.duration = this.duration / ratio\n\t}\n\n\n}\n\n\n// ------------------------- Log helper -------------------------\n\nfunction log(txt: string) {\n\treturn logToPanel(true, true, txt2html(txt))\n}\n\nfunction logInstrReady(name: string) {\n\tlog(`Instrument [log-instr|${name}] ready`)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/instruments.ts","const NUM_BUFFERS = 8\nlet currentBuffer = 1\n\n\n// -------------------- Buffer navigation --------------------\n\nexport function handleBuffers(editor: any) {\n\thandleEditorStorage(editor)\n\tfor (let i = 1; i <= NUM_BUFFERS; i++)\n\t\tregisterButton(i, editor)\n\tselectSavedBuffer(editor)\n}\n\nexport function prevBuffer(editor: any) {\n\tlet num = currentBuffer - 1\n\tif (num < 1) num = NUM_BUFFERS\n\tbufferChanged(num, editor)\n}\n\nexport function nextBuffer(editor: any) {\n\tlet num = currentBuffer + 1\n\tif (num > NUM_BUFFERS) num = 1\n\tbufferChanged(num, editor)\n}\n\nfunction registerButton(id: number, editor: any) {\n\tgetButton$(id).click(_ => bufferChanged(id, editor))\n}\n\nfunction getButton$(id: number) {\n\treturn $('#walc-buffer-' + id)\n}\n\nfunction updateButtons(disableId: number, enableId: number) {\n\tgetButton$(disableId)\n\t\t.removeClass('btn-info')\n\t\t.addClass('btn-primary')\n\tgetButton$(enableId)\n\t\t.removeClass('btn-primary')\n\t\t.addClass('btn-info')\n}\n\nfunction bufferChanged(num: number, editor: any) {\n\tupdateButtons(currentBuffer, num)\n\tstoreBuffer(currentBuffer, editor)\n\tloadBuffer(num, editor)\n\tcurrentBuffer = num\n\tlocalStorage.setItem('code_buffer_selected', '' + currentBuffer)\n\teditor.focus()\n}\n\nfunction selectSavedBuffer(editor: any) {\n\tlet snum = localStorage.getItem('code_buffer_selected') || '1'\n\tlet num = parseInt(snum, 10)\n\tif (!isNaN(num))\n\t\tbufferChanged(num, editor)\n}\n\n// -------------------- Buffer storage management --------------------\n\nfunction handleEditorStorage(editor: any) {\n\tloadBuffer(currentBuffer, editor)\n\twatchCodeAndStoreIt(editor)\n}\n\nfunction watchCodeAndStoreIt(editor: any) {\n\tlet storedCode = getEditorText(editor)\n\tlet storedPos = editor.getPosition()\n\tsetInterval(() => {\n\t\tlet code = getEditorText(editor)\n\t\tlet pos = editor.getPosition()\n\t\tif (storedCode == code\n\t\t\t&& storedPos.lineNumber == pos.lineNumber\n\t\t\t&& storedPos.column == pos.column) return\n\t\tstoreBuffer(currentBuffer, editor)\n\t\tstoredCode = code\n\t\tstoredPos = pos\n\t}, 1000)\n}\n\n\n// -------------------- Helpers --------------------\n\nfunction storeBuffer(num: number, editor: any) {\n\tlet txt = getEditorText(editor)\n\tlocalStorage.setItem('code_buffer_' + num, txt)\n\tlet prefs = {\n\t\tfontSize: editor.getConfiguration().fontInfo.fontSize,\n\t\tposition: editor.getPosition()\n\t}\n\tlocalStorage.setItem('code_buffer_prefs_' + num, JSON.stringify(prefs))\n}\n\nfunction loadBuffer(num: number, editor: any) {\n\tlet code = localStorage.getItem('code_buffer_' + num) || ''\n\tsetEditorText(editor, code)\n\tlet sprefs = localStorage.getItem('code_buffer_prefs_' + num)\n\tif (sprefs) {\n\t\tlet prefs = JSON.parse(sprefs)\n\t\teditor.setPosition(prefs.position)\n\t\teditor.revealPositionInCenterIfOutsideViewport(prefs.position)\n\t\teditor.updateOptions({ fontSize: prefs.fontSize })\n\t}\n}\n\nfunction setEditorText(editor: any, text: string) {\n\teditor.getModel().setValue(text)\n}\n\nfunction getEditorText(editor: any): string {\n\treturn editor.getModel().getValue()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/editor-buffers.ts","declare function require(name: string): any\nconst seedrandom = require('seedrandom')\n\n\nexport let random = {\n\n\tseed(newSeed?: number): number {\n\t\tif (newSeed !== undefined)\n\t\t\tsetSeedNumber(newSeed)\n\t\treturn seedNumber\n\t},\n\n\tfloat(from: number, to?: number): number {\n\t\tif (to === undefined) return rng() * from\n\t\treturn from + rng() * (to - from)\n\t},\n\n\tinteger(from: number, to: number): number {\n\t\treturn from + Math.floor(rng() * (to - from + 1))\n\t},\n\n\tdice(sides: number): number {\n\t\treturn this.integer(1, sides)\n\t},\n\n\tone_in(times: number): boolean {\n\t\treturn this.dice(times) === 1\n\t},\n\n\tchoose(...args: any[]): any {\n\t\tlet arr: any[] = []\n\t\tfor (let a of args) arr = arr.concat(a)\n\t\treturn arr[this.dice(arr.length) - 1]\n\t}\n\n}\n\nlet seedNumber = 0\n\nlet rng: () => number\n\nfunction setSeedNumber(newSeed: number) {\n\tlet seed = (newSeed + 123456789).toString()\n\trng = seedrandom(seed)\n\tseedNumber = newSeed\n}\n\nsetSeedNumber(0)\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/random.ts","/**\n * Main entry point: setup synth editor and keyboard listener.\n */\nimport { SynthUI } from './synthUI/synthUI'\nimport { NoteInputs } from './piano/noteInputs'\nimport { Presets } from './synthUI/presets'\nimport { ModernWindow } from './utils/modern'\nimport { createEditor } from './live-coding/editor'\nimport { setupRoutes } from './utils/routes'\n\n\nlet graphCanvas: HTMLCanvasElement\nlet ac: AudioContext\nlet synthUI: SynthUI\n\nsetupRoutes('#synth').then(_ => {\n\tgraphCanvas = <HTMLCanvasElement>$('#graph-canvas')[0]\n\tac = createAudioContext()\n\tsynthUI = new SynthUI(ac, graphCanvas,\n\t\t$('#node-params'), $('#audio-graph-fft'), $('#audio-graph-osc'))\n\tsetupPanels()\n\t.then(editor => checkSearch(editor))\n})\n\nfunction createAudioContext(): AudioContext {\n\tconst CtxClass: any = window.AudioContext || window.webkitAudioContext\n\treturn new CtxClass()\n}\n\nfunction setupPanels() {\n\tsetupPalette()\n\tconst inputs = new NoteInputs(synthUI)\n\tconst prsts = new Presets(synthUI)\n\tprsts.beforeSave = (json) => $.extend(json, { keyboard: inputs.piano.toJSON() })\n\tprsts.afterLoad = (json) => inputs.piano.fromJSON(json.keyboard)\n\t$(function() {\n\t\t$('#synth').focus()\n\t})\n\t$(document).on('route:show', (e, h) => {\n\t\tif (h == '#synth') prsts.selectBestNode()\n\t})\n\treturn createEditor(ac, prsts, synthUI)\n}\n\nfunction setupPalette() {\n\t$(function() {\n\t\tlet nano: any = $('.nano')\n\t\tnano.nanoScroller({ preventPageScrolling: true })\n\t})\n}\n\nfunction checkSearch(editor: any) {\n\tif (!location.search || location.search.length <= 0\n\t\t|| ! location.search.startsWith('?')) return\n\tlet sdata = location.search.substr(1).split('&')\n\tlet result: any = {}\n\tfor (let param of sdata) {\n\t\tlet [k, v] = param.split('=')\n\t\tresult[k] = v\n\t}\n\tapplySearch(result, editor)\n}\n\nfunction applySearch(search: any, editor: any) {\n\tif (search.codeURL) fetchCode(search.codeURL, editor)\n}\n\nasync function fetchCode(url: string, editor: any) {\n\tlet r = await fetch(url)\n\tif (!r.ok) return\n\tlet code = await r.text()\n\tlocation.hash = '#live-coding'\n\tlet edtxt = editor.getModel().getValue() || ''\n\tif (edtxt.trim().length > 0 && !edtxt.trim().startsWith('/*'))\n\t\tedtxt = '\\n/*\\n' + edtxt + '\\n*/\\n'\n\teditor.getModel().setValue(code + edtxt)\n}\n\ndeclare var window: ModernWindow\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Graph, Node, GraphHandler } from './graph'\nimport { Synth, NodeData } from '../synth/synth'\nimport { ModernAudioNode, focusable } from '../utils/modern'\nimport * as popups from '../utils/popups'\n\n/**\n * Customizes the generic graph editor in order to manipulate and control\n * a graph of AudioNodes\n */\nexport class SynthUI {\n\tgr: Graph\n\tsynth: Synth\n\tnw: number\n\tnh: number\n\toutNode: ModernAudioNode\n\n\tconstructor(ac: AudioContext, graphCanvas: HTMLCanvasElement, jqParams: JQuery, jqFFT: JQuery, jqOsc: JQuery) {\n\t\tthis.gr = new Graph(graphCanvas)\n\t\tthis.gr.handler = new SynthGraphHandler(this, jqParams, jqFFT, jqOsc)\n\t\tthis.synth = new Synth(ac)\n\t\tthis.registerPaletteHandler()\n\t\tthis.addOutputNode()\n\t}\n\n\taddOutputNode() {\n\t\t// TODO avoid using hardcoded position\n\t\tconst out = new Node(500, 210, 'Out')\n\t\tout.data = new GraphNodeData(out)\n\t\tthis.synth.initOutputNodeData(out.data, this.synth.ac.destination)\n\t\tthis.outNode = out.data.anode\n\t\tthis.gr.addNode(out, 'node-out')\n\t\tthis.initNodeDimensions(out)\n\t}\n\n\tregisterPaletteHandler() {\n\t\tlet self = this\t// JQuery sets 'this' in event handlers\n\t\t$('.palette .node').click(function(evt) {\n\t\t\tlet elem = $(this)\n\t\t\tlet classAttr = elem.attr('class') || ''\n\t\t\tlet classes = classAttr.split(/\\s+/).filter(c => c != 'node')\n\t\t\tlet type = elem.attr('data-type')\n\t\t\tif (!type) return\n\t\t\tself.addNode(type,\n\t\t\t\telem.find('.node-text').html(), classes.join(' '))\n\t\t})\n\t}\n\n\taddNode(type: string, text: string, classes: string): void {\n\t\tlet { x, y } = this.findFreeSpot()\n\t\tconst n = new Node(x, y, text)\n\t\tthis.createNodeData(n, type)\n\t\tthis.gr.addNode(n, classes)\n\t\tthis.gr.selectNode(n)\n\t}\n\n\tremoveNode(n: Node): void {\n\t\tthis.gr.removeNode(n)\n\t}\n\n\tremoveNodeData(data: NodeData): void {\n\t\tthis.synth.removeNodeData(data)\n\t}\n\n\tcreateNodeData(n: Node, type: string): void {\n\t\tn.data = new GraphNodeData(n)\n\t\tif (type == 'out') {\n\t\t\tthis.synth.initOutputNodeData(n.data, this.synth.ac.destination)\n\t\t\tthis.outNode = n.data.anode\n\t\t}\n\t\telse\n\t\t\tthis.synth.initNodeData(n.data, type)\n\t}\n\n\t// ----- Rest of methods are used to find a free spot in the canvas -----\n\n\tfindFreeSpot() {\n\t\tlet maxDist = 0\n\t\tconst canvasW = this.gr.canvas.width\n\t\tconst canvasH = this.gr.canvas.height\n\t\tlet x = canvasW / 2\n\t\tlet y = canvasH / 2\n\t\tfor (let xx = 10; xx < canvasW - this.nw; xx += 10) {\n\t\t\tfor (let yy = 10; yy < canvasH - this.nh; yy += 10) {\n\t\t\t\tconst dist = this.dist2nearestNode(xx, yy)\n\t\t\t\tif (dist > maxDist && dist < this.nw * 3) {\n\t\t\t\t\tx = xx\n\t\t\t\t\ty = yy\n\t\t\t\t\tmaxDist = dist\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { x, y }\n\t}\n\n\tdist2nearestNode(x: number, y: number) {\n\t\tlet minDist = Number.MAX_VALUE\n\t\tfor (const n of this.gr.nodes) {\n\t\t\tconst dx = x - n.x\n\t\t\tconst dy = y - n.y\n\t\t\tconst dist = Math.sqrt(dx * dx + dy * dy)\n\t\t\tif (dist < minDist) minDist = dist\n\t\t}\n\t\treturn minDist\n\t}\n\n\tinitNodeDimensions(n: Node) {\n\t\tthis.nw = n.element.outerWidth() || 0\n\t\tthis.nh = n.element.outerHeight() || 0\n\t}\n\n}\n\n\n// -------------------- Privates --------------------\n\nimport { NodeDef } from '../synth/palette'\nimport { renderParams } from './paramsUI'\nimport { AudioAnalyzer } from './analyzer'\n\n\nclass GraphNodeData extends NodeData {\n\tnode: Node\n\tconstructor(node: Node) {\n\t\tsuper()\n\t\tthis.node = node\n\t}\n\tgetInputs(): NodeData[] {\n\t\tconst result: NodeData[] = []\n\t\tfor (const nin of this.node.inputs)\n\t\t\tresult.push(nin.data)\n\t\treturn result\n\t}\n}\n\nclass SynthGraphHandler implements GraphHandler {\n\n\tsynthUI: SynthUI\n\tjqParams: JQuery\n\tarrowColor: string\n\tctrlArrowColor: string\n\tanalyzer: AudioAnalyzer\n\n\tconstructor(synthUI: SynthUI, jqParams: JQuery, jqFFT: JQuery, jqOsc: JQuery) {\n\t\tthis.synthUI = synthUI\n\t\tthis.jqParams = jqParams\n\t\tthis.arrowColor = getCssFromClass('arrow', 'color')\n\t\tthis.ctrlArrowColor = getCssFromClass('arrow-ctrl', 'color')\n\t\tthis.registerNodeDelete(jqParams.parent()[0])\n\t\tthis.analyzer = new AudioAnalyzer(jqFFT, jqOsc)\n\t}\n\n\tregisterNodeDelete(elem: HTMLElement) {\n\t\t$(focusable(elem)).keydown((evt: any) => {\n\t\t\tif (!(evt.keyCode == 46 || (evt.keyCode == 8 && evt.metaKey))) return\n\t\t\tif (popups.isOpen) return\n\t\t\tconst selectedNode = this.getSelectedNode()\n\t\t\tif (!selectedNode) return\n\t\t\tif (selectedNode.data.isOut) return\n\t\t\tpopups.confirm('Delete node?',\n\t\t\t\t'Please confirm node deletion', confirmed => {\n\t\t\t\tif (!confirmed) return\n\t\t\t\tthis.synthUI.removeNode(selectedNode)\n\t\t\t\tthis.jqParams.empty()\n\t\t\t})\n\t\t})\n\t}\n\n\tgetSelectedNode(): Node | null {\n\t\tfor (const node of this.synthUI.gr.nodes)\n\t\t\tif (node.element.hasClass('selected')) return node\n\t\treturn null\n\t}\n\n\thasAudioParams(ndata: NodeData) {\n\t\tconst aparams = Object.keys(ndata.nodeDef.params)\n\t\t\t.filter(pname => (<any>ndata).anode[pname] instanceof AudioParam)\n\t\treturn aparams.length > 0\n\t}\n\n\t// --------------- Implementation of the GraphHandler interface ---------------\n\tcanBeSource(n: Node): boolean {\n\t\tconst data: NodeData = n.data\n\t\treturn data.anode != this.synthUI.outNode\n\t}\n\n\tcanConnect(src: Node, dst: Node): boolean {\n\t\tconst srcData: NodeData = src.data\n\t\tconst dstData: NodeData = dst.data\n\t\tif (srcData.nodeDef.control)\n\t\t\treturn this.hasAudioParams(dstData)\n\t\treturn dstData.anode.numberOfInputs > 0\n\t}\n\n\tconnected(src: Node, dst: Node): void {\n\t\tthis.synthUI.synth.connectNodes(src.data, dst.data)\n\t\t// TODO update paramsUI in case selected node is src\n\t}\n\n\tdisconnected(src: Node, dst: Node): void {\n\t\tthis.synthUI.synth.disconnectNodes(src.data, dst.data)\n\t}\n\n\tnodeSelected(n: Node): void {\n\t\tconst data: NodeData = n.data\n\t\trenderParams(data, this.jqParams)\n\t}\n\n\tnodeRemoved(n: Node) {\n\t\tthis.synthUI.removeNodeData(n.data)\n\t}\n\n\tgetArrowColor(src: Node, dst: Node): string {\n\t\tconst srcData: NodeData = src.data\n\t\treturn srcData.nodeDef.control ? this.ctrlArrowColor : this.arrowColor\n\t}\n\n\tdata2json(n: Node): any {\n\t\treturn this.synthUI.synth.nodeData2json(n.data)\n\t}\n\n\tjson2data(n: Node, json: any): void {\n\t\tthis.synthUI.createNodeData(n, json.type)\n\t\tthis.synthUI.synth.json2NodeData(json, n.data)\n\t}\n\n\tgraphLoaded() {\n\t\tthis.analyzer.analyze(this.synthUI.outNode)\n\t}\n\n\tgraphSaved() {}\n}\n\n\nfunction getCssFromClass(className: string, propName: string) {\n\tconst tmp = $('<div>').addClass(className)\n\t$('body').append(tmp)\n\tconst propValue = tmp.css(propName)\n\ttmp.remove()\n\treturn propValue\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synthUI/synthUI.ts","const SHIFT_KEY = 16\nconst CAPS_LOCK = 20\n\n/**\n * A generic directed graph editor.\n */\nexport class Graph {\n\n\tnodeCanvas: JQuery\n\tcanvas: HTMLCanvasElement\n\tnodes: Node[] = []\n\tgraphDraw: GraphDraw\n\tgraphInteract: GraphInteraction\n\thandler: GraphHandler\n\tlastId = 0\n\n\tconstructor(canvas: HTMLCanvasElement) {\n\t\tif (!canvas.parentElement) return\n\t\tthis.nodeCanvas = $(canvas.parentElement)\n\t\tthis.canvas = canvas\n\t\tconst gc = canvas.getContext('2d')\n\t\tif (!gc) return\n\t\tthis.graphDraw = new GraphDraw(this, gc, canvas)\n\t\tthis.graphInteract = new GraphInteraction(this, gc)\n\t\tthis.handler = new DefaultGraphHandler()\n\t}\n\n\taddNode(n: Node, classes?: string) {\n\t\tn.id = this.lastId++\n\t\tn.element = $('<div>')\n\t\t\t.addClass('node')\n\t\t\t.html(`<div class=\"node-text\">${n.name}</div>`)\n\t\t\t.css({ left: n.x, top: n.y, cursor: 'default' })\n\t\tif (classes) n.element.addClass(classes)\n\t\tthis.nodeCanvas.append(n.element)\n\t\tthis.nodes.push(n)\n\t\tthis.graphInteract.registerNode(n)\n\t\tthis.draw()\n\t}\n\n\tremoveNode(n: Node): void {\n\t\tconst pos = this.nodes.indexOf(n)\n\t\tif (pos < 0)\n\t\t\treturn console.warn(`Node '${n.name}' is not a member of graph`)\n\t\tfor (const nn of this.nodes) {\n\t\t\tif (n == nn) continue\n\t\t\tthis.disconnect(n, nn)\n\t\t\tthis.disconnect(nn, n)\n\t\t}\n\t\tthis.nodes.splice(pos, 1)\n\t\tn.element.remove()\n\t\tthis.handler.nodeRemoved(n)\n\t\tthis.draw()\n\t}\n\n\tselectNode(n: Node) {\n\t\tthis.graphInteract.selectNode(n)\n\t}\n\n\tconnect(srcn: Node, dstn: Node): boolean {\n\t\tif (!this.handler.canBeSource(srcn) || !this.handler.canConnect(srcn, dstn))\n\t\t\treturn false\n\t\tdstn.addInput(srcn)\n\t\tthis.handler.connected(srcn, dstn)\n\t\treturn true\n\t}\n\n\tdisconnect(srcn: Node, dstn: Node): boolean {\n\t\tif (!dstn.removeInput(srcn)) return false\n\t\tthis.handler.disconnected(srcn, dstn)\n\t\treturn true\n\t}\n\n\tdraw() {\n\t\tthis.graphDraw.draw()\n\t}\n\n\ttoJSON(): any {\n\t\tconst jsonNodes = []\n\t\tconst jsonNodeData = []\n\t\tfor (const node of this.nodes) {\n\t\t\tconst nodeInputs = []\n\t\t\tfor (const nin of node.inputs)\n\t\t\t\tnodeInputs.push(nin.id)\n\t\t\tjsonNodes.push({\n\t\t\t\tid: node.id,\n\t\t\t\tx: node.x,\n\t\t\t\ty: node.y,\n\t\t\t\tname: node.name,\n\t\t\t\tinputs: nodeInputs,\n\t\t\t\tclasses: this.getAppClasses(node)\n\t\t\t})\n\t\t\tjsonNodeData.push(this.handler.data2json(node))\n\t\t}\n\t\tconst jsonGraph = {\n\t\t\tnodes: jsonNodes,\n\t\t\tnodeData: jsonNodeData\n\t\t}\n\t\tthis.handler.graphSaved()\n\t\treturn jsonGraph\n\t}\n\n\tfromJSON(json: any) {\n\t\t// First, remove existing nodes\n\t\twhile (this.nodes.length > 0)\n\t\t\tthis.removeNode(this.nodes[0])\n\t\tthis.lastId = 0\n\t\t// Then add nodes\n\t\tfor (const jn of json.nodes) {\n\t\t\tconst node = new Node(jn.x, jn.y, jn.name)\n\t\t\tthis.addNode(node)\n\t\t\tnode.id = jn.id\t// Override id after being initialized inside addNode\n\t\t\tnode.element.attr('class', jn.classes)\n\t\t}\n\t\t// Then connect them\n\t\tconst gh = this.handler\n\t\tthis.handler = new DefaultGraphHandler()\t// Disable graph handler\n\t\tfor (let i = 0; i < json.nodes.length; i++) {\n\t\t\tfor (const inum of json.nodes[i].inputs) {\n\t\t\t\tconst src = this.nodeById(inum)\n\t\t\t\tif (src) this.connect(src, this.nodes[i])\n\t\t\t}\n\t\t}\n\t\tthis.handler = gh\t// Restore graph handler\n\t\t// Then set their data\n\t\tfor (let i = 0; i < json.nodes.length; i++) {\n\t\t\tthis.handler.json2data(this.nodes[i], json.nodeData[i])\n\t\t}\n\t\t// Then notify connections to handler\n\t\tfor (const dst of this.nodes)\n\t\t\tfor (const src of dst.inputs)\n\t\t\t\tthis.handler.connected(src, dst)\n\t\t// And finally, draw the new graph\n\t\tthis.draw()\n\t\tthis.handler.graphLoaded()\n\t}\n\n\tnodeById(id: number): Node | null {\n\t\tfor (const node of this.nodes)\n\t\t\tif (node.id === id) return node\n\t\treturn null\n\t}\n\n\tgetAppClasses(n: Node): string {\n\t\tconst classes = n.element[0].className.split(/\\s+/)\n\t\tconst result = []\n\t\tfor (const cname of classes) {\n\t\t\tif (cname == 'selected') continue\n\t\t\tif (cname.substr(0, 3) == 'ui-') continue\n\t\t\tresult.push(cname)\n\t\t}\n\t\treturn result.join(' ')\n\t}\n}\n\n/**\n * A node in the graph. Application-specific data can be attached\n * to its data property.\n */\nexport class Node {\n\tid: number\n\tx: number\n\ty: number\n\tname: string\n\tinputs: Node[] = []\n\telement: JQuery\n\tw: number\n\th: number\n\tdata: any\n\n\tconstructor(x: number, y: number, name: string) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.name = name.replace(/<[^<]*>/g, t => t == '<br>' ? t : '')\n\t}\n\n\taddInput(n: Node) {\n\t\tthis.inputs.push(n)\n\t}\n\n\tremoveInput(n: Node): boolean {\n\t\tconst pos: number = this.inputs.indexOf(n)\n\t\tif (pos < 0) return false\n\t\tthis.inputs.splice(pos, 1)\n\t\treturn true\n\t}\n\n}\n\n/**\n * A set of callbacks to be implemented by the application in order\n * to customize the graph editor and add application-specific behavior.\n */\nexport interface GraphHandler {\n\tcanBeSource(n: Node): boolean\n\tcanConnect(src: Node, dst: Node): boolean\n\tconnected(src: Node, dst: Node): void\n\tdisconnected(src: Node, dst: Node): void\n\tnodeSelected(n: Node): void\n\tnodeRemoved(n: Node): void\n\tgetArrowColor(src: Node, dst: Node): string\n\tdata2json(n: Node): any\n\tjson2data(n: Node, json: any): void\n\tgraphLoaded(): void\n\tgraphSaved(): void\n}\n\n\n// ------------------------- Privates -------------------------\n\n/** Default, do-nothing GraphHandler implementation */\nclass DefaultGraphHandler implements GraphHandler {\n\tcanBeSource(n: Node): boolean { return true }\n\tcanConnect(src: Node, dst: Node): boolean { return true }\n\tconnected(src: Node, dst: Node): void {}\n\tdisconnected(src: Node, dst: Node): void {}\n\tnodeSelected(n: Node): void {}\n\tnodeRemoved(n: Node): void {}\n\tgetArrowColor(src: Node, dst: Node): string { return 'black' }\n\tdata2json(n: Node): any { return {} }\n\tjson2data(n: Node, json: any): void {}\n\tgraphLoaded(): void {}\n\tgraphSaved(): void {}\n}\n\n/**\n * Handles all UI interaction with graph in order to move, select, connect\n * and disconnect nodes.\n */\nexport class GraphInteraction {\n\n\tgraph: Graph\n\tgc: CanvasRenderingContext2D\n\tdragging = false\n\tselectedNode: Node\n\n\tconstructor(graph: Graph, gc: CanvasRenderingContext2D) {\n\t\tthis.graph = graph\n\t\tthis.gc = gc\n\t\tthis.setupConnectHandler(gc.canvas)\n\t}\n\n\tregisterNode(n: Node) {\n\t\t(<any>n.element).draggable({\n\t\t\tcontainment: 'parent',\n\t\t\tdistance: 5,\n\t\t\tstack: '.node',\n\t\t\tdrag: (event: Event, ui: any) => {\n\t\t\t\tn.x = ui.position.left\n\t\t\t\tn.y = ui.position.top\n\t\t\t\tthis.graph.draw()\n\t\t\t},\n\t\t\tstart: (event: Event, ui: any) => {\n\t\t\t\tthis.dragging = true\n\t\t\t\tui.helper.css('cursor', 'move')\n\t\t\t},\n\t\t\tstop: (event: Event, ui: any) => {\n\t\t\t\tui.helper.css('cursor', 'default')\n\t\t\t\tthis.dragging = false\n\t\t\t}\n\t\t})\n\t\tn.element.click(_ => {\n\t\t\tif (this.dragging) return\n\t\t\tif (this.selectedNode == n) return\n\t\t\tthis.selectNode(n)\n\t\t})\n\t}\n\n\tselectNode(n: Node): void {\n\t\tif (this.selectedNode)\n\t\t\tthis.selectedNode.element.removeClass('selected')\n\t\tn.element.addClass('selected')\n\t\tthis.selectedNode = n\n\t\tthis.graph.handler.nodeSelected(n)\n\t}\n\n\tsetupConnectHandler(elem: HTMLElement | null) {\n\t\tif (!elem) return\n\t\tlet srcn: Node | null\n\t\tlet connecting = false\n\t\twhile (elem != null && elem.tabIndex < 0\n\t\t\t&& elem.nodeName.toLowerCase() != 'body')\n\t\t\telem = elem.parentElement\n\t\tif (!elem) return\n\t\t$(elem).keydown(evt => {\n\t\t\tif (evt.keyCode == CAPS_LOCK) return this.setGrid([20, 20])\n\t\t\tif (evt.keyCode != SHIFT_KEY || connecting) return\n\t\t\tsrcn = this.getNodeFromDOM(this.getElementUnderMouse())\n\t\t\tif (!srcn) return\n\t\t\tif (!this.graph.handler.canBeSource(srcn)) {\n\t\t\t\tsrcn.element.css('cursor', 'not-allowed')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconnecting = true\n\t\t\tthis.registerRubberBanding(srcn)\n\t\t})\n\t\t.keyup(evt => {\n\t\t\tif (evt.keyCode == CAPS_LOCK) return this.setGrid(null)\n\t\t\tif (evt.keyCode != SHIFT_KEY) return\n\t\t\tconnecting = false\n\t\t\tthis.deregisterRubberBanding()\n\t\t\tconst dstn = this.getNodeFromDOM(this.getElementUnderMouse())\n\t\t\tif (!dstn || srcn == dstn) return\n\t\t\tif (srcn) this.connectOrDisconnect(srcn, dstn)\n\t\t\tthis.graph.draw()\n\t\t})\n\t}\n\n\tsetGrid(grid: any): void {\n\t\t$(this.graph.nodeCanvas).find('.node').draggable( 'option', 'grid', grid)\n\t}\n\n\tconnectOrDisconnect(srcn: Node, dstn: Node) {\n\t\tif (this.graph.disconnect(srcn, dstn)) return\n\t\telse this.graph.connect(srcn, dstn)\n\t}\n\n\tgetElementUnderMouse(): JQuery | null {\n\t\tconst hovered = $(':hover')\n\t\tif (hovered.length <= 0) return null\n\t\tconst jqNode = $(hovered.get(hovered.length - 1))\n\t\tif (jqNode.hasClass('node')) return jqNode\n\t\tif (jqNode.parent().hasClass('node')) return jqNode.parent()\n\t\treturn null\n\t}\n\n\tregisterRubberBanding(srcn: Node) {\n\t\tconst ofs = this.graph.nodeCanvas.offset()\n\t\tif (!ofs) return\n\t\tconst dstn = new Node(0, 0, '')\n\t\tdstn.w = 0\n\t\tdstn.h = 0\n\t\t$(this.graph.nodeCanvas).on('mousemove', evt => {\n\t\t\tif (!evt) return\n\t\t\tlet cltx = evt.clientX || 0\n\t\t\tlet clty = evt.clientY || 0\n\t\t\tdstn.x = cltx - ofs.left\n\t\t\tlet scrollTop = (<any>document).scrollingElement.scrollTop\n\t\t\tdstn.y = clty - ofs.top + scrollTop\n\t\t\tthis.graph.draw()\n\t\t\tthis.gc.save()\n\t\t\tthis.gc.setLineDash([10])\n\t\t\tthis.graph.graphDraw.drawArrow(srcn, dstn)\n\t\t\tthis.gc.restore()\n\t\t})\n\t\t// Setup cursors\n\t\tthis.graph.nodeCanvas.css('cursor', 'crosshair')\n\t\tthis.graph.nodeCanvas.find('.node').css('cursor', 'crosshair')\n\t\tfor (const n of this.graph.nodes)\n\t\t\tif (n != srcn && !this.graph.handler.canConnect(srcn, n))\n\t\t\t\tn.element.css('cursor', 'not-allowed')\n\t}\n\n\tderegisterRubberBanding() {\n\t\tthis.graph.nodeCanvas.css('cursor', '')\n\t\tthis.graph.nodeCanvas.find('.node').css('cursor', 'default')\n\t\tthis.graph.nodeCanvas.off('mousemove')\n\t\tthis.graph.graphDraw.draw()\n\t}\n\n\tgetNodeFromDOM(jqNode: JQuery | null) {\n\t\tif (!jqNode) return null\n\t\tfor (const n of this.graph.nodes)\n\t\t\tif (n.element[0] == jqNode[0]) return n\n\t\treturn null\n\t}\n}\n\n\nexport interface Point {\n\tx: number,\n\ty: number\n}\n\n\n/**\n * Handles graph drawing by rendering arrows in a canvas.\n */\nexport class GraphDraw {\n\n\tgraph: Graph\n\tgc: CanvasRenderingContext2D\n\tcanvas: HTMLCanvasElement\n\tarrowHeadLen = 10\n\tnodes: Node[]\n\n\tconstructor(graph: Graph, gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement) {\n\t\tthis.graph = graph\n\t\tthis.gc = gc\n\t\tthis.canvas = canvas\n\t\tthis.nodes = graph.nodes\n\t}\n\n\tdraw() {\n\t\tthis.clearCanvas()\n\t\tthis.gc.lineWidth = 2\n\t\tfor (const ndst of this.nodes)\n\t\t\tfor (const nsrc of ndst.inputs)\n\t\t\t\tthis.drawArrow(nsrc, ndst)\n\t}\n\n\tclearCanvas() {\n\t\tthis.gc.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\t}\n\n\tdrawArrow(srcNode: Node, dstNode: Node) {\n\t\tconst srcPoint = this.getNodeCenter(srcNode)\n\t\tconst dstPoint = this.getNodeCenter(dstNode)\n\t\tthis.gc.strokeStyle = this.graph.handler.getArrowColor(srcNode, dstNode)\n\t\tthis.gc.beginPath()\n\t\tthis.gc.moveTo(srcPoint.x, srcPoint.y)\n\t\tthis.gc.lineTo(dstPoint.x, dstPoint.y)\n\t\tthis.drawArrowTip(srcPoint, dstPoint)\n\t\tthis.gc.closePath()\n\t\tthis.gc.stroke()\n\t}\n\n\tdrawArrowTip(src: Point, dst: Point) {\n\t\tconst posCoef = 0.6\n\t\tconst mx = src.x + (dst.x - src.x) * posCoef\n\t\tconst my = src.y + (dst.y - src.y) * posCoef\n\t\tlet angle = Math.atan2(dst.y - src.y, dst.x - src.x)\n\t\tthis.gc.moveTo(mx, my)\n\t\tthis.gc.lineTo(\n\t\t\tmx - this.arrowHeadLen * Math.cos(angle - Math.PI / 6),\n\t\t\tmy - this.arrowHeadLen * Math.sin(angle - Math.PI / 6)\n\t\t)\n\t\tthis.gc.moveTo(mx, my)\n\t\tthis.gc.lineTo(\n\t\t\tmx - this.arrowHeadLen * Math.cos(angle + Math.PI / 6),\n\t\t\tmy - this.arrowHeadLen * Math.sin(angle + Math.PI / 6)\n\t\t)\n\t}\n\n\tgetNodeCenter(n: Node): Point {\n\t\tn.w = n.w !== undefined ? n.w : n.element.outerWidth() || 0\n\t\tn.h = n.h !== undefined ? n.h : n.element.outerHeight() || 0\n\t\treturn { x: n.x + n.w / 2, y: n.y + n.h / 2 }\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synthUI/graph.ts","import { Node } from './graph'\nimport { NodeData } from '../synth/synth'\nimport { NodeDef, NodeParamDef } from '../synth/palette'\nimport { log2linear, linear2log } from '../utils/modern'\nimport * as file from '../utils/file'\nimport * as popups from '../utils/popups'\n\n/**\n * Renders the UI controls associated with the parameters of a given node\n */\nexport function renderParams(ndata: NodeData, panel: JQuery): void {\n\tpanel.empty()\n\tconst boxes: JQuery[] = []\n\tif (ndata.nodeDef.control && ndata.controlParams) {\n\t\tlet box = renderParamControl(ndata, panel)\n\t\tif (box) boxes.push(box)\n\t}\n\tconst params = Object.keys(ndata.nodeDef.params || {})\n\tif (params.length <= 0) return\n\tfor (const param of params)\n\t\tif ((<any>ndata.anode)[param] instanceof AudioParam) {\n\t\t\tboxes.push(renderAudioParam(ndata.anode, ndata.nodeDef, param, panel))\n\t\t}\n\t\telse {\n\t\t\tlet box = renderOtherParam(ndata.anode, ndata.nodeDef, param, panel)\n\t\t\tif (box) boxes.push(box)\n\t\t}\n\tpositionBoxes(panel, boxes)\n}\n\n\nfunction positionBoxes(panel: JQuery, boxes: JQuery[]) {\n\tif (boxes.length < 1) return\n\tconst pw = panel.width() || 0\n\tconst bw = boxes[0].width() || 0\n\tconst sep = (pw - boxes.length * bw) / (boxes.length + 1)\n\tlet x = sep\n\tfor (const box of boxes) {\n\t\tbox.css({\n\t\t\tposition: 'relative',\n\t\t\tleft: x\n\t\t})\n\t\tx += sep\n\t}\n}\n\nfunction renderAudioParam(anode: AudioNode, ndef: NodeDef, param: string, panel: JQuery): JQuery {\n\tconst pdef: NodeParamDef = ndef.params[param]\n\tconst aparam: any = (<any>anode)[param]\n\tif (aparam['_value']) aparam.value = aparam['_value']\n\treturn renderSlider(panel, pdef, param, aparam.value, value => {\n\t\taparam.value = value\n\t\taparam['_value'] = value\n\t})\n}\n\nfunction renderParamControl(ndata: NodeData, panel: JQuery): JQuery | null {\n\tif (!ndata.controlParams) return null\n\tconst combo = renderCombo(panel, ndata.controlParams, ndata.controlParam, 'Controlling')\n\tcombo.change(_ => {\n\t\tif (ndata.controlParam)\n\t\t\tndata.anode.disconnect((<any>ndata.controlTarget)[ndata.controlParam])\n\t\tndata.controlParam = '' + combo.val()\n\t\tndata.anode.connect((<any>ndata.controlTarget)[ndata.controlParam])\n\t})\n\treturn combo.parent()\n}\n\nconst customRenderMethods = {\n\trenderBufferData,\n\trenderSoundBank\n}\n\nfunction renderOtherParam(anode: any, ndef: NodeDef,\n\tparam: string, panel: JQuery): JQuery | null {\n\tconst pdef: NodeParamDef = ndef.params[param]\n\tif (pdef.choices) {\n\t\tconst combo = renderCombo(panel, pdef.choices, anode[param], ucfirst(param))\n\t\tcombo.change(_ => {\n\t\t\tanode[param] = combo.val()\n\t\t})\n\t\treturn combo.parent()\n\t}\n\telse if (pdef.min != undefined)\n\t\treturn renderSlider(panel, pdef, param, anode[param], value => anode[param] = value)\n\telse if (typeof pdef.initial == 'boolean')\n\t\treturn renderBoolean(panel, pdef, param, anode, ucfirst(param))\n\telse if (pdef.phandler)\n\t\treturn (<any>customRenderMethods)[pdef.phandler.uiRender](panel, pdef, anode, param, ucfirst(param))\n\treturn null\n}\n\n\nfunction renderSlider(panel: JQuery, pdef: NodeParamDef,\n\tparam: string, value: number, setValue: (value: number) => void): JQuery {\n\tconst sliderBox = $('<div class=\"slider-box\">')\n\tconst slider = $('<input type=\"range\" orient=\"vertical\">')\n\t\t.attr('min', 0)\n\t\t.attr('max', 1)\n\t\t.attr('step', 0.001)\n\t\t.attr('value', param2slider(value, pdef))\n\tconst numInput = $('<input type=\"number\">')\n\t\t.attr('min', pdef.min || 0)\n\t\t.attr('max', pdef.max || 1)\n\t\t.attr('value', truncateFloat(value, 5))\n\tsliderBox.append(numInput)\n\tsliderBox.append(slider)\n\tsliderBox.append($('<span><br/>' + ucfirst(param) + '</span>'))\n\tpanel.append(sliderBox)\n\tslider.on('input', _ => {\n\t\tconst v = slider2param(parseFloat('' + slider.val()), pdef)\n\t\tnumInput.val(truncateFloat(v, 5))\n\t\tsetValue(v)\n\t})\n\tnumInput.on('input', _ => {\n\t\tconst v = parseFloat('' + numInput.val())\n\t\tif (isNaN(v)) return\n\t\tslider.val(param2slider(v, pdef))\n\t\tsetValue(v)\n\t})\n\treturn sliderBox\n}\n\nfunction renderCombo(panel: JQuery, choices: string[], selected: string, label: string): JQuery {\n\tconst choiceBox = $('<div class=\"choice-box\">')\n\tconst combo = $('<select>').attr('size', choices.length || 2)\n\tfor (const choice of choices) {\n\t\tconst option = $('<option>').text(choice)\n\t\tif (choice == selected) option.attr('selected', 'selected')\n\t\tcombo.append(option)\n\t}\n\tchoiceBox.append(combo)\n\tcombo.after('<br/><br/>' + label)\n\tpanel.append(choiceBox)\n\treturn combo\n}\n\nfunction renderBoolean(panel: JQuery, pdef: NodeParamDef, param: string,\n\tanode: any, label: string): JQuery {\n\tconst box = $('<div class=\"choice-box\">')\n\tconst button = $('<button class=\"btn btn-info\" data-toggle=\"button\" aria-pressed=\"false\">')\n\tbox.append(button)\n\tbutton.after('<br/><br/>' + label)\n\tpanel.append(box)\n\tif (anode[param]) {\n\t\tbutton.text('Enabled')\n\t\tbutton.addClass('active')\n\t\tbutton.attr('aria-pressed', 'true')\n\t}\n\telse {\n\t\tbutton.text('Disabled')\n\t\tbutton.removeClass('active')\n\t\tbutton.attr('aria-pressed', 'false')\n\t}\n\tbutton.click(_ => {\n\t\tanode[param] = !anode[param]\n\t\tbutton.text(anode[param] ? 'Enabled' : 'Disabled')\n\t})\n\treturn box\n}\n\n\nfunction param2slider(paramValue: number, pdef: NodeParamDef): number {\n\tlet min = pdef.min || 0\n\tlet max = pdef.max || 1\n\tif (pdef.linear)\n\t\treturn (paramValue - min) / (max - min)\n\telse\n\t\treturn linear2log(paramValue, min, max)\n}\n\nfunction slider2param(sliderValue: number, pdef: NodeParamDef): number {\n\tlet min = pdef.min || 0\n\tlet max = pdef.max || 1\n\tif (pdef.linear)\n\t\treturn min + sliderValue * (max - min)\n\telse\n\t\treturn log2linear(sliderValue, min, max)\n}\n\n\n// -------------------- Custom parameter rendering --------------------\n\nfunction renderBufferData(panel: JQuery, pdef: NodeParamDef,\n\tanode: any, param: string, label: string): JQuery {\n\tconst box = $('<div class=\"choice-box\">')\n\tconst button = $(`\n\t\t<span class=\"btn btn-primary upload\">\n\t\t\t<input type=\"file\">\n\t\t\tLoad&nbsp;\n\t\t\t<span class=\"glyphicon glyphicon-open\" aria-hidden=\"true\"></span>\n\t\t</span>`)\n\tbox.append(button)\n\tbutton.after('<br/><br/>' + label)\n\tpanel.append(box)\n\tlet loading = true\n\tbutton.find('input').change(evt => {\n\t\t// Trigger asynchronous upload & decode\n\t\tfile.uploadArrayBuffer(evt, soundFile => {\n\t\t\tanode['_encoded'] = soundFile\n\t\t\tanode.context.decodeAudioData(soundFile, (buffer: any) => {\n\t\t\t\tanode['_buffer'] = buffer\n\t\t\t\tloading = false\n\t\t\t\t// TODO capture errors and report them with popups.alert\n\t\t\t\tpopups.close()\n\t\t\t})\n\t\t})\n\t\t// Open progress popup\n\t\tsetTimeout(_ => {\n\t\t\tif (loading)\n\t\t\t\tpopups.progress('Loading and decoding audio data...')\n\t\t}, 300)\n\t})\n\treturn box\n}\n\nfunction setComboOptions(combo: JQuery, names: string[]) {\n\tcombo.empty()\n\tfor (const name of names)\n\t\tcombo.append('<option>' + name + '</option>')\n}\n\nfunction renderSoundBank(panel: JQuery, pdef: NodeParamDef,\n\tanode: any, param: string, label: string): JQuery {\n\tconst combo = renderCombo(panel, [], '', 'Buffers')\n\tcombo.css({\n\t\tmarginBottom: '10px', marginLeft: '-20px',\n\t\twidth: '140px', height: '100px',\n\t\toverflowX: 'auto'\n\t})\n\tconst buttons = $(`<div style=\"margin-bottom: -24px\">\n\t\t<span class=\"btn btn-primary upload\">\n\t\t\t<input type=\"file\">\n\t\t\t<span class=\"glyphicon glyphicon-open\" aria-hidden=\"true\"></span>\n\t\t</span>\n\t\t&nbsp;&nbsp;&nbsp;\n\t\t<span class=\"btn btn-danger\">\n\t\t\t<span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span>\n\t\t</span></div>`)\n\tcombo.after(buttons)\n\tconst bufs = anode['_buffers']\n\tconst encs = anode['_encodedBuffers']\n\tconst names = anode['_names']\n\tsetComboOptions(combo, names)\n\tbuttons.find('input').change(evt => {\n\t\t// Trigger asynchronous upload & decode\n\t\tfile.uploadArrayBuffer(evt, (fileData, f) => {\n\t\t\tencs.push(fileData)\n\t\t\tanode.context.decodeAudioData(fileData,\n\t\t\t\t(buffer: any) => bufs.push(buffer))\n\t\t\tnames.push(f.name)\n\t\t\tsetComboOptions(combo, names)\n\t\t})\n\t})\n\tbuttons.find('.btn-danger').click(_ => {\n\t\tconst idx = names.indexOf(combo.val())\n\t\tif (idx < 0) return\n\t\t[encs, bufs, names].forEach(a => a.splice(idx, 1))\n\t\tsetComboOptions(combo, names)\n\t})\n\treturn combo.parent()\n}\n\n// -------------------- Misc utilities --------------------\n\nfunction ucfirst(str: string) {\n\treturn str[0].toUpperCase() + str.substring(1)\n}\n\nfunction truncateFloat(f: number, len: number): string {\n\tlet s: string = '' + f\n\ts = s.substr(0, len)\n\tif (s[s.length - 1] == '.') return s.substr(0, len - 1)\n\telse return s\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synthUI/paramsUI.ts","import { Keyboard } from './keyboard'\nimport { MidiKeyboard } from './midi'\nimport { PianoKeyboard } from './piano'\nimport { Arpeggiator } from './arpeggiator'\n\nimport { NodeData } from '../synth/synth'\nimport { SynthUI } from '../synthUI/synthUI'\nimport { Instrument } from '../synth/instrument'\n\nconst NUM_VOICES = 8\n\n/**\n * Manages all note-generation inputs:\n * \t- PC Keyboard\n * \t- Virtual piano keyboard\n *\t- An external MIDI keyboard\n * Handles switching to polyphonic mode and back to mono\n */\nexport class NoteInputs {\n\tsynthUI: SynthUI\n\tpoly: boolean\n\tinstrument: Instrument\n\tlastNote: number\n\tpiano: PianoKeyboard\n\tarpeggiator: Arpeggiator\n\n\tconstructor(synthUI: SynthUI) {\n\t\tthis.synthUI = synthUI\n\t\tthis.poly = false\n\t\t// Setup piano panel\n\t\tlet piano = new PianoKeyboard($('#piano'))\n\t\tthis.piano = piano\n\t\tpiano.noteOn = (midi) => this.arpeggiator.sendNoteOn(midi, 1)\n\t\tpiano.noteOff = (midi) => this.arpeggiator.sendNoteOff(midi, 1)\n\t\t// Register poly on/off handlers\n\t\tpiano.polyOn = () => this.polyOn()\n\t\tpiano.polyOff = () => this.polyOff()\n\t\t// Setup PC keyboard\n\t\tlet kb = this.setupPCKeyboard(piano)\n\t\t// Bind piano octave with PC keyboard\n\t\tkb.baseNote = piano.baseNote\n\t\tpiano.octaveChanged = baseNote => kb.baseNote = baseNote\n\t\tthis.setupEnvelopeAnimation(piano)\n\t\t// Setup arpeggiator\n\t\tthis.setupArpeggiator(piano, synthUI.synth.ac)\n\t\t// Setup MIDI keyboard\n\t\tthis.setupMidiKeyboard(piano)\n\t}\n\n\tsetupPCKeyboard(piano: PianoKeyboard): Keyboard {\n\t\tlet kb = new Keyboard('#synth')\n\t\tkb.noteOn = (midi) => {\n\t\t\tif (document.activeElement.nodeName == 'INPUT' &&\n\t\t\t\tdocument.activeElement.getAttribute('type') != 'range') return\n\t\t\tthis.arpeggiator.sendNoteOn(midi, 1)\n\t\t\tpiano.displayKeyDown(midi)\n\t\t}\n\t\tkb.noteOff = (midi) => {\n\t\t\tthis.arpeggiator.sendNoteOff(midi, 1)\n\t\t\tpiano.displayKeyUp(midi)\n\t\t}\n\t\treturn kb\n\t}\n\n\tsetupMidiKeyboard(piano: PianoKeyboard) {\n\t\tlet midi = new MidiKeyboard()\n\t\tmidi.noteOn = (note: number, velocity: number, channel: number): void => {\n\t\t\tthis.arpeggiator.sendNoteOn(note, 1)\n\t\t\tpiano.displayKeyDown(note)\n\t\t}\n\t\tmidi.noteOff = (note: number, velocity: number, channel: number): void => {\n\t\t\tthis.arpeggiator.sendNoteOff(note, 1)\n\t\t\tpiano.displayKeyUp(note)\n\t\t}\n\t}\n\n\tsetupEnvelopeAnimation(piano: PianoKeyboard) {\n\t\tconst loaded = this.synthUI.gr.handler.graphLoaded\n\t\tthis.synthUI.gr.handler.graphLoaded = function() {\n\t\t\tloaded.bind(this.synthUI.gr.handler)()\n\t\t\tlet adsr = null\n\t\t\tfor (const node of this.synthUI.gr.nodes) {\n\t\t\t\tconst data: NodeData = node.data\n\t\t\t\tif (data.type == 'ADSR') {\n\t\t\t\t\tadsr = data.anode\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tpiano.setEnvelope(adsr || { attack: 0, release: 0 })\n\t\t}\n\t}\n\n\tsetupArpeggiator(piano: PianoKeyboard, ac: AudioContext) {\n\t\tthis.arpeggiator = new Arpeggiator(ac)\n\t\tpiano.arpeggioChanged = (bpm, mode, octaves) => {\n\t\t\tthis.arpeggiator.mode = mode\n\t\t\tthis.arpeggiator.octaves = octaves\n\t\t\tthis.arpeggiator.bpm = bpm\n\t\t}\n\t\tthis.arpeggiator.noteOn =\n\t\t\t(midi, velocity, time) => this.noteOn(midi, velocity, time)\n\t\tthis.arpeggiator.noteOff =\n\t\t\t(midi, velocity, time) => this.noteOff(midi, velocity, time)\n\t}\n\n\n\tnoteOn(midi: number, velocity: number, time?: number): void {\n\t\tthis.lastNote = midi\n\t\tconst portamento = this.piano.getPortamento()\n\t\tif (this.poly) {\n\t\t\tthis.instrument.portamento.time = portamento\n\t\t\tthis.instrument.noteOn(midi, velocity, time)\n\t\t}\n\t\telse {\n\t\t\tthis.synthUI.synth.portamento.time = portamento\n\t\t\tthis.synthUI.synth.noteOn(midi, velocity, time)\n\t\t}\n\t}\n\n\tnoteOff(midi: number, velocity: number, time?: number): void {\n\t\tthis.lastNote = 0\n\t\tif (this.poly)\n\t\t\tthis.instrument.noteOff(midi, velocity, time)\n\t\telse\n\t\t\tthis.synthUI.synth.noteOff(midi, velocity, time)\n\t}\n\n\tpolyOn() {\n\t\tif (this.lastNote) this.noteOff(this.lastNote, 1)\n\t\tthis.poly = true\n\t\tconst json = this.synthUI.gr.toJSON()\n\t\tthis.instrument = new Instrument(\n\t\t\tthis.synthUI.synth.ac, json, NUM_VOICES, this.synthUI.outNode)\n\t}\n\n\tpolyOff() {\n\t\tthis.poly = false\n\t\tthis.instrument.close()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piano/noteInputs.ts","const KB_NOTES = 'ZSXDCVGBHNJMQ2W3ER5T6Y7UI9O0P'\nconst BASE_NOTE = 36\n\n/**\n * Provides a piano keyboard using the PC keyboard.\n * Listens to keyboard events and generates MIDI-style noteOn/noteOff events.\n */\nexport class Keyboard {\n\n\tbaseNote: number\n\n\tconstructor(kbTarget = 'body') {\n\t\tthis.setupHandler(kbTarget)\n\t\tthis.baseNote = BASE_NOTE\n\t}\n\n\tsetupHandler(kbTarget: string) {\n\t\tconst pressedKeys: any = {}\n\t\t$(kbTarget)\n\t\t.on('keydown', evt => {\n\t\t\tlet kcode = evt.keyCode || 0\n\t\t\tif (pressedKeys[kcode]) return\t\t\t\t\t// Skip repetitions\n\t\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) return\t// Skip browser shortcuts\n\t\t\tpressedKeys[kcode] = true\n\t\t\tconst midi = this.key2midi(kcode)\n\t\t\tif (midi < 0) return\n\t\t\tthis.noteOn(midi)\n\t\t})\n\t\t.on('keyup', evt => {\n\t\t\tlet kcode = evt.keyCode || 0\n\t\t\tpressedKeys[kcode] = false\n\t\t\tconst midi = this.key2midi(kcode)\n\t\t\tif (midi < 0) return\n\t\t\tthis.noteOff(midi)\n\t\t})\n\t}\n\n\tkey2midi(keyCode: number): number {\n\t\tconst pos = KB_NOTES.indexOf(String.fromCharCode(keyCode))\n\t\tif (pos < 0) return -1\n\t\treturn this.baseNote + pos\n\t}\n\n\tnoteOn(midi: number): void {}\n\tnoteOff(midi: number): void {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piano/keyboard.ts","export class MidiKeyboard {\n\tconnected = false\n\n\tconstructor() {\n\t\tif (!navigator.requestMIDIAccess) return\n\t\tnavigator.requestMIDIAccess({ sysex: false })\n\t\t.then((midiAccess: any) => {\n\t\t\tif (midiAccess.inputs.size <= 0) return\n\t\t\tconst input = midiAccess.inputs.values().next().value\n\t\t\tif (!input) return\n\t\t\tinput.onmidimessage = (msg: any) => this.midiMessage(msg)\n\t\t\tthis.connected = true\n\t\t})\n\t}\n\n\tmidiMessage(msg: any) {\n\t\tconst data = msg.data\n\t\tconst cmd = data[0] >> 4\n\t\tconst channel = data[0] & 0xf\n\t\tconst note = data[1]\n\t\tconst velocity = data[2]\n\t\tswitch (cmd) {\n\t\t\tcase 9:\n\t\t\t\tthis.noteOn(note, velocity, channel)\n\t\t\t\tbreak\n\t\t\tcase 8:\n\t\t\t\tthis.noteOff(note, velocity, channel)\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tnoteOn(midi: number, velocity: number, channel: number): void {}\n\tnoteOff(midi: number, velocity: number, channel: number): void {}\n}\n\ndeclare var navigator: any\n\n\n\n// WEBPACK FOOTER //\n// ./src/piano/midi.ts","import * as popups from '../utils/popups'\nimport { log2linear, linear2log } from '../utils/modern'\n\nconst NUM_WHITES = 17\nconst BASE_NOTE = 36\n\nconst ARPEGGIO_MODES = ['', 'u', 'd', 'ud']\nconst ARPEGGIO_LABELS = ['-', '&uarr;', '&darr;', '&uarr;&darr;']\nconst MAX_ARPEGGIO_OCT = 3\nconst ARPEGGIO_MIN = 15\nconst ARPEGGIO_MAX = 480\n\nconst PORTAMENTO_MIN = 0\nconst PORTAMENTO_MAX = 1\n\n\n/** Builds a piano keyboard out of DIVs */\nexport class PianoKeys {\n\tconstructor(public numWhites = NUM_WHITES) {}\n\n\tcreateKeys(panel: JQuery): JQuery[] {\n\t\tconst keys = []\n\t\tconst pw = panel.width() || 0\n\t\tconst ph = panel.height() || 0\n\t\tconst fromX = parseFloat(panel.css('padding-left'))\n\t\tconst fromY = parseFloat(panel.css('padding-top'))\n\t\tconst kw = pw / this.numWhites + 1\n\t\tconst bw = Math.round(kw * 2 / 3)\n\t\tconst bh = Math.round(ph * 2 / 3)\n\t\t// Create white keys\n\t\tlet knum = 0\n\t\tfor (let i = 0; i < this.numWhites; i++) {\n\t\t\tconst key = $('<div class=\"piano-key\">').css({\n\t\t\t\twidth: '' + kw + 'px',\n\t\t\t\theight: '' + ph + 'px'\n\t\t\t})\n\t\t\tpanel.append(key)\n\t\t\tkeys[knum++] = key\n\t\t\tif (this.hasBlack(i)) knum++\n\t\t}\n\t\t// Create black keys\n\t\tknum = 0\n\t\tlet x = fromX - bw / 2\n\t\tfor (let i = 0; i < this.numWhites - 1; i++) {\n\t\t\tx += kw - 1\n\t\t\tknum++\n\t\t\tif (!this.hasBlack(i)) continue\n\t\t\tconst key = $('<div class=\"piano-key piano-black\">').css({\n\t\t\t\twidth: '' + bw + 'px',\n\t\t\t\theight: '' + bh + 'px',\n\t\t\t\tleft: '' + x + 'px',\n\t\t\t\ttop: '' + fromY + 'px'\n\t\t\t})\n\t\t\tpanel.append(key)\n\t\t\tkeys[knum++] = key\n\t\t}\n\t\treturn keys\n\t}\n\n\thasBlack(num: number): boolean {\n\t\tconst mod7 = num % 7\n\t\treturn mod7 != 2 && mod7 != 6\n\t}\n\n}\n\n/**\n * A virtual piano keyboard that:\n * \t- Captures mouse input and generates corresponding note events\n * \t- Displays note events as CSS-animated colors in the pressed keys\n * \t- Supports octave switching\n * \t- Provides a poly/mono button\n */\nexport class PianoKeyboard {\n\tkeys: JQuery[]\n\tk1note: number\n\tbaseNote: number\n\toctave: number\n\tpoly: boolean\n\tlastKey: JQuery\n\tenvelope: { attack: number; release: number }\n\tportaSlider: JQuery\n\tcontrols: JQuery\n\tpressedKey: JQuery | null\n\tarpeggio = {\n\t\tmode: 0,\n\t\toctave: 1,\n\t\tbpm: 60\n\t}\n\n\tconstructor(panel: JQuery) {\n\t\tthis.baseNote = BASE_NOTE\n\t\tthis.octave = 3\n\t\tthis.poly = false\n\t\tthis.envelope = { attack: 0, release: 0 }\n\t\tconst pianoKeys = new PianoKeys()\n\t\tthis.keys = pianoKeys.createKeys(panel)\n\t\tfor (let i = 0; i < this.keys.length; i++)\n\t\t\tthis.registerKey(this.keys[i], i)\n\t\tthis.controls = panel.parent()\n\t\tthis.registerButtons(this.controls)\n\t\tthis.portaSlider = this.controls.find('.portamento-box input')\n\t}\n\n\tregisterKey(key: JQuery, knum: number): void {\n\t\tkey.mousedown(_ => {\n\t\t\tconst midi = knum + this.baseNote\n\t\t\tthis.displayKeyDown(key)\n\t\t\tthis.noteOn(midi)\n\t\t\tthis.pressedKey = key\n\t\t})\n\t\tkey.mouseup(_ => {\n\t\t\tconst midi = knum + this.baseNote\n\t\t\tthis.displayKeyUp(key)\n\t\t\tthis.noteOff(midi)\n\t\t\tthis.pressedKey = null\n\t\t})\n\t\tkey.mouseout(_ => {\n\t\t\tif (key != this.pressedKey) return\n\t\t\tconst midi = knum + this.baseNote\n\t\t\tthis.displayKeyUp(key)\n\t\t\tthis.noteOff(midi)\n\t\t\tthis.pressedKey = null\n\t\t})\n\t}\n\n\tregisterButtons(panel: JQuery): void {\n\t\t// Octave navigation\n\t\t$('#prev-octave-but').click(_ => {\n\t\t\tthis.octave--\n\t\t\tthis.updateOctave()\n\t\t})\n\t\t$('#next-octave-but').click(_ => {\n\t\t\tthis.octave++\n\t\t\tthis.updateOctave()\n\t\t})\n\t\t// Arpeggio\n\t\tconst arpeggioSlider = panel.find('.arpeggio-box input')\n\t\tarpeggioSlider.on('input', _ => {\n\t\t\tthis.arpeggio.bpm =\n\t\t\t\tlog2linear(parseFloat('' + arpeggioSlider.val()), ARPEGGIO_MIN, ARPEGGIO_MAX)\n\t\t\t\t// ARPEGGIO_MIN + parseFloat(arpeggioSlider.val()) * (ARPEGGIO_MAX - ARPEGGIO_MIN);\n\t\t\tthis.triggerArpeggioChange()\n\t\t})\n\t\tconst butArpMode = panel.find('.btn-arpeggio-ud')\n\t\tbutArpMode.click(_ => this.changeArpeggioMode(butArpMode))\n\t\tconst butArpOct = panel.find('.btn-arpeggio-oct')\n\t\tbutArpOct.click(_ => this.changeArpeggioOctave(butArpOct))\n\t\t// Monophonic / polyphonic mode\n\t\t$('#poly-but').click(_ => this.togglePoly())\n\t}\n\n\tupdateOctave() {\n\t\t$('#prev-octave-but').prop('disabled', this.octave <= 1)\n\t\t$('#next-octave-but').prop('disabled', this.octave >= 8)\n\t\t$('#octave-label').text('C' + this.octave)\n\t\tthis.baseNote = BASE_NOTE + 12 * (this.octave - 3)\n\t\tthis.octaveChanged(this.baseNote)\n\t}\n\n\tdisplayKeyDown(key: any): void {\n\t\tif (typeof key == 'number') key = this.midi2key(key)\n\t\tif (!key) return\n\t\tif (!this.poly && this.arpeggio.mode == 0 && this.lastKey)\n\t\t\tthis.displayKeyUp(this.lastKey, true)\n\t\tkey.css('transition', `background-color ${this.envelope.attack}s linear`)\n\t\tkey.addClass('piano-key-pressed')\n\t\tthis.lastKey = key\n\t}\n\n\tdisplayKeyUp(key: any, immediate?: boolean) {\n\t\tif (typeof key == 'number') key = this.midi2key(key)\n\t\tif (!key) return\n\t\tconst release = immediate ? 0 : this.envelope.release\n\t\tkey.css('transition', `background-color ${release}s linear`)\n\t\tkey.removeClass('piano-key-pressed')\n\t}\n\n\tmidi2key(midi: number) {\n\t\treturn this.keys[midi - this.baseNote]\n\t}\n\n\tsetEnvelope(adsr: any) {\n\t\tthis.envelope = adsr\n\t}\n\n\ttogglePoly() {\n\t\tthis.poly = !this.poly\n\t\tif (this.poly) {\n\t\t\tconst cover = $('<div>').addClass('editor-cover')\n\t\t\tcover.append('<p>You can use the PC keyboard to play notes<br><br>' +\n\t\t\t\t'Synth editing is disabled in polyphonic mode</p>')\n\t\t\t$('body').append(cover)\n\t\t\t$('#poly-but').text('Poly')\n\t\t\tpopups.setOpen(true)\n\t\t\tthis.polyOn()\n\t\t}\n\t\telse {\n\t\t\t$('.editor-cover').remove()\n\t\t\t$('#poly-but').text('Mono')\n\t\t\tpopups.setOpen(false)\n\t\t\tthis.polyOff()\n\t\t}\n\t}\n\n\tgetPortamento(): number {\n\t\tconst sv = parseFloat('' + this.portaSlider.val())\n\t\treturn log2linear(sv, PORTAMENTO_MIN, PORTAMENTO_MAX)\n\t}\n\n\tchangeArpeggioMode(button: JQuery) {\n\t\tthis.arpeggio.mode++\n\t\tif (this.arpeggio.mode >= ARPEGGIO_MODES.length)\n\t\t\tthis.arpeggio.mode = 0\n\t\tbutton.html(ARPEGGIO_LABELS[this.arpeggio.mode])\n\t\tthis.triggerArpeggioChange()\n\t}\n\n\tchangeArpeggioOctave(button: JQuery) {\n\t\tthis.arpeggio.octave++\n\t\tif (this.arpeggio.octave > MAX_ARPEGGIO_OCT)\n\t\t\tthis.arpeggio.octave = 1\n\t\tbutton.text(this.arpeggio.octave)\n\t\tthis.triggerArpeggioChange()\n\t}\n\n\ttriggerArpeggioChange() {\n\t\tthis.arpeggioChanged(this.arpeggio.bpm,\n\t\t\tARPEGGIO_MODES[this.arpeggio.mode], this.arpeggio.octave)\n\t}\n\n\ttoJSON(): any {\n\t\treturn {\n\t\t\tportamento: this.getPortamento(),\n\t\t\toctave: this.octave,\n\t\t\tarpeggio: {\n\t\t\t\tbpm: this.arpeggio.bpm,\n\t\t\t\tmode: this.arpeggio.mode,\n\t\t\t\toctave: this.arpeggio.octave\n\t\t\t}\n\t\t}\n\t}\n\n\tfromJSON(json: any): void {\n\t\tif (!json) return\n\t\tif (json.portamento) {\n\t\t\tthis.portaSlider.val(\n\t\t\t\tlinear2log(json.portamento, PORTAMENTO_MIN, PORTAMENTO_MAX))\n\t\t}\n\t\tif (json.octave) {\n\t\t\tthis.octave = json.octave\n\t\t\tthis.updateOctave()\n\t\t}\n\t\tif (json.arpeggio) {\n\t\t\tthis.arpeggio.bpm = json.arpeggio.bpm\n\t\t\tthis.arpeggio.mode = json.arpeggio.mode\n\t\t\tthis.arpeggio.octave = json.arpeggio.octave\n\t\t\tthis.controls.find('.arpeggio-box input').val(\n\t\t\t\tlinear2log(this.arpeggio.bpm, ARPEGGIO_MIN, ARPEGGIO_MAX))\n\t\t\tthis.controls.find('.btn-arpeggio-ud').html(ARPEGGIO_LABELS[this.arpeggio.mode])\n\t\t\tthis.controls.find('.btn-arpeggio-oct').text(this.arpeggio.octave)\n\t\t\tthis.triggerArpeggioChange()\n\t\t}\n\t}\n\n\t// Simple event handlers\n\tnoteOn(midi: number): void {}\n\tnoteOff(midi: number): void {}\n\tpolyOn() {}\n\tpolyOff() {}\n\toctaveChanged(baseNote: number) {}\n\tarpeggioChanged(bpm: number, mode: string, octaves: number) {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piano/piano.ts","import { Timer } from '../synth/timer'\n\nexport class Arpeggiator {\n\tmode: string\n\toctaves: number\n\t_bpm: number\n\tnotes: NoteTable\n\tnotect: number\n\tbackward = false\n\ttimer: Timer\n\tnoteOnTime = 0.75\n\n\tconstructor(ac: AudioContext) {\n\t\tthis.mode = ''\n\t\tthis.octaves = 1\n\t\tthis.bpm = 60\n\t\tthis.notect = 0\n\t\tthis.notes = new NoteTable()\n\t\tthis.timer = new Timer(ac, this.bpm)\n\t}\n\n\tget bpm() { return this._bpm }\n\n\tset bpm(v) {\n\t\tthis._bpm = v\n\t\tif (this.timer) this.timer.bpm = v\n\t}\n\n\ttimerCB(time: number): void {\n\t\t// Return if disabled or no notes\n\t\tif (this.mode.length == 0) return\n\t\tconst len = this.notes.length()\n\t\tif (len == 0) return\n\t\t// Check note counter\n\t\tthis.wrapCounter(len)\n\t\t// Get current note and play it\n\t\tconst ndata = this.notes.get(this.notect)\n\t\tthis.noteOn(ndata.noteToPlay, ndata.velocity, time)\n\t\tthis.noteOff(ndata.noteToPlay, ndata.velocity,\n\t\t\ttime + this.timer.noteDuration * this.noteOnTime)\n\t\t// Update note counter\n\t\tif (this.mode == 'u')\n\t\t\tthis.notect++\n\t\telse if (this.mode == 'd')\n\t\t\tthis.notect--\n\t\telse if (this.mode == 'ud') {\n\t\t\tif (this.backward) this.notect--\n\t\t\telse this.notect++\n\t\t}\n\t}\n\n\twrapCounter(len: number) {\n\t\tif (this.notect >= len) {\n\t\t\tif (this.mode != 'ud')\n\t\t\t\tthis.notect = 0\n\t\t\telse {\n\t\t\t\tthis.backward = true\n\t\t\t\tthis.notect = len < 2 ? 0 : len - 2\n\t\t\t}\n\t\t}\n\t\telse if (this.notect < 0) {\n\t\t\tif (this.mode != 'ud')\n\t\t\t\tthis.notect = len - 1\n\t\t\telse {\n\t\t\t\tthis.backward = false\n\t\t\t\tthis.notect = len < 2 ? 0 : 1\n\t\t\t}\n\t\t}\n\t}\n\n\tsendNoteOn(midi: number, velocity: number): void {\n\t\tif (this.mode.length == 0)\n\t\t\treturn this.noteOn(midi, velocity)\n\t\tconst shouldStart = this.notes.length() == 0\n\t\tthis.notes.add(midi, midi, velocity)\n\t\tif (this.octaves > 1)\n\t\t\tthis.notes.add(midi, midi + 12, velocity)\n\t\tif (this.octaves > 2)\n\t\t\tthis.notes.add(midi, midi + 24, velocity)\n\t\tif (shouldStart)\n\t\t\tthis.timer.start(time => this.timerCB(time))\n\t}\n\n\tsendNoteOff(midi: number, velocity: number): void {\n\t\tif (this.mode.length == 0)\n\t\t\tthis.noteOff(midi, velocity)\n\t\tthis.notes.remove(midi)\n\t\tif (this.notes.length() == 0) {\n\t\t\tthis.timerCB(0)\n\t\t\tthis.timer.stop()\n\t\t\tthis.backward = false\n\t\t\tthis.notect = 0\n\t\t}\n\t}\n\n\t// Event handlers\n\tnoteOn(midi: number, velocity: number, time?: number): void {}\n\tnoteOff(midi: number, velocity: number, time?: number): void {}\n}\n\n\nexport class NoteData {\n\tconstructor(public note: number,\n\t\tpublic noteToPlay: number, public velocity: number) {}\n}\n\nexport class NoteTable {\n\tprivate notes: NoteData[] = []\n\n\tlength(): number { return this.notes.length }\n\n\tget(i: number): NoteData { return this.notes[i] }\n\n\tadd(note: number, noteToPlay: number, velocity: number): void {\n\t\tconst ndata = new NoteData(note, noteToPlay, velocity)\n\t\tfor (let i = 0; i < this.notes.length; i++) {\n\t\t\tif (noteToPlay < this.notes[i].noteToPlay) {\n\t\t\t\tthis.notes.splice(i, 0, ndata)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tthis.notes.push(ndata)\n\t}\n\n\tremove(note: number): void {\n\t\tthis.notes = this.notes.filter(ndata => ndata.note != note)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piano/arpeggiator.ts","import { SynthUI } from './synthUI'\nimport * as popups from '../utils/popups'\nimport * as file from '../utils/file'\nimport { focusable } from '../utils/modern'\nimport { Node } from './graph'\n\nconst MAX_PRESETS = 20\n\n/**\n * Manages the presets box:\n * - Handles navigation through presets\n * - Handles preset loading & saving\n */\nexport class Presets {\n\n\tsynthUI: SynthUI\n\tpresets: any[]\n\tpresetNum = 0\n\n\tconstructor(synthUI: SynthUI) {\n\t\tthis.synthUI = synthUI\n\t\tthis.registerListeners(synthUI.gr.canvas)\n\t\tthis.loadPresets()\n\t}\n\n\tloadPresets() {\n\t\tthis.presets = new Array(MAX_PRESETS)\n\t\tfor (let i = 0; i < MAX_PRESETS; i++)\n\t\t\tthis.presets[i] = this.getEmptyPreset()\n\t\t$.get('js/presets.json', data => {\n\t\t\tif (!(data instanceof Array)) return\n\t\t\tfor (let i = 0; i < MAX_PRESETS; i++)\n\t\t\t\tif (data[i]) this.presets[i] = data[i]\n\t\t\tthis.preset2synth()\n\t\t})\n\t}\n\n\tgetEmptyPreset(): any {\n\t\treturn {\n\t\t\tname: '',\n\t\t\tnodes: [\n\t\t\t\t{ id: 0, x: 500, y: 180, name: 'Out', inputs: [], classes: 'node node-out' }\n\t\t\t],\n\t\t\tnodeData: [\n\t\t\t\t{ type: 'out', params: {} }\n\t\t\t]\n\t\t}\n\t}\n\n\tregisterListeners(elem: HTMLElement) {\n\t\t$('#save-but').click(_ => this.savePreset())\n\t\t$('#load-file').on('change', evt => this.loadPreset(evt))\n\t\t$('#prev-preset-but').click(_ => this.changePreset(this.presetNum - 1))\n\t\t$('#next-preset-but').click(_ => this.changePreset(this.presetNum + 1))\n\t\t$(focusable(elem)).keydown(evt => {\n\t\t\tif (evt.target.nodeName == 'INPUT' || popups.isOpen) return\n\t\t\tif (evt.keyCode == 37) this.changePreset(this.presetNum - 1)\n\t\t\tif (evt.keyCode == 39) this.changePreset(this.presetNum + 1)\n\t\t})\n\t\t$('#preset-num').click(_ => this.togglePresetSelector())\n\t\tconst preSel = $('.preset-selector select')\n\t\tpreSel.change(_ => {\n\t\t\tlet val = preSel.val()\n\t\t\tif (!val) return\n\t\t\tconst sel = val.toString().split(':')[0]\n\t\t\tthis.changePreset(parseInt(sel, 10) - 1)\n\t\t})\n\t}\n\n\ttogglePresetSelector() {\n\t\tconst seldiv = $('.preset-selector')\n\t\tseldiv.toggle()\n\t\tif (!seldiv.is(':visible')) return\n\t\t// Fill select contents\n\t\tthis.synth2preset()\n\t\tconst sel = seldiv.find('select')\n\t\tsel.empty()\n\t\tsel.focus()\n\t\tlet i = 0\n\t\tfor (const preset of this.presets) {\n\t\t\tconst selected = i == this.presetNum ? ' selected' : ''\n\t\t\ti++\n\t\t\tif (preset.nodes.length > 1)\n\t\t\t\tsel.append(`<option${selected}>${i}: ${preset.name}</option>`)\n\t\t}\n\t}\n\n\tchangePreset(newNum: number) {\n\t\tif (newNum < 0) newNum = MAX_PRESETS - 1\n\t\telse if (newNum >= MAX_PRESETS) newNum = 0\n\t\tthis.synth2preset()\n\t\tthis.presetNum = newNum\n\t\tthis.preset2synth()\n\t}\n\n\tsynth2preset() {\n\t\tconst json = this.synthUI.gr.toJSON()\n\t\tlet val = '' + $('#preset-name').val()\n\t\tjson.name = val.trim()\n\t\tjson.modulatorType = 'synth'\n\t\tthis.beforeSave(json)\n\t\tthis.presets[this.presetNum] = json\n\t\treturn json\n\t}\n\n\tpreset2synth() {\n\t\tconst preset = this.presets[this.presetNum]\n\t\tthis.afterLoad(preset)\n\t\t$('#preset-num').text(this.presetNum + 1)\n\t\t$('#preset-name').val(preset.name)\n\t\t$('#node-params').empty()\n\t\tthis.synthUI.gr.fromJSON(preset)\n\t\tthis.selectBestNode()\n\t}\n\n\tselectBestNode() {\n\t\ttype Predicate = (n: Node) => boolean\n\t\tconst getFirstNode =\n\t\t\t(isGood: Predicate) => this.synthUI.gr.nodes.filter(isGood)[0]\n\t\tlet n = getFirstNode(nn => nn.data.type == 'Filter')\n\t\tif (!n) n = getFirstNode(nn => nn.data.type == 'ADSR')\n\t\tif (!n) n = getFirstNode(nn => nn.data.anode.numberOfInputs == 0)\n\t\tif (n) this.synthUI.gr.selectNode(n)\n\t}\n\n\tloadPreset(evt: JQuery.Event) {\n\t\tif (!evt) return\n\t\tfile.uploadText(evt, data => {\n\t\t\ttry {\n\t\t\t\tconst json = JSON.parse(data)\n\t\t\t\tif (json.modulatorType != 'synth') throw 'Invalid file format'\n\t\t\t\tthis.presets[this.presetNum] = json\n\t\t\t\tthis.preset2synth()\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t\tpopups.alert('Could not load synth: invalid file format', 'Load error')\n\t\t\t}\n\t\t})\n\t}\n\n\tsavePreset() {\n\t\tconst json = this.synth2preset()\n\t\tconst jsonData = JSON.stringify(json)\n\t\tif (file.browserSupportsDownload()) {\n\t\t\tif (json.name.length == 0) json.name = '' + this.presetNum\n\t\t\tfile.download(json.name + '.json', jsonData)\n\t\t}\n\t\telse {\n\t\t\tpopups.prompt(\n\t\t\t\t'Copy the text below to the clipboard and save it to a local text file',\n\t\t\t\t'Save preset', jsonData, null)\n\t\t}\n\t}\n\n\t// Extension point to specify additional data to save, e.g. keyboard settings\n\tbeforeSave(json: any): void {}\n\t// Extension point to handle previously saved additional data\n\tafterLoad(json: any): void {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/synthUI/presets.ts","import { Presets } from '../synthUI/presets'\nimport { Timer } from '../synth/timer'\nimport { SynthUI } from '../synthUI/synthUI'\n\nimport { Track } from './track'\nimport { timerTickHandler, eachTrack, scheduleTrack,\n\tinstruments, effects, userTracks, NoteListener, listenNotes } from './scheduler'\nimport { Effect, createEffect } from './effects'\nimport { makeScale } from './scales'\nimport { logToPanel, enableLog, clearLog } from './log'\nimport { Ring } from './rings'\nimport { LCInstrument, PresetData, createInstrument } from './instruments'\n\n\nexport type TrackCallback = (t: Track) => void\n\nexport class LiveCoding {\n\ttimer: Timer\n\n\tconstructor(\n\t\tpublic context: AudioContext,\n\t\tpublic presets: Presets,\n\t\tpublic synthUI: SynthUI) {\n\t\tthis.timer = new Timer(context, 60, 0.2)\n\t\tthis.timer.start(time => timerTickHandler(this.timer, time))\n\t}\n\n\tinstrument(preset: number | string | PresetData,\n\t\tname?: string, numVoices = 4) {\n\t\tif (typeof preset == 'string') {\n\t\t\tlet oldInstr = instruments[name || preset]\n\t\t\tif (oldInstr) oldInstr.shutdown()\n\t\t}\n\t\tlet instr = createInstrument(this, preset, name, numVoices)\n\t\tif (name) instr.name = name\n\t\tinstruments[instr.name] = instr\n\t\tinitInstrument(instr)\n\t\treturn instr\n\t}\n\n\teffect(name: string, newName?: string) {\n\t\tlet eff = createEffect(this.context, name)\n\t\teffects[newName || name] = eff\n\t\treturn eff\n\t}\n\n\ttrack(name: string, cb: TrackCallback, loop = false) {\n\t\tlet t = new Track(this.context, this.synthUI.outNode, this.timer)\n\t\tt.loop = loop\n\t\tt.name = name\n\t\tuserTracks[name] = t\n\t\tt.callback = cb\n\t\tonInitialized(() => scheduleTrack(t))\n\t\treturn this\n\t}\n\n\tloop_track(name: string, cb: TrackCallback) {\n\t\treturn this.track(name, cb, true)\n\t}\n\n\tscale(note: number, type?: string, octaves?: number): Ring<number> {\n\t\treturn makeScale(note, type, octaves)\n\t}\n\n\tlog(...args: any[]) {\n\t\tlogToPanel(true, false, ...args)\n\t\treturn this\n\t}\n\n\tlog_enable(flag = true) {\n\t\tenableLog(flag)\n\t\treturn this\n\t}\n\n\tlog_clear() {\n\t\tclearLog()\n\t\treturn this\n\t}\n\n\tbpm(value?: number) {\n\t\tif (value === undefined)\n\t\t\treturn this.timer.bpm\n\t\tthis.timer.bpm = value\n\t\treturn this\n\t}\n\n\tstop() {\n\t\teachTrack(t => t.stop())\n\t\treturn this\n\t}\n\n\tpause() {\n\t\teachTrack(t => t.pause())\n\t\treturn this\n\t}\n\n\tcontinue() {\n\t\teachTrack(t => t.continue())\n\t\treturn this\n\t}\n\n\treset() {\n\t\teachTrack(t => {\n\t\t\tif (t._effect) t._effect.input.disconnect()\n\t\t\tt.delete()\n\t\t})\n\t\treturn this\n\t}\n\n\tlisten(listenFunc: NoteListener) {\n\t\tlistenNotes(listenFunc)\n\t\treturn this\n\t}\n\n\tasync init(initFunc: () => void) {\n\t\tpushTask()\n\t\tawait initFunc()\n\t\tpopTask()\n\t\treturn this\n\t}\n}\n\n// ---------- Instrument init ----------\n\nasync function initInstrument(instr: LCInstrument) {\n\tpushTask()\n\tawait instr.initialize()\n\tpopTask()\n}\n\n\n\n// ---------- Initialization ----------\n\ntype Callback = () => void\n\nlet taskCount = 0\nlet initListeners: Callback[] = []\n\nfunction pushTask() {\n\ttaskCount++\n}\n\nfunction popTask() {\n\ttaskCount--\n\tif (taskCount <= 0) {\n\t\tfor (let trackCB of initListeners) trackCB()\n\t\tinitListeners = []\n\t}\n}\n\nfunction onInitialized(cb: Callback) {\n\tif (taskCount <= 0) cb()\n\telse initListeners.push(cb)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/live-coding.ts","import { Timer } from '../synth/timer'\n\nimport { LCInstrument } from './instruments'\nimport { Effect } from './effects'\nimport { tracks, NoteInfo, NoteOptions, userTracks } from './scheduler'\nimport { TrackCallback } from './live-coding';\n\n\nclass TrackControl {\n\tname: string\n\t_gain: GainNode\n\tlastGain: number\n\tstartTime: number\n\tshouldStop = false\n\tstopped = false\n\n\tconstructor(public ac: AudioContext,\n\t\tpublic out: AudioNode, public timer: Timer) {\n\t\tthis._gain = ac.createGain()\n\t\tthis._gain.connect(out)\n\t\tthis.lastGain = this._gain.gain.value\n\t}\n\n\tmute() {\n\t\tthis.lastGain = this._gain.gain.value\n\t\tthis._gain.gain.value = 1e-5\n\t\treturn this\n\t}\n\n\tunmute() {\n\t\tthis._gain.gain.value = this.lastGain\n\t\treturn this\n\t}\n\n\tgain(value: number, rampTime?: number) {\n\t\tif (value < 1e-5) value = 1e-5\n\t\tif (rampTime === undefined)\n\t\t\tthis._gain.gain.value = value\n\t\telse\n\t\t\tthis._gain.gain.exponentialRampToValueAtTime(\n\t\t\t\tvalue, this.ac.currentTime + rampTime\n\t\t\t)\n\t\treturn this\n\t}\n\n\tstop() {\n\t\tthis.shouldStop = true\n\t\treturn this\n\t}\n\n\tpause() {\n\t\tthis.stopped = true\n\t\treturn this\n\t}\n\n\tcontinue() {\n\t\tthis.shouldStop = false\n\t\tthis.stopped = false\n\t\treturn this\n\t}\n\n\tdelete() {\n\t\tthis.mute()\n\t\tdelete tracks[this.name]\n\t\tdelete userTracks[this.name]\n\t}\n}\n\n\nexport class Track extends TrackControl {\n\tnotect = 0\n\tnotes: NoteInfo[] = []\n\ttime = 0\n\tlatency = 0.2\n\tloop = false\n\tloopCount = 0\n\tinst: LCInstrument\n\tvelocity = 1\n\t_effect: Effect\n\t_transpose = 0\n\tcallback: TrackCallback\n\tplaying = false\n\n\tinstrument(inst: LCInstrument) {\n\t\tif (!this.playing)\n\t\t\tinst.connect(this._gain)\n\t\tthis.inst = inst\n\t\treturn this\n\t}\n\n\teffect(e: Effect) {\n\t\tif (this.playing) return this\n\t\tlet dst = this._effect ? this._effect.output : this._gain\n\t\tdst.disconnect()\n\t\tdst.connect(e.input)\n\t\te.output.connect(this.out)\n\t\tthis._effect = e\n\t\treturn this\n\t}\n\n\tvolume(v: number) {\n\t\tthis.velocity = v\n\t\treturn this\n\t}\n\n\tplay(note = 64, duration?: number, options?: NoteOptions) {\n\t\tif (!this.inst) throw new Error(\n\t\t\t`Must call instrument before playing a note or setting parameters`)\n\t\tthis.notes.push({\n\t\t\ttrack: this,\n\t\t\tinstrument: this.inst,\n\t\t\tnumber: note + this._transpose,\n\t\t\ttime: this.time + this.latency,\n\t\t\tvelocity: this.velocity,\n\t\t\tduration,\n\t\t\toptions\n\t\t})\n\t\treturn this\n\t}\n\n\tplay_notes(notes: number[],\n\t\ttimes?: number | number[], durations?: number | number[]) {\n\t\tif (times === undefined) times = [0]\n\t\telse if (typeof times == 'number') times = [times]\n\t\tlet rtimes = times.ring()\n\t\tif (typeof durations == 'number') durations = [durations]\n\t\tlet rdurs = durations ? durations.ring() : undefined\n\t\tlet rnotes = notes.ring()\n\t\tthis.repeat(notes.length, _ => this\n\t\t\t.play(rnotes.tick(), rdurs ? rdurs.tick() : undefined)\n\t\t\t.sleep(rtimes.tick())\n\t\t)\n\t\treturn this\n\t}\n\n\ttranspose(notes: number) {\n\t\tthis._transpose = notes\n\t\treturn this\n\t}\n\n\tparams(options: NoteOptions) {\n\t\treturn this.play(0, undefined, options)\n\t}\n\n\tparam(pname: string, value: number) {\n\t\treturn this.params({ instrument: this.inst, [pname]: value })\n\t}\n\n\tsleep(time: number) {\n\t\tthis.time += time * 60 / this.timer.bpm\n\t\treturn this\n\t}\n\n\trepeat(times: number, cb: (i: number) => void) {\n\t\tfor (let i = 0; i < times; i++) cb(i)\n\t\treturn this\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/track.ts","import { Tuna } from '../third-party/tuna'\n\n\nexport interface Effect {\n\tinput: AudioNode\n\toutput: AudioNode\n\tparam(name: string, value?: number,\n\t\trampTime?: number, exponential?: boolean): number | this\n\tparamNames(): string[]\n}\n\n\nexport class BaseEffect implements Effect {\n\tinput: AudioNode\n\toutput: AudioNode\n\n\tconstructor(public ac: AudioContext, public name: string) {}\n\n\tparam(name: string, value?: number, rampTime?: number, exponential = true) {\n\t\tlet prm = this.getAudioParam(name)\n\t\tif (value === undefined) {\n\t\t\treturn prm.value\n\t\t}\n\t\tif (rampTime === undefined) {\n\t\t\tprm.value = value\n\t\t}\n\t\telse {\n\t\t\tif (exponential) {\n\t\t\t\tprm.exponentialRampToValueAtTime(value, this.ac.currentTime + rampTime)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprm.linearRampToValueAtTime(value, this.ac.currentTime + rampTime)\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\tparamNames() {\n\t\tlet pnames = []\n\t\tfor (let pname in this.input)\n\t\t\tif ((<any>this.input)[pname] instanceof AudioParam)\n\t\t\t\tpnames.push(pname)\n\t\treturn pnames\n\t}\n\n\tprivate getAudioParam(name: string) {\n\t\tlet prm: AudioParam = (<any>this.input)[name]\n\t\tif (!prm || !(prm instanceof AudioParam))\n\t\t\tthrow new Error(`Parameter \"${name}\" not found in effect \"${this.name}\"`)\n\t\treturn prm\n\t}\n}\n\n\nclass WebAudioEffect extends BaseEffect {\n\tconstructor(ac: AudioContext, name: string) {\n\t\tsuper(ac, name)\n\t\tlet methodName = 'create' + name\n\t\tlet anyac: any = ac\n\t\tif (!anyac[methodName])\n\t\t\tthrow new Error(`Effect \"${name}\" does not exist`)\n\t\tthis.input = (<any>ac)[methodName]()\n\t\tthis.output = this.input\n\t}\n}\n\n\nclass TunaEffect extends BaseEffect {\n\tconstructor(ac: AudioContext, name: string) {\n\t\tsuper(ac, name)\n\t\tlet effClass = tuna[name]\n\t\tif (!effClass) throw new Error(\n\t\t\t`Effect \"tuna/${name}\" does not exist`)\n\t\tthis.input = new effClass()\n\t\tthis.output = this.input\n\t}\n\n\tparamNames() {\n\t\tlet tunaEffect: any = this.input\n\t\tlet names = ['bypass']\n\t\tfor (let pname of Object.getOwnPropertyNames(tunaEffect.defaults))\n\t\t\tnames.push(pname)\n\t\treturn names\n\t}\n\n\tparam(name: string, value?: number, rampTime?: number, exponential = true) {\n\t\tlet tunaEffect: any = this.input\n\t\tif (tunaEffect[name] === undefined)\n\t\t\tthrow new Error(`Parameter \"${name}\" not found in effect \"${this.name}\"`)\n\t\tif (value === undefined)\n\t\t\treturn tunaEffect[name]\n\t\tif (rampTime === undefined)\n\t\t\ttunaEffect[name] = value\n\t\telse\n\t\t\ttunaEffect.automate(name, value, rampTime)\n\t\treturn this\n\t}\n\n}\n\n\ntype EffectProvider = (ac: AudioContext, name: string) => Effect\n\ninterface ProviderTable {\n\t[prefix: string]: EffectProvider\n}\n\nlet providers: ProviderTable = {\n\tWebAudio: (ac, name) => new WebAudioEffect(ac, name),\n\ttuna: tunaProvider\n}\n\nfunction tunaProvider(ac: AudioContext, name: string) {\n\tif (!tuna) tuna = Tuna(ac)\n\treturn new TunaEffect(ac, name)\n}\n\nlet tuna: any\n\n\nexport function registerProvider(prefix: string, provider: EffectProvider) {\n\tproviders[prefix] = provider\n}\n\nexport function createEffect(ac: AudioContext, name: string) {\n\tif (name.indexOf('/') < 0) name = 'WebAudio/' + name\n\tlet [prefix, ename] = name.split('/')\n\tlet provider = providers[prefix]\n\tif (!provider) throw new Error(\n\t\t`Effect \"${name}\" not found: unknown prefix \"${provider}\"`)\n\treturn provider(ac, ename)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/effects.ts","/* This is just the great Tuna library, but adapted to a TypeScript module\n\tSee https://github.com/Theodeus/tuna/wiki\n\tOriginal license follows below\n*/\n\n/*\n\tCopyright (c) 2012 DinahMoe AB & Oskar Eriksson\n\n\tPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\n\tfiles (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\n\tmodify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\n\tis furnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\tDAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n\tOR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\nlet userContext: AudioContext,\n\tuserInstance: any,\n\tpipe = function(param: AudioParam, val: number) {\n\t\tparam.value = val\n\t}\n\nlet Super = Object.create(null, {\n\tactivate: {\n\t\twritable: true,\n\t\tvalue: function(doActivate: boolean) {\n\t\t\tif (doActivate) {\n\t\t\t\tthis.input.disconnect()\n\t\t\t\tthis.input.connect(this.activateNode)\n\t\t\t\tif (this.activateCallback) {\n\t\t\t\t\tthis.activateCallback(doActivate)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.input.disconnect()\n\t\t\t\tthis.input.connect(this.output)\n\t\t\t}\n\t\t}\n\t},\n\tbypass: {\n\t\tget: function() {\n\t\t\treturn this._bypass\n\t\t},\n\t\tset: function(value) {\n\t\t\tif (this._lastBypassValue === value) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis._bypass = value\n\t\t\tthis.activate(!value)\n\t\t\tthis._lastBypassValue = value\n\t\t}\n\t},\n\tconnect: {\n\t\tvalue: function(target: AudioNode) {\n\t\t\tthis.output.connect(target)\n\t\t}\n\t},\n\tdisconnect: {\n\t\tvalue: function(target: AudioNode) {\n\t\t\tthis.output.disconnect(target)\n\t\t}\n\t},\n\tconnectInOrder: {\n\t\tvalue: function(nodeArray: any[]) {\n\t\t\tlet i = nodeArray.length - 1\n\t\t\twhile (i--) {\n\t\t\t\tif (!nodeArray[i].connect) {\n\t\t\t\t\treturn console.error('AudioNode.connectInOrder: TypeError: Not an AudioNode.', nodeArray[i])\n\t\t\t\t}\n\t\t\t\tif (nodeArray[i + 1].input) {\n\t\t\t\t\tnodeArray[i].connect(nodeArray[i + 1].input)\n\t\t\t\t} else {\n\t\t\t\t\tnodeArray[i].connect(nodeArray[i + 1])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tgetDefaults: {\n\t\tvalue: function() {\n\t\t\tlet result: any = {}\n\t\t\t// tslint:disable-next-line:forin\n\t\t\tfor (let key in this.defaults) {\n\t\t\t\tresult[key] = this.defaults[key].value\n\t\t\t}\n\t\t\treturn result\n\t\t}\n\t},\n\tautomate: {\n\t\tvalue: function(property: string, value: number, duration: number, startTime: number) {\n\t\t\tlet start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\n\t\t\t\tdur = duration ? ~~(duration / 1000) : 0,\n\t\t\t\t_is = this.defaults[property],\n\t\t\t\tparam = this[property],\n\t\t\t\tmethod\n\n\t\t\tif (param) {\n\t\t\t\tif (_is.automatable) {\n\t\t\t\t\tif (!duration) {\n\t\t\t\t\t\tmethod = 'setValueAtTime'\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmethod = 'linearRampToValueAtTime'\n\t\t\t\t\t\tparam.cancelScheduledValues(start)\n\t\t\t\t\t\tparam.setValueAtTime(param.value, start)\n\t\t\t\t\t}\n\t\t\t\t\tparam[method](value, dur + start)\n\t\t\t\t} else {\n\t\t\t\t\tparam = value\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error('Invalid Property for ' + this.name)\n\t\t\t}\n\t\t}\n\t}\n})\n\nlet\tFLOAT = 'float',\n\tBOOLEAN = 'boolean',\n\tSTRING = 'string',\n\tINT = 'int'\n\n\nfunction definition() {\n\treturn Tuna\n}\n\nexport function Tuna(context: AudioContext): any {\n\tif (!(this instanceof Tuna)) {\n\t\treturn new (<any>Tuna)(context)\n\t}\n\n\tlet _window: any = typeof window === 'undefined' ? {} : window\n\n\tif (!_window.AudioContext) {\n\t\t_window.AudioContext = _window.webkitAudioContext\n\t}\n\tif (!context) {\n\t\tconsole.log('tuna.js: Missing audio context! Creating a new context for you.')\n\t\tcontext = _window.AudioContext && (new _window.AudioContext())\n\t}\n\tif (!context) {\n\t\tthrow new Error('Tuna cannot initialize because this environment does not support web audio.')\n\t}\n\tconnectify(context)\n\tuserContext = context\n\tuserInstance = this\n}\n\nfunction connectify(context: any) {\n\tif (context.__connectified__ === true) return\n\n\tlet gain = context.createGain(),\n\t\tproto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\n\t\toconnect = proto.connect\n\n\tproto.connect = shimConnect\n\tcontext.__connectified__ = true // Prevent overriding connect more than once\n\n\tfunction shimConnect() {\n\t\tlet node = arguments[0]\n\t\targuments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node)\n\t\toconnect.apply(this, arguments)\n\t\treturn node\n\t}\n}\n\nfunction dbToWAVolume(db: number) {\n\treturn Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100)\n}\n\nfunction fmod(x: number, y: number) {\n\t// http://kevin.vanzonneveld.net\n\t// *     example 1: fmod(5.7, 1.3);\n\t// *     returns 1: 0.5\n\tlet tmp, tmp2, p = 0,\n\t\tpY = 0,\n\t\tl = 0.0,\n\t\tl2 = 0.0\n\n\ttmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/) || ''\n\tp = parseInt(tmp[2], 10) - (tmp[1] + '').length\n\ttmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/) || ''\n\tpY = parseInt(tmp[2], 10) - (tmp[1] + '').length\n\n\tif (pY > p) {\n\t\tp = pY\n\t}\n\n\ttmp2 = (x % y)\n\n\tif (p < -100 || p > 20) {\n\t\t// toFixed will give an out of bound error so we fix it like this:\n\t\tl = Math.round(Math.log(tmp2) / Math.log(10))\n\t\tl2 = Math.pow(10, l)\n\t\tlet rr: any = (tmp2 / l2).toFixed(l - p)\n\t\treturn rr * l2\n\t} else {\n\t\treturn parseFloat(tmp2.toFixed(-p))\n\t}\n}\n\nfunction sign(x: number) {\n\tif (x === 0) {\n\t\treturn 1\n\t} else {\n\t\treturn Math.abs(x) / x\n\t}\n}\n\nfunction tanh(n: number) {\n\treturn (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n))\n}\n\nfunction initValue(userVal: any, defaultVal: any) {\n\treturn userVal === undefined ? defaultVal : userVal\n}\n\nTuna.prototype.Bitcrusher = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.bufferSize = properties.bufferSize || this.defaults.bufferSize.value\n\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1)\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.processor)\n\tthis.processor.connect(this.output)\n\n\tlet phaser = 0,\n\t\tlast = 0,\n\t\tinput, output, step, i, length\n\tthis.processor.onaudioprocess = function(e: any) {\n\t\tinput = e.inputBuffer.getChannelData(0),\n\t\toutput = e.outputBuffer.getChannelData(0),\n\t\tstep = Math.pow(1 / 2, this.bits)\n\t\tlength = input.length\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tphaser += this.normfreq\n\t\t\tif (phaser >= 1.0) {\n\t\t\t\tphaser -= 1.0\n\t\t\t\tlast = step * Math.floor(input[i] / step + 0.5)\n\t\t\t}\n\t\t\toutput[i] = last\n\t\t}\n\t}\n\n\tthis.bits = properties.bits || this.defaults.bits.value\n\tthis.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Bitcrusher'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tbits: {\n\t\t\t\tvalue: 4,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 16,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: INT\n\t\t\t},\n\t\t\tbufferSize: {\n\t\t\t\tvalue: 4096,\n\t\t\t\tmin: 256,\n\t\t\t\tmax: 16384,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: INT\n\t\t\t},\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t},\n\t\t\tnormfreq: {\n\t\t\t\tvalue: 0.1,\n\t\t\t\tmin: 0.0001,\n\t\t\t\tmax: 1.0,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tbits: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.processor.bits\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.processor.bits = value\n\t\t}\n\t},\n\tnormfreq: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.processor.normfreq\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.processor.normfreq = value\n\t\t}\n\t}\n})\n\nTuna.prototype.Cabinet = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.convolver = this.newConvolver(properties.impulsePath || '../impulses/impulse_guitar.wav')\n\tthis.makeupNode = userContext.createGain()\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.convolver.input)\n\tthis.convolver.output.connect(this.makeupNode)\n\tthis.makeupNode.connect(this.output)\n\n\tthis.makeupGain = initValue(properties.makeupGain, this.defaults.makeupGain)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Cabinet'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tmakeupGain: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 20,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t}\n\t\t}\n\t},\n\tmakeupGain: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.makeupNode.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.makeupNode.gain.value = value\n\t\t}\n\t},\n\tnewConvolver: {\n\t\tvalue: function(impulsePath: any) {\n\t\t\treturn new userInstance.Convolver({\n\t\t\t\timpulse: impulsePath,\n\t\t\t\tdryLevel: 0,\n\t\t\t\twetLevel: 1\n\t\t\t})\n\t\t}\n\t}\n})\n\nTuna.prototype.Chorus = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.attenuator = this.activateNode = userContext.createGain()\n\tthis.splitter = userContext.createChannelSplitter(2)\n\tthis.delayL = userContext.createDelay()\n\tthis.delayR = userContext.createDelay()\n\tthis.feedbackGainNodeLR = userContext.createGain()\n\tthis.feedbackGainNodeRL = userContext.createGain()\n\tthis.merger = userContext.createChannelMerger(2)\n\tthis.output = userContext.createGain()\n\n\tthis.lfoL = new userInstance.LFO({\n\t\ttarget: this.delayL.delayTime,\n\t\tcallback: pipe\n\t})\n\tthis.lfoR = new userInstance.LFO({\n\t\ttarget: this.delayR.delayTime,\n\t\tcallback: pipe\n\t})\n\n\tthis.input.connect(this.attenuator)\n\tthis.attenuator.connect(this.output)\n\tthis.attenuator.connect(this.splitter)\n\tthis.splitter.connect(this.delayL, 0)\n\tthis.splitter.connect(this.delayR, 1)\n\tthis.delayL.connect(this.feedbackGainNodeLR)\n\tthis.delayR.connect(this.feedbackGainNodeRL)\n\tthis.feedbackGainNodeLR.connect(this.delayR)\n\tthis.feedbackGainNodeRL.connect(this.delayL)\n\tthis.delayL.connect(this.merger, 0, 0)\n\tthis.delayR.connect(this.merger, 0, 1)\n\tthis.merger.connect(this.output)\n\n\tthis.feedback = initValue(properties.feedback, this.defaults.feedback.value)\n\tthis.rate = initValue(properties.rate, this.defaults.rate.value)\n\tthis.delay = initValue(properties.delay, this.defaults.delay.value)\n\tthis.depth = initValue(properties.depth, this.defaults.depth.value)\n\tthis.lfoR.phase = Math.PI / 2\n\tthis.attenuator.gain.value = 0.6934 // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\n\tthis.lfoL.activate(true)\n\tthis.lfoR.activate(true)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Chorus.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Chorus'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tfeedback: {\n\t\t\t\tvalue: 0.4,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 0.95,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tdelay: {\n\t\t\t\tvalue: 0.0045,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tdepth: {\n\t\t\t\tvalue: 0.7,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\trate: {\n\t\t\t\tvalue: 1.5,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 8,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t}\n\t\t}\n\t},\n\tdelay: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._delay\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._delay = 0.0002 * (Math.pow(10, value) * 2)\n\t\t\tthis.lfoL.offset = this._delay\n\t\t\tthis.lfoR.offset = this._delay\n\t\t\tthis._depth = this._depth\n\t\t}\n\t},\n\tdepth: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._depth\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._depth = value\n\t\t\tthis.lfoL.oscillation = this._depth * this._delay\n\t\t\tthis.lfoR.oscillation = this._depth * this._delay\n\t\t}\n\t},\n\tfeedback: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._feedback\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._feedback = value\n\t\t\tthis.feedbackGainNodeLR.gain.value = this._feedback\n\t\t\tthis.feedbackGainNodeRL.gain.value = this._feedback\n\t\t}\n\t},\n\trate: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._rate\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._rate = value\n\t\t\tthis.lfoL.frequency = this._rate\n\t\t\tthis.lfoR.frequency = this._rate\n\t\t}\n\t}\n})\n\nTuna.prototype.Compressor = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.compNode = this.activateNode = userContext.createDynamicsCompressor()\n\tthis.makeupNode = userContext.createGain()\n\tthis.output = userContext.createGain()\n\n\tthis.compNode.connect(this.makeupNode)\n\tthis.makeupNode.connect(this.output)\n\n\tthis.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value)\n\tthis.makeupGain = initValue(properties.makeupGain, this.defaults.makeupGain.value)\n\tthis.threshold = initValue(properties.threshold, this.defaults.threshold.value)\n\tthis.release = initValue(properties.release, this.defaults.release.value)\n\tthis.attack = initValue(properties.attack, this.defaults.attack.value)\n\tthis.ratio = properties.ratio || this.defaults.ratio.value\n\tthis.knee = initValue(properties.knee, this.defaults.knee.value)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Compressor.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Compressor'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tthreshold: {\n\t\t\t\tvalue: -20,\n\t\t\t\tmin: -60,\n\t\t\t\tmax: 0,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\trelease: {\n\t\t\t\tvalue: 250,\n\t\t\t\tmin: 10,\n\t\t\t\tmax: 2000,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tmakeupGain: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 100,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tattack: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1000,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tratio: {\n\t\t\t\tvalue: 4,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 50,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tknee: {\n\t\t\t\tvalue: 5,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 40,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tautomakeup: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t},\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t}\n\t\t}\n\t},\n\tcomputeMakeup: {\n\t\tvalue: function() {\n\t\t\tlet magicCoefficient = 4, // raise me if the output is too hot\n\t\t\t\tc = this.compNode\n\t\t\treturn -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient\n\t\t}\n\t},\n\tautomakeup: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._automakeup\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._automakeup = value\n\t\t\tif (this._automakeup) this.makeupGain = this.computeMakeup()\n\t\t}\n\t},\n\tthreshold: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.compNode.threshold\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.compNode.threshold.value = value\n\t\t\tif (this._automakeup) this.makeupGain = this.computeMakeup()\n\t\t}\n\t},\n\tratio: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.compNode.ratio\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.compNode.ratio.value = value\n\t\t\tif (this._automakeup) this.makeupGain = this.computeMakeup()\n\t\t}\n\t},\n\tknee: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.compNode.knee\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.compNode.knee.value = value\n\t\t\tif (this._automakeup) this.makeupGain = this.computeMakeup()\n\t\t}\n\t},\n\tattack: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.compNode.attack\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.compNode.attack.value = value / 1000\n\t\t}\n\t},\n\trelease: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.compNode.release\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.compNode.release.value = value / 1000\n\t\t}\n\t},\n\tmakeupGain: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.makeupNode.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.makeupNode.gain.value = dbToWAVolume(value)\n\t\t}\n\t}\n})\n\nTuna.prototype.Convolver = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.convolver = userContext.createConvolver()\n\tthis.dry = userContext.createGain()\n\tthis.filterLow = userContext.createBiquadFilter()\n\tthis.filterHigh = userContext.createBiquadFilter()\n\tthis.wet = userContext.createGain()\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.filterLow)\n\tthis.activateNode.connect(this.dry)\n\tthis.filterLow.connect(this.filterHigh)\n\tthis.filterHigh.connect(this.convolver)\n\tthis.convolver.connect(this.wet)\n\tthis.wet.connect(this.output)\n\tthis.dry.connect(this.output)\n\n\tthis.dryLevel = initValue(properties.dryLevel, this.defaults.dryLevel.value)\n\tthis.wetLevel = initValue(properties.wetLevel, this.defaults.wetLevel.value)\n\tthis.highCut = properties.highCut || this.defaults.highCut.value\n\tthis.buffer = properties.impulse || '../impulses/ir_rev_short.wav'\n\tthis.lowCut = properties.lowCut || this.defaults.lowCut.value\n\tthis.level = initValue(properties.level, this.defaults.level.value)\n\tthis.filterHigh.type = 'lowpass'\n\tthis.filterLow.type = 'highpass'\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Convolver.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Convolver'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\thighCut: {\n\t\t\t\tvalue: 22050,\n\t\t\t\tmin: 20,\n\t\t\t\tmax: 22050,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tlowCut: {\n\t\t\t\tvalue: 20,\n\t\t\t\tmin: 20,\n\t\t\t\tmax: 22050,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tdryLevel: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\twetLevel: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tlevel: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tlowCut: {\n\t\tget: function() {\n\t\t\treturn this.filterLow.frequency\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.filterLow.frequency.value = value\n\t\t}\n\t},\n\thighCut: {\n\t\tget: function() {\n\t\t\treturn this.filterHigh.frequency\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.filterHigh.frequency.value = value\n\t\t}\n\t},\n\tlevel: {\n\t\tget: function() {\n\t\t\treturn this.output.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.output.gain.value = value\n\t\t}\n\t},\n\tdryLevel: {\n\t\tget: function() {\n\t\t\treturn this.dry.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.dry.gain.value = value\n\t\t}\n\t},\n\twetLevel: {\n\t\tget: function() {\n\t\t\treturn this.wet.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.wet.gain.value = value\n\t\t}\n\t},\n\tbuffer: {\n\t\tenumerable: false,\n\t\tget: function() {\n\t\t\treturn this.convolver.buffer\n\t\t},\n\t\tset: function(impulse) {\n\t\t\tlet convolver = this.convolver,\n\t\t\t\txhr = new XMLHttpRequest()\n\t\t\tif (!impulse) {\n\t\t\t\tconsole.log('Tuna.Convolver.setBuffer: Missing impulse path!')\n\t\t\t\treturn\n\t\t\t}\n\t\t\txhr.open('GET', impulse, true)\n\t\t\txhr.responseType = 'arraybuffer'\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\tif (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\n\t\t\t\t\t\tuserContext.decodeAudioData(xhr.response, function(buffer) {\n\t\t\t\t\t\t\tconvolver.buffer = buffer\n\t\t\t\t\t\t}, function(e) {\n\t\t\t\t\t\t\tif (e) console.log('Tuna.Convolver.setBuffer: Error decoding data' + e)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\txhr.send(null)\n\t\t}\n\t}\n})\n\nTuna.prototype.Delay = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.dry = userContext.createGain()\n\tthis.wet = userContext.createGain()\n\tthis.filter = userContext.createBiquadFilter()\n\tthis.delay = userContext.createDelay(10)\n\tthis.feedbackNode = userContext.createGain()\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.delay)\n\tthis.activateNode.connect(this.dry)\n\tthis.delay.connect(this.filter)\n\tthis.filter.connect(this.feedbackNode)\n\tthis.feedbackNode.connect(this.delay)\n\tthis.feedbackNode.connect(this.wet)\n\tthis.wet.connect(this.output)\n\tthis.dry.connect(this.output)\n\n\tthis.delayTime = properties.delayTime || this.defaults.delayTime.value\n\tthis.feedback = initValue(properties.feedback, this.defaults.feedback.value)\n\tthis.wetLevel = initValue(properties.wetLevel, this.defaults.wetLevel.value)\n\tthis.dryLevel = initValue(properties.dryLevel, this.defaults.dryLevel.value)\n\tthis.cutoff = properties.cutoff || this.defaults.cutoff.value\n\tthis.filter.type = 'lowpass'\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Delay.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Delay'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tdelayTime: {\n\t\t\t\tvalue: 100,\n\t\t\t\tmin: 20,\n\t\t\t\tmax: 1000,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tfeedback: {\n\t\t\t\tvalue: 0.45,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 0.9,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tcutoff: {\n\t\t\t\tvalue: 20000,\n\t\t\t\tmin: 20,\n\t\t\t\tmax: 20000,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\twetLevel: {\n\t\t\t\tvalue: 0.5,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tdryLevel: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tdelayTime: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.delay.delayTime\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.delay.delayTime.value = value / 1000\n\t\t}\n\t},\n\twetLevel: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.wet.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.wet.gain.value = value\n\t\t}\n\t},\n\tdryLevel: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.dry.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.dry.gain.value = value\n\t\t}\n\t},\n\tfeedback: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.feedbackNode.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.feedbackNode.gain.value = value\n\t\t}\n\t},\n\tcutoff: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.filter.frequency\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.filter.frequency.value = value\n\t\t}\n\t}\n})\n\nTuna.prototype.Filter = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.filter = userContext.createBiquadFilter()\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.filter)\n\tthis.filter.connect(this.output)\n\n\tthis.frequency = properties.frequency || this.defaults.frequency.value\n\tthis.Q = properties.resonance || this.defaults.Q.value\n\tthis.filterType = initValue(properties.filterType, this.defaults.filterType.value)\n\tthis.gain = initValue(properties.gain, this.defaults.gain.value)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Filter.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Filter'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tfrequency: {\n\t\t\t\tvalue: 800,\n\t\t\t\tmin: 20,\n\t\t\t\tmax: 22050,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tQ: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0.001,\n\t\t\t\tmax: 100,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tgain: {\n\t\t\t\tvalue: 0,\n\t\t\t\tmin: -40,\n\t\t\t\tmax: 40,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t},\n\t\t\tfilterType: {\n\t\t\t\tvalue: 'lowpass',\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: STRING\n\t\t\t}\n\t\t}\n\t},\n\tfilterType: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.filter.type\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.filter.type = value\n\t\t}\n\t},\n\tQ: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.filter.Q\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.filter.Q.value = value\n\t\t}\n\t},\n\tgain: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.filter.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.filter.gain.value = value\n\t\t}\n\t},\n\tfrequency: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.filter.frequency\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.filter.frequency.value = value\n\t\t}\n\t}\n})\n\nTuna.prototype.Gain = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.gainNode = userContext.createGain()\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.gainNode)\n\tthis.gainNode.connect(this.output)\n\n\tthis.gain = initValue(properties.gain, this.defaults.gain.value)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Gain.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Gain'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t},\n\t\t\tgain: {\n\t\t\t\tvalue: 1.0,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tgain: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.gainNode.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.gainNode.gain.value = value\n\t\t}\n\t}\n})\n\nTuna.prototype.MoogFilter = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.bufferSize = properties.bufferSize || this.defaults.bufferSize.value\n\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1)\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.processor)\n\tthis.processor.connect(this.output)\n\n\tlet in1: number, in2: number, in3: number, in4: number, out1: number, out2: number, out3: number, out4: number\n\tin1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0\n\tlet input, output, f, fb, i, length, inputFactor\n\tthis.processor.onaudioprocess = function(e: any) {\n\t\tinput = e.inputBuffer.getChannelData(0),\n\t\t\toutput = e.outputBuffer.getChannelData(0),\n\t\t\tf = this.cutoff * 1.16,\n\t\t\tinputFactor = 0.35013 * (f * f) * (f * f)\n\t\tfb = this.resonance * (1.0 - 0.15 * f * f)\n\t\tlength = input.length\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tinput[i] -= out4 * fb\n\t\t\tinput[i] *= inputFactor\n\t\t\tout1 = input[i] + 0.3 * in1 + (1 - f) * out1 // Pole 1\n\t\t\tin1 = input[i]\n\t\t\tout2 = out1 + 0.3 * in2 + (1 - f) * out2 // Pole 2\n\t\t\tin2 = out1\n\t\t\tout3 = out2 + 0.3 * in3 + (1 - f) * out3 // Pole 3\n\t\t\tin3 = out2\n\t\t\tout4 = out3 + 0.3 * in4 + (1 - f) * out4 // Pole 4\n\t\t\tin4 = out3\n\t\t\toutput[i] = out4\n\t\t}\n\t}\n\n\tthis.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value)\n\tthis.resonance = initValue(properties.resonance, this.defaults.resonance.value)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'MoogFilter'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tbufferSize: {\n\t\t\t\tvalue: 4096,\n\t\t\t\tmin: 256,\n\t\t\t\tmax: 16384,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: INT\n\t\t\t},\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t},\n\t\t\tcutoff: {\n\t\t\t\tvalue: 0.065,\n\t\t\t\tmin: 0.0001,\n\t\t\t\tmax: 1.0,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tresonance: {\n\t\t\t\tvalue: 3.5,\n\t\t\t\tmin: 0.0,\n\t\t\t\tmax: 4.0,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tcutoff: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.processor.cutoff\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.processor.cutoff = value\n\t\t}\n\t},\n\tresonance: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.processor.resonance\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.processor.resonance = value\n\t\t}\n\t}\n})\n\nTuna.prototype.Overdrive = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.inputDrive = userContext.createGain()\n\tthis.waveshaper = userContext.createWaveShaper()\n\tthis.outputDrive = userContext.createGain()\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.inputDrive)\n\tthis.inputDrive.connect(this.waveshaper)\n\tthis.waveshaper.connect(this.outputDrive)\n\tthis.outputDrive.connect(this.output)\n\n\tthis.ws_table = new Float32Array(this.k_nSamples)\n\tthis.drive = initValue(properties.drive, this.defaults.drive.value)\n\tthis.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value)\n\tthis.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value)\n\tthis.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Overdrive'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tdrive: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT,\n\t\t\t\tscaled: true\n\t\t\t},\n\t\t\toutputGain: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT,\n\t\t\t\tscaled: true\n\t\t\t},\n\t\t\tcurveAmount: {\n\t\t\t\tvalue: 0.725,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\talgorithmIndex: {\n\t\t\t\tvalue: 0,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 5,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: INT\n\t\t\t}\n\t\t}\n\t},\n\tk_nSamples: {\n\t\tvalue: 8192\n\t},\n\tdrive: {\n\t\tget: function() {\n\t\t\treturn this.inputDrive.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._drive = value\n\t\t}\n\t},\n\tcurveAmount: {\n\t\tget: function() {\n\t\t\treturn this._curveAmount\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._curveAmount = value\n\t\t\tif (this._algorithmIndex === undefined) {\n\t\t\t\tthis._algorithmIndex = 0\n\t\t\t}\n\t\t\tthis.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table)\n\t\t\tthis.waveshaper.curve = this.ws_table\n\t\t}\n\t},\n\toutputGain: {\n\t\tget: function() {\n\t\t\treturn this.outputDrive.gain\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._outputGain = dbToWAVolume(value)\n\t\t}\n\t},\n\talgorithmIndex: {\n\t\tget: function() {\n\t\t\treturn this._algorithmIndex\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._algorithmIndex = value\n\t\t\tthis.curveAmount = this._curveAmount\n\t\t}\n\t},\n\twaveshaperAlgorithms: {\n\t\tvalue: [\n\t\t\tfunction(amount: number, n_samples: number, ws_table: number[]) {\n\t\t\t\tamount = Math.min(amount, 0.9999)\n\t\t\t\tlet k = 2 * amount / (1 - amount),\n\t\t\t\t\ti, x\n\t\t\t\tfor (i = 0; i < n_samples; i++) {\n\t\t\t\t\tx = i * 2 / n_samples - 1\n\t\t\t\t\tws_table[i] = (1 + k) * x / (1 + k * Math.abs(x))\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction(amount: number, n_samples: number, ws_table: number[]) {\n\t\t\t\tlet i, x, y = 0\n\t\t\t\tfor (i = 0; i < n_samples; i++) {\n\t\t\t\t\tx = i * 2 / n_samples - 1\n\t\t\t\t\ty = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * y >= 0 ? 5.8 : 1.2\n\t\t\t\t\tws_table[i] = tanh(y)\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction(amount: number, n_samples: number, ws_table: number[]) {\n\t\t\t\tlet i, x, y, a = 1 - amount\n\t\t\t\tfor (i = 0; i < n_samples; i++) {\n\t\t\t\t\tx = i * 2 / n_samples - 1\n\t\t\t\t\ty = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a)\n\t\t\t\t\tws_table[i] = tanh(y * 2)\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction(amount: number, n_samples: number, ws_table: number[]) {\n\t\t\t\tlet i, x, y = 0, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount\n\t\t\t\tfor (i = 0; i < n_samples; i++) {\n\t\t\t\t\tx = i * 2 / n_samples - 1\n\t\t\t\t\tabx = Math.abs(x)\n\t\t\t\t\tif (abx < a) y = abx\n\t\t\t\t\telse if (abx > a) y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2))\n\t\t\t\t\telse if (abx > 1) y = abx\n\t\t\t\t\tws_table[i] = sign(x) * y * (1 / ((a + 1) / 2))\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction(amount: number, n_samples: number, ws_table: number[]) {\n\t\t\t\t// fixed curve, amount doesn't do anything, the distortion is just from the drive\n\t\t\t\tlet i, x\n\t\t\t\tfor (i = 0; i < n_samples; i++) {\n\t\t\t\t\tx = i * 2 / n_samples - 1\n\t\t\t\t\tif (x < -0.08905) {\n\t\t\t\t\t\tws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01\n\t\t\t\t\t} else if (x >= -0.08905 && x < 0.320018) {\n\t\t\t\t\t\tws_table[i] = (-6.153 * (x * x)) + 3.9375 * x\n\t\t\t\t\t} else {\n\t\t\t\t\t\tws_table[i] = 0.630035\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction(amount: number, n_samples: number, ws_table: number[]) {\n\t\t\t\tlet a = 2 + Math.round(amount * 14),\n\t\t\t\t\t// we go from 2 to 16 bits, keep in mind for the UI\n\t\t\t\t\tbits = Math.round(Math.pow(2, a - 1)),\n\t\t\t\t\t// real number of quantization steps divided by 2\n\t\t\t\t\ti, x\n\t\t\t\tfor (i = 0; i < n_samples; i++) {\n\t\t\t\t\tx = i * 2 / n_samples - 1\n\t\t\t\t\tws_table[i] = Math.round(x * bits) / bits\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t}\n})\n\nTuna.prototype.Panner = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.panner = userContext.createStereoPanner()\n\tthis.output = userContext.createGain()\n\n\tthis.activateNode.connect(this.panner)\n\tthis.panner.connect(this.output)\n\n\tthis.pan = initValue(properties.pan, this.defaults.pan.value)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Panner.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Panner'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tbypass: {\n\t\t\t\tvalue: false,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t},\n\t\t\tpan: {\n\t\t\t\tvalue: 0.0,\n\t\t\t\tmin: -1.0,\n\t\t\t\tmax: 1.0,\n\t\t\t\tautomatable: true,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tpan: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.panner.pan\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.panner.pan.value = value\n\t\t}\n\t}\n})\n\nTuna.prototype.Phaser = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.splitter = this.activateNode = userContext.createChannelSplitter(2)\n\tthis.filtersL = []\n\tthis.filtersR = []\n\tthis.feedbackGainNodeL = userContext.createGain()\n\tthis.feedbackGainNodeR = userContext.createGain()\n\tthis.merger = userContext.createChannelMerger(2)\n\tthis.filteredSignal = userContext.createGain()\n\tthis.output = userContext.createGain()\n\tthis.lfoL = new userInstance.LFO({\n\t\ttarget: this.filtersL,\n\t\tcallback: this.callback\n\t})\n\tthis.lfoR = new userInstance.LFO({\n\t\ttarget: this.filtersR,\n\t\tcallback: this.callback\n\t})\n\n\tlet i = this.stage\n\twhile (i--) {\n\t\tthis.filtersL[i] = userContext.createBiquadFilter()\n\t\tthis.filtersR[i] = userContext.createBiquadFilter()\n\t\tthis.filtersL[i].type = 'allpass'\n\t\tthis.filtersR[i].type = 'allpass'\n\t}\n\tthis.input.connect(this.splitter)\n\tthis.input.connect(this.output)\n\tthis.splitter.connect(this.filtersL[0], 0, 0)\n\tthis.splitter.connect(this.filtersR[0], 1, 0)\n\tthis.connectInOrder(this.filtersL)\n\tthis.connectInOrder(this.filtersR)\n\tthis.filtersL[this.stage - 1].connect(this.feedbackGainNodeL)\n\tthis.filtersL[this.stage - 1].connect(this.merger, 0, 0)\n\tthis.filtersR[this.stage - 1].connect(this.feedbackGainNodeR)\n\tthis.filtersR[this.stage - 1].connect(this.merger, 0, 1)\n\tthis.feedbackGainNodeL.connect(this.filtersL[0])\n\tthis.feedbackGainNodeR.connect(this.filtersR[0])\n\tthis.merger.connect(this.output)\n\n\tthis.rate = initValue(properties.rate, this.defaults.rate.value)\n\tthis.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value\n\tthis.depth = initValue(properties.depth, this.defaults.depth.value)\n\tthis.feedback = initValue(properties.feedback, this.defaults.feedback.value)\n\tthis.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value)\n\n\tthis.lfoL.activate(true)\n\tthis.lfoR.activate(true)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Phaser.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Phaser'\n\t},\n\tstage: {\n\t\tvalue: 4\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\trate: {\n\t\t\t\tvalue: 0.1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 8,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tdepth: {\n\t\t\t\tvalue: 0.6,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tfeedback: {\n\t\t\t\tvalue: 0.7,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tstereoPhase: {\n\t\t\t\tvalue: 40,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 180,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tbaseModulationFrequency: {\n\t\t\t\tvalue: 700,\n\t\t\t\tmin: 500,\n\t\t\t\tmax: 1500,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tcallback: {\n\t\tvalue: function(filters: any[], value: number) {\n\t\t\tfor (let stage = 0; stage < 4; stage++) {\n\t\t\t\tfilters[stage].frequency.value = value\n\t\t\t}\n\t\t}\n\t},\n\tdepth: {\n\t\tget: function() {\n\t\t\treturn this._depth\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._depth = value\n\t\t\tthis.lfoL.oscillation = this._baseModulationFrequency * this._depth\n\t\t\tthis.lfoR.oscillation = this._baseModulationFrequency * this._depth\n\t\t}\n\t},\n\trate: {\n\t\tget: function() {\n\t\t\treturn this._rate\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._rate = value\n\t\t\tthis.lfoL.frequency = this._rate\n\t\t\tthis.lfoR.frequency = this._rate\n\t\t}\n\t},\n\tbaseModulationFrequency: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._baseModulationFrequency\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._baseModulationFrequency = value\n\t\t\tthis.lfoL.offset = this._baseModulationFrequency\n\t\t\tthis.lfoR.offset = this._baseModulationFrequency\n\t\t\tthis._depth = this._depth\n\t\t}\n\t},\n\tfeedback: {\n\t\tget: function() {\n\t\t\treturn this._feedback\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._feedback = value\n\t\t\tthis.feedbackGainNodeL.gain.value = this._feedback\n\t\t\tthis.feedbackGainNodeR.gain.value = this._feedback\n\t\t}\n\t},\n\tstereoPhase: {\n\t\tget: function() {\n\t\t\treturn this._stereoPhase\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._stereoPhase = value\n\t\t\tlet newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180\n\t\t\tnewPhase = fmod(newPhase, 2 * Math.PI)\n\t\t\tthis.lfoR._phase = newPhase\n\t\t}\n\t}\n})\n\nTuna.prototype.PingPongDelay = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.wetLevel = userContext.createGain()\n\tthis.stereoToMonoMix = userContext.createGain()\n\tthis.feedbackLevel = userContext.createGain()\n\tthis.output = userContext.createGain()\n\tthis.delayLeft = userContext.createDelay(10)\n\tthis.delayRight = userContext.createDelay(10)\n\n\tthis.activateNode = userContext.createGain()\n\tthis.splitter = userContext.createChannelSplitter(2)\n\tthis.merger = userContext.createChannelMerger(2)\n\n\tthis.activateNode.connect(this.splitter)\n\tthis.splitter.connect(this.stereoToMonoMix, 0, 0)\n\tthis.splitter.connect(this.stereoToMonoMix, 1, 0)\n\tthis.stereoToMonoMix.gain.value = .5\n\tthis.stereoToMonoMix.connect(this.wetLevel)\n\tthis.wetLevel.connect(this.delayLeft)\n\tthis.feedbackLevel.connect(this.delayLeft)\n\tthis.delayLeft.connect(this.delayRight)\n\tthis.delayRight.connect(this.feedbackLevel)\n\tthis.delayLeft.connect(this.merger, 0, 0)\n\tthis.delayRight.connect(this.merger, 0, 1)\n\tthis.merger.connect(this.output)\n\tthis.activateNode.connect(this.output)\n\n\tthis.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value\n\tthis.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value\n\tthis.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value\n\tthis.wetLevel.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'PingPongDelay'\n\t},\n\tdelayTimeLeft: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._delayTimeLeft\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._delayTimeLeft = value\n\t\t\tthis.delayLeft.delayTime.value = value / 1000\n\t\t}\n\t},\n\tdelayTimeRight: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._delayTimeRight\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._delayTimeRight = value\n\t\t\tthis.delayRight.delayTime.value = value / 1000\n\t\t}\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tdelayTimeLeft: {\n\t\t\t\tvalue: 200,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 10000,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: INT\n\t\t\t},\n\t\t\tdelayTimeRight: {\n\t\t\t\tvalue: 400,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 10000,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: INT\n\t\t\t},\n\t\t\tfeedback: {\n\t\t\t\tvalue: 0.3,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\twetLevel: {\n\t\t\t\tvalue: 0.5,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t}\n})\n\nTuna.prototype.Tremolo = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.splitter = this.activateNode = userContext.createChannelSplitter(\n\t\t\t2),\n\t\tthis.amplitudeL = userContext.createGain(),\n\t\tthis.amplitudeR = userContext.createGain(),\n\t\tthis.merger = userContext.createChannelMerger(2),\n\t\tthis.output = userContext.createGain()\n\tthis.lfoL = new userInstance.LFO({\n\t\ttarget: this.amplitudeL.gain,\n\t\tcallback: pipe\n\t})\n\tthis.lfoR = new userInstance.LFO({\n\t\ttarget: this.amplitudeR.gain,\n\t\tcallback: pipe\n\t})\n\n\tthis.input.connect(this.splitter)\n\tthis.splitter.connect(this.amplitudeL, 0)\n\tthis.splitter.connect(this.amplitudeR, 1)\n\tthis.amplitudeL.connect(this.merger, 0, 0)\n\tthis.amplitudeR.connect(this.merger, 0, 1)\n\tthis.merger.connect(this.output)\n\n\tthis.rate = properties.rate || this.defaults.rate.value\n\tthis.intensity = initValue(properties.intensity, this.defaults.intensity.value)\n\tthis.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value)\n\n\tthis.lfoL.offset = 1 - (this.intensity / 2)\n\tthis.lfoR.offset = 1 - (this.intensity / 2)\n\tthis.lfoL.phase = this.stereoPhase * Math.PI / 180\n\n\tthis.lfoL.activate(true)\n\tthis.lfoR.activate(true)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'Tremolo'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tintensity: {\n\t\t\t\tvalue: 0.3,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tstereoPhase: {\n\t\t\t\tvalue: 0,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 180,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\trate: {\n\t\t\t\tvalue: 5,\n\t\t\t\tmin: 0.1,\n\t\t\t\tmax: 11,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tintensity: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._intensity\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._intensity = value\n\t\t\tthis.lfoL.offset = 1 - this._intensity / 2\n\t\t\tthis.lfoR.offset = 1 - this._intensity / 2\n\t\t\tthis.lfoL.oscillation = this._intensity\n\t\t\tthis.lfoR.oscillation = this._intensity\n\t\t}\n\t},\n\trate: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._rate\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._rate = value\n\t\t\tthis.lfoL.frequency = this._rate\n\t\t\tthis.lfoR.frequency = this._rate\n\t\t}\n\t},\n\tstereoPhase: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._stereoPhase\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._stereoPhase = value\n\t\t\tlet newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180\n\t\t\tnewPhase = fmod(newPhase, 2 * Math.PI)\n\t\t\tthis.lfoR.phase = newPhase\n\t\t}\n\t}\n})\n\nTuna.prototype.WahWah = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.activateNode = userContext.createGain()\n\tthis.envelopeFollower = new userInstance.EnvelopeFollower({\n\t\ttarget: this,\n\t\tcallback: function(context: any, value: number) {\n\t\t\tcontext.sweep = value\n\t\t}\n\t})\n\tthis.filterBp = userContext.createBiquadFilter()\n\tthis.filterPeaking = userContext.createBiquadFilter()\n\tthis.output = userContext.createGain()\n\n\t// Connect AudioNodes\n\tthis.activateNode.connect(this.filterBp)\n\tthis.filterBp.connect(this.filterPeaking)\n\tthis.filterPeaking.connect(this.output)\n\n\t// Set Properties\n\tthis.init()\n\tthis.automode = initValue(properties.automode, this.defaults.automode.value)\n\tthis.resonance = properties.resonance || this.defaults.resonance.value\n\tthis.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value)\n\tthis.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value)\n\tthis.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value\n\tthis.sweep = initValue(properties.sweep, this.defaults.sweep.value)\n\n\tthis.activateNode.gain.value = 2\n\tthis.envelopeFollower.activate(true)\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.WahWah.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'WahWah'\n\t},\n\tdefaults: {\n\t\twritable: true,\n\t\tvalue: {\n\t\t\tautomode: {\n\t\t\t\tvalue: true,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: BOOLEAN\n\t\t\t},\n\t\t\tbaseFrequency: {\n\t\t\t\tvalue: 0.5,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\texcursionOctaves: {\n\t\t\t\tvalue: 2,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 6,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tsweep: {\n\t\t\t\tvalue: 0.2,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tresonance: {\n\t\t\t\tvalue: 10,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 100,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tsensitivity: {\n\t\t\t\tvalue: 0.5,\n\t\t\t\tmin: -1,\n\t\t\t\tmax: 1,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tautomode: {\n\t\tget: function() {\n\t\t\treturn this._automode\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._automode = value\n\t\t\tif (value) {\n\t\t\t\tthis.activateNode.connect(this.envelopeFollower.input)\n\t\t\t\tthis.envelopeFollower.activate(true)\n\t\t\t} else {\n\t\t\t\tthis.envelopeFollower.activate(false)\n\t\t\t\tthis.activateNode.disconnect()\n\t\t\t\tthis.activateNode.connect(this.filterBp)\n\t\t\t}\n\t\t}\n\t},\n\tfilterFreqTimeout: {\n\t\twritable: true,\n\t\tvalue: 0\n\t},\n\tsetFilterFreq: {\n\t\tvalue: function() {\n\t\t\ttry {\n\t\t\t\tthis.filterBp.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep)\n\t\t\t\tthis.filterPeaking.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep)\n\t\t\t} catch (e) {\n\t\t\t\tclearTimeout(this.filterFreqTimeout)\n\t\t\t\t// put on the next cycle to let all init properties be set\n\t\t\t\tthis.filterFreqTimeout = setTimeout(function() {\n\t\t\t\t\tthis.setFilterFreq()\n\t\t\t\t}.bind(this), 0)\n\t\t\t}\n\t\t}\n\t},\n\tsweep: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._sweep\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity)\n\t\t\tthis.setFilterFreq()\n\t\t}\n\t},\n\tbaseFrequency: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._baseFrequency\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._baseFrequency = 50 * Math.pow(10, value * 2)\n\t\t\tthis._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves))\n\t\t\tthis.setFilterFreq()\n\t\t}\n\t},\n\texcursionOctaves: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._excursionOctaves\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._excursionOctaves = value\n\t\t\tthis._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves))\n\t\t\tthis.setFilterFreq()\n\t\t}\n\t},\n\tsensitivity: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._sensitivity\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._sensitivity = Math.pow(10, value)\n\t\t}\n\t},\n\tresonance: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._resonance\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._resonance = value\n\t\t\tthis.filterPeaking.Q.value = this._resonance\n\t\t}\n\t},\n\tinit: {\n\t\tvalue: function() {\n\t\t\tthis.output.gain.value = 1\n\t\t\tthis.filterPeaking.type = 'peaking'\n\t\t\tthis.filterBp.type = 'bandpass'\n\t\t\tthis.filterPeaking.frequency.value = 100\n\t\t\tthis.filterPeaking.gain.value = 20\n\t\t\tthis.filterPeaking.Q.value = 5\n\t\t\tthis.filterBp.frequency.value = 100\n\t\t\tthis.filterBp.Q.value = 1\n\t\t}\n\t}\n})\n\nTuna.prototype.EnvelopeFollower = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\tthis.input = userContext.createGain()\n\tthis.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1)\n\n\tthis.input.connect(this.output)\n\n\tthis.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value)\n\tthis.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value)\n\tthis._envelope = 0\n\tthis.target = properties.target || {}\n\tthis.callback = properties.callback || function() {}\n\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'EnvelopeFollower'\n\t},\n\tdefaults: {\n\t\tvalue: {\n\t\t\tattackTime: {\n\t\t\t\tvalue: 0.003,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 0.5,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\treleaseTime: {\n\t\t\t\tvalue: 0.5,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 0.5,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tbuffersize: {\n\t\tvalue: 256\n\t},\n\tenvelope: {\n\t\tvalue: 0\n\t},\n\tsampleRate: {\n\t\tvalue: 44100\n\t},\n\tattackTime: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._attackTime\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._attackTime = value\n\t\t\tthis._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize)\n\t\t}\n\t},\n\treleaseTime: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this._releaseTime\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._releaseTime = value\n\t\t\tthis._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize)\n\t\t}\n\t},\n\tcallback: {\n\t\tget: function() {\n\t\t\treturn this._callback\n\t\t},\n\t\tset: function(value) {\n\t\t\tif (typeof value === 'function') {\n\t\t\t\tthis._callback = value\n\t\t\t} else {\n\t\t\t\tconsole.error('tuna.js: ' + this.name + ': Callback must be a function!')\n\t\t\t}\n\t\t}\n\t},\n\ttarget: {\n\t\tget: function() {\n\t\t\treturn this._target\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._target = value\n\t\t}\n\t},\n\tactivate: {\n\t\tvalue: function(doActivate: boolean) {\n\t\t\tthis.activated = doActivate\n\t\t\tif (doActivate) {\n\t\t\t\tthis.jsNode.connect(userContext.destination)\n\t\t\t\tthis.jsNode.onaudioprocess = this.returnCompute(this)\n\t\t\t} else {\n\t\t\t\tthis.jsNode.disconnect()\n\t\t\t\tthis.jsNode.onaudioprocess = null\n\t\t\t}\n\t\t\tif (this.activateCallback) {\n\t\t\t\tthis.activateCallback(doActivate)\n\t\t\t}\n\t\t}\n\t},\n\treturnCompute: {\n\t\tvalue: function(instance: any) {\n\t\t\treturn function(event: any) {\n\t\t\t\tinstance.compute(event)\n\t\t\t}\n\t\t}\n\t},\n\tcompute: {\n\t\tvalue: function(event: any) {\n\t\t\tlet count = event.inputBuffer.getChannelData(0).length,\n\t\t\t\tchannels = event.inputBuffer.numberOfChannels,\n\t\t\t\tcurrent, chan, rms, i\n\t\t\tchan = rms = i = 0\n\t\t\tif (channels > 1) { // need to mixdown\n\t\t\t\tfor (i = 0; i < count; ++i) {\n\t\t\t\t\tfor (; chan < channels; ++chan) {\n\t\t\t\t\t\tcurrent = event.inputBuffer.getChannelData(chan)[i]\n\t\t\t\t\t\trms += (current * current) / channels\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < count; ++i) {\n\t\t\t\t\tcurrent = event.inputBuffer.getChannelData(0)[i]\n\t\t\t\t\trms += (current * current)\n\t\t\t\t}\n\t\t\t}\n\t\t\trms = Math.sqrt(rms)\n\n\t\t\tif (this._envelope < rms) {\n\t\t\t\tthis._envelope *= this._attackC\n\t\t\t\tthis._envelope += (1 - this._attackC) * rms\n\t\t\t} else {\n\t\t\t\tthis._envelope *= this._releaseC\n\t\t\t\tthis._envelope += (1 - this._releaseC) * rms\n\t\t\t}\n\t\t\tthis._callback(this._target, this._envelope)\n\t\t}\n\t}\n})\n\nTuna.prototype.LFO = function(properties: any) {\n\tif (!properties) {\n\t\tproperties = this.getDefaults()\n\t}\n\n\t// Instantiate AudioNode\n\tthis.input = userContext.createGain()\n\tthis.output = userContext.createScriptProcessor(256, 1, 1)\n\tthis.activateNode = userContext.destination\n\n\t// Set Properties\n\tthis.frequency = initValue(properties.frequency, this.defaults.frequency.value)\n\tthis.offset = initValue(properties.offset, this.defaults.offset.value)\n\tthis.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value)\n\tthis.phase = initValue(properties.phase, this.defaults.phase.value)\n\tthis.target = properties.target || {}\n\tthis.output.onaudioprocess = this.callback(properties.callback || function() {})\n\tthis.bypass = properties.bypass || false\n}\nTuna.prototype.LFO.prototype = Object.create(Super, {\n\tname: {\n\t\tvalue: 'LFO'\n\t},\n\tbufferSize: {\n\t\tvalue: 256\n\t},\n\tsampleRate: {\n\t\tvalue: 44100\n\t},\n\tdefaults: {\n\t\tvalue: {\n\t\t\tfrequency: {\n\t\t\t\tvalue: 1,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 20,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\toffset: {\n\t\t\t\tvalue: 0.85,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 22049,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\toscillation: {\n\t\t\t\tvalue: 0.3,\n\t\t\t\tmin: -22050,\n\t\t\t\tmax: 22050,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t},\n\t\t\tphase: {\n\t\t\t\tvalue: 0,\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 2 * Math.PI,\n\t\t\t\tautomatable: false,\n\t\t\t\ttype: FLOAT\n\t\t\t}\n\t\t}\n\t},\n\tfrequency: {\n\t\tget: function() {\n\t\t\treturn this._frequency\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._frequency = value\n\t\t\tthis._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate\n\t\t}\n\t},\n\toffset: {\n\t\tget: function() {\n\t\t\treturn this._offset\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._offset = value\n\t\t}\n\t},\n\toscillation: {\n\t\tget: function() {\n\t\t\treturn this._oscillation\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._oscillation = value\n\t\t}\n\t},\n\tphase: {\n\t\tget: function() {\n\t\t\treturn this._phase\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._phase = value\n\t\t}\n\t},\n\ttarget: {\n\t\tget: function() {\n\t\t\treturn this._target\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis._target = value\n\t\t}\n\t},\n\tactivate: {\n\t\tvalue: function(doActivate: boolean) {\n\t\t\tif (doActivate) {\n\t\t\t\tthis.output.connect(userContext.destination)\n\t\t\t\tif (this.activateCallback) {\n\t\t\t\t\tthis.activateCallback(doActivate)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.output.disconnect()\n\t\t\t}\n\t\t}\n\t},\n\tcallback: {\n\t\tvalue: function(callback: any) {\n\t\t\tlet that = this\n\t\t\treturn function() {\n\t\t\t\tthat._phase += that._phaseInc\n\t\t\t\tif (that._phase > 2 * Math.PI) {\n\t\t\t\t\tthat._phase = 0\n\t\t\t\t}\n\t\t\t\tcallback(that._target, that._offset + that._oscillation * Math.sin(that._phase))\n\t\t\t}\n\t\t}\n\t}\n})\n\nTuna.toString = Tuna.prototype.toString = function() {\n\treturn 'Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/third-party/tuna.ts","export let WebAudioFontPlayer: any = WebAudioFontPlayerConstructor\n\n\nfunction WebAudioFontPlayerConstructor() {\n\tthis.envelopes = []\n\tthis.onCacheFinish = null\n\tthis.onCacheProgress = null\n\tthis.afterTime = 0.05\n\tthis.nearZero = 0.000001\n\n\tthis.queueWaveTable = function(\n\t\taudioContext: AudioContext,\n\t\ttarget: AudioNode,\n\t\tpreset: any,\n\t\twhen: number, pitch: number,\n\t\tduration: number, volume: number, slides: any[]) {\n\t\tif (volume) {\n\t\t\tvolume = 1.0 * volume\n\t\t} else {\n\t\t\tvolume = 1.0\n\t\t}\n\t\tlet zone = this.findZone(audioContext, preset, pitch)\n\t\tif (!(zone.buffer))\n\t\t\tthrow new Error('Preset is not ready: empty buffer')\n\t\tlet baseDetune = zone.originalPitch - 100.0 * zone.coarseTune - zone.fineTune\n\t\tlet playbackRate = 1.0 * Math.pow(2, (100.0 * pitch - baseDetune) / 1200.0)\n\t\tlet sampleRatio = zone.sampleRate / audioContext.sampleRate\n\t\tlet startWhen = when\n\t\tif (startWhen < audioContext.currentTime) {\n\t\t\tstartWhen = audioContext.currentTime\n\t\t}\n\t\tlet waveDuration = duration + this.afterTime\n\t\tlet loop = true\n\t\tif (zone.loopStart < 1 || zone.loopStart >= zone.loopEnd) {\n\t\t\tloop = false\n\t\t}\n\t\tif (!loop) {\n\t\t\tif (waveDuration > zone.buffer.duration / playbackRate) {\n\t\t\t\twaveDuration = zone.buffer.duration / playbackRate\n\t\t\t}\n\t\t}\n\t\tlet envelope = this.findEnvelope(audioContext, target, startWhen, waveDuration)\n\t\tthis.setupEnvelope(audioContext, envelope, zone, volume, startWhen, waveDuration, duration)\n\t\tenvelope.audioBufferSourceNode = audioContext.createBufferSource()\n\t\tenvelope.audioBufferSourceNode.playbackRate.value = playbackRate\n\t\tif (slides) {\n\t\t\tif (slides.length > 0) {\n\t\t\t\tenvelope.audioBufferSourceNode.playbackRate.setValueAtTime(playbackRate, when)\n\t\t\t\tfor (let i = 0; i < slides.length; i++) {\n\t\t\t\t\tlet newPlaybackRate = 1.0 * Math.pow(2, (100.0 * slides[i].pitch - baseDetune) / 1200.0)\n\t\t\t\t\tlet newWhen = when + slides[i].when\n\t\t\t\t\tenvelope.audioBufferSourceNode.playbackRate.linearRampToValueAtTime(newPlaybackRate, newWhen)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tenvelope.audioBufferSourceNode.buffer = zone.buffer\n\t\tif (loop) {\n\t\t\tenvelope.audioBufferSourceNode.loop = true\n\t\t\tenvelope.audioBufferSourceNode.loopStart = zone.loopStart / zone.sampleRate + zone.delay\n\t\t\tenvelope.audioBufferSourceNode.loopEnd = zone.loopEnd / zone.sampleRate + zone.delay\n\t\t} else {\n\t\t\tenvelope.audioBufferSourceNode.loop = false\n\t\t}\n\t\tenvelope.audioBufferSourceNode.connect(envelope)\n\t\tenvelope.audioBufferSourceNode.start(startWhen, zone.delay)\n\t\tenvelope.audioBufferSourceNode.stop(startWhen + waveDuration)\n\t\tenvelope.when = startWhen\n\t\tenvelope.duration = waveDuration\n\t\tenvelope.pitch = pitch\n\t\tenvelope.preset = preset\n\t\treturn envelope\n\t}\n\n\tthis.noZeroVolume = function(n: number) {\n\t\tif (n > this.nearZero) {\n\t\t\treturn n\n\t\t} else {\n\t\t\treturn this.nearZero\n\t\t}\n\t}\n\n\tthis.setupEnvelope = function(\n\t\taudioContext: AudioContext,\n\t\tenvelope: any, zone: any,\n\t\tvolume: number, when: number,\n\t\tsampleDuration: number, noteDuration: number) {\n\t\tenvelope.gain.setValueAtTime(this.noZeroVolume(0), audioContext.currentTime)\n\t\tlet lastTime = 0\n\t\tlet lastVolume = 0\n\t\tlet duration = noteDuration\n\t\tlet ahdsr = zone.ahdsr\n\t\tif (sampleDuration < duration + this.afterTime) {\n\t\t\tduration = sampleDuration - this.afterTime\n\t\t}\n\t\tif (ahdsr) {\n\t\t\tif (!(ahdsr.length > 0)) {\n\t\t\t\tahdsr = [{\n\t\t\t\t\t\tduration : 0,\n\t\t\t\t\t\tvolume : 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\tduration : 0.5,\n\t\t\t\t\t\tvolume : 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\tduration : 1.5,\n\t\t\t\t\t\tvolume : 0.5\n\t\t\t\t\t}, {\n\t\t\t\t\t\tduration : 3,\n\t\t\t\t\t\tvolume : 0\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t} else {\n\t\t\tahdsr = [{\n\t\t\t\t\tduration : 0,\n\t\t\t\t\tvolume : 1\n\t\t\t\t}, {\n\t\t\t\t\tduration : duration,\n\t\t\t\t\tvolume : 1\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t\tenvelope.gain.cancelScheduledValues(when)\n\t\tenvelope.gain.setValueAtTime(this.noZeroVolume(ahdsr[0].volume * volume), when)\n\t\tfor (let i = 0; i < ahdsr.length; i++) {\n\t\t\tif (ahdsr[i].duration > 0) {\n\t\t\t\tif (ahdsr[i].duration + lastTime > duration) {\n\t\t\t\t\tlet r = 1 - (ahdsr[i].duration + lastTime - duration) / ahdsr[i].duration\n\t\t\t\t\tlet n = lastVolume - r * (lastVolume - ahdsr[i].volume)\n\t\t\t\t\tenvelope.gain.linearRampToValueAtTime(this.noZeroVolume(volume * n), when + duration)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tlastTime = lastTime + ahdsr[i].duration\n\t\t\t\tlastVolume = ahdsr[i].volume\n\t\t\t\tenvelope.gain.linearRampToValueAtTime(this.noZeroVolume(volume * lastVolume), when + lastTime)\n\t\t\t}\n\t\t}\n\t\tenvelope.gain.linearRampToValueAtTime(this.noZeroVolume(0), when + duration + this.afterTime)\n\t}\n\n\tthis.numValue = function(aValue: any, defValue: any) {\n\t\tif (typeof aValue === 'number') {\n\t\t\treturn aValue\n\t\t} else {\n\t\t\treturn defValue\n\t\t}\n\t}\n\n\tthis.findEnvelope = function(\n\t\taudioContext: AudioContext, target: AudioNode,\n\t\twhen: number, duration: number) {\n\t\tlet envelope: any = null\n\t\tfor (let i = 0; i < this.envelopes.length; i++) {\n\t\t\tlet e = this.envelopes[i]\n\t\t\tif (this.expireEnvelope(e, audioContext)) {\n\t\t\t\tenvelope = e\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (!(envelope)) {\n\t\t\tenvelope = audioContext.createGain()\n\t\t\tenvelope.target = target\n\t\t\tenvelope.connect(target)\n\t\t\tenvelope.cancel = function(time?: number) {\n\t\t\t\tif (time === undefined) time = audioContext.currentTime\n\t\t\t\tif (envelope.when + envelope.duration > audioContext.currentTime) {\n\t\t\t\t\tenvelope.gain.cancelScheduledValues(time)\n\t\t\t\t\tenvelope.gain.setTargetAtTime(0.00001, time, 0.1)\n\t\t\t\t\tenvelope.when = time + 0.00001\n\t\t\t\t\tenvelope.duration = 0\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.envelopes.push(envelope)\n\t\t}\n\t\treturn envelope\n\t}\n\n\tthis.expireEnvelope = function(e: any, ctx: AudioContext) {\n\t\tif (ctx.currentTime > e.when + e.duration + 0.1) {\n\t\t\ttry {\n\t\t\t\te.audioBufferSourceNode.disconnect()\n\t\t\t\te.audioBufferSourceNode.stop(0)\n\t\t\t\te.audioBufferSourceNode = null\n\t\t\t} catch (x) {\n\t\t\t\t// audioBufferSourceNode is dead already\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tthis.expireEnvelopes = function(ctx: AudioContext) {\n\t\tthis.envelopes = this.envelopes.filter(\n\t\t\t(e: any) => !this.expireEnvelope(e, ctx)\n\t\t)\n\t}\n\n\tthis.adjustPreset = function(\n\t\taudioContext: AudioContext, preset: any, cb?: () => void) {\n\t\tpreset.bufferct = 0\n\t\tfor (let i = 0; i < preset.zones.length; i++) {\n\t\t\tthis.adjustZone(audioContext, preset.zones[i], preset, cb)\n\t\t}\n\t}\n\n\tthis.adjustZone = function(\n\t\taudioContext: AudioContext, zone: any, preset: any, cb?: () => void) {\n\t\tif (zone.buffer) {\n\t\t\t//\n\t\t} else {\n\t\t\tzone.delay = 0\n\t\t\tif (zone.sample) {\n\t\t\t\tlet decoded = atob(zone.sample)\n\t\t\t\tzone.buffer = audioContext.createBuffer(1, decoded.length / 2, zone.sampleRate)\n\t\t\t\tlet float32Array = zone.buffer.getChannelData(0)\n\t\t\t\tlet b1,\n\t\t\t\tb2,\n\t\t\t\tn\n\t\t\t\tfor (let i = 0; i < decoded.length / 2; i++) {\n\t\t\t\t\tb1 = decoded.charCodeAt(i * 2)\n\t\t\t\t\tb2 = decoded.charCodeAt(i * 2 + 1)\n\t\t\t\t\tif (b1 < 0) {\n\t\t\t\t\t\tb1 = 256 + b1\n\t\t\t\t\t}\n\t\t\t\t\tif (b2 < 0) {\n\t\t\t\t\t\tb2 = 256 + b2\n\t\t\t\t\t}\n\t\t\t\t\tn = b2 * 256 + b1\n\t\t\t\t\tif (n >= 65536 / 2) {\n\t\t\t\t\t\tn = n - 65536\n\t\t\t\t\t}\n\t\t\t\t\tfloat32Array[i] = n / 65536.0\n\t\t\t\t}\n\t\t\t\tpreset.bufferct++\n\t\t\t\tif (preset.bufferct >= preset.zones.length && cb) cb()\n\t\t\t} else {\n\t\t\t\tif (zone.file) {\n\t\t\t\t\tlet datalen = zone.file.length\n\t\t\t\t\tlet arraybuffer = new ArrayBuffer(datalen)\n\t\t\t\t\tlet view = new Uint8Array(arraybuffer)\n\t\t\t\t\tlet decoded = atob(zone.file)\n\t\t\t\t\tlet b\n\t\t\t\t\tfor (let i = 0; i < decoded.length; i++) {\n\t\t\t\t\t\tb = decoded.charCodeAt(i)\n\t\t\t\t\t\tview[i] = b\n\t\t\t\t\t}\n\t\t\t\t\taudioContext.decodeAudioData(arraybuffer, function(audioBuffer) {\n\t\t\t\t\t\tzone.buffer = audioBuffer\n\t\t\t\t\t\tpreset.bufferct++\n\t\t\t\t\t\tif (preset.bufferct >= preset.zones.length && cb) cb()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tzone.loopStart = this.numValue(zone.loopStart, 0)\n\t\t\tzone.loopEnd = this.numValue(zone.loopEnd, 0)\n\t\t\tzone.coarseTune = this.numValue(zone.coarseTune, 0)\n\t\t\tzone.fineTune = this.numValue(zone.fineTune, 0)\n\t\t\tzone.originalPitch = this.numValue(zone.originalPitch, 6000)\n\t\t\tzone.sampleRate = this.numValue(zone.sampleRate, 44100)\n\t\t\tzone.sustain = this.numValue(zone.originalPitch, 0)\n\t\t}\n\t}\n\n\tthis.findZone = function(\n\t\taudioContext: AudioContext, preset: any, pitch: number) {\n\t\tlet zone = null\n\t\tfor (let i = preset.zones.length - 1; i >= 0; i--) {\n\t\t\tzone = preset.zones[i]\n\t\t\tif (zone.keyRangeLow <= pitch && zone.keyRangeHigh + 1 >= pitch) {\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\tthis.adjustZone(audioContext, zone)\n\t\t} catch (ex) {\n\t\t\tconsole.log('adjustZone', ex)\n\t\t}\n\t\treturn zone\n\t}\n\n\tthis.cancelQueue = function(audioContext: AudioContext) {\n\t\tfor (let i = 0; i < this.envelopes.length; i++) {\n\t\t\tlet e = this.envelopes[i]\n\t\t\te.gain.cancelScheduledValues(0)\n\t\t\te.gain.setValueAtTime(this.nearZero, audioContext.currentTime)\n\t\t\te.when = -1\n\t\t\ttry {\n\t\t\t\te.audioBufferSourceNode.disconnect()\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.log(ex)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this\n}\n\n/*\nWavetable instrument list:\n\n0: Piano - Acoustic Grand Piano\n1: Piano - Bright Acoustic Piano\n2: Piano - Electric Grand Piano\n3: Piano - Honky-tonk Piano\n4: Piano - Electric Piano 1\n5: Piano - Electric Piano 2\n6: Piano - Harpsichord\n7: Piano - Clavinet\n8: Chromatic Percussion - Celesta\n9: Chromatic Percussion - Glockenspiel\n10: Chromatic Percussion - Music Box\n11: Chromatic Percussion - Vibraphone\n12: Chromatic Percussion - Marimba\n13: Chromatic Percussion - Xylophone\n14: Chromatic Percussion - Tubular Bells\n15: Chromatic Percussion - Dulcimer\n16: Organ - Drawbar Organ\n17: Organ - Percussive Organ\n18: Organ - Rock Organ\n19: Organ - Church Organ\n20: Organ - Reed Organ\n21: Organ - Accordion\n22: Organ - Harmonica\n23: Organ - Tango Accordion\n24: Guitar - Acoustic Guitar (nylon)\n25: Guitar - Acoustic Guitar (steel)\n26: Guitar - Electric Guitar (jazz)\n27: Guitar - Electric Guitar (clean)\n28: Guitar - Electric Guitar (muted)\n29: Guitar - Overdriven Guitar\n30: Guitar - Distortion Guitar\n31: Guitar - Guitar Harmonics\n32: Bass - Acoustic Bass\n33: Bass - Electric Bass (finger)\n34: Bass - Electric Bass (pick)\n35: Bass - Fretless Bass\n36: Bass - Slap Bass 1\n37: Bass - Slap Bass 2\n38: Bass - Synth Bass 1\n39: Bass - Synth Bass 2\n40: Strings - Violin\n41: Strings - Viola\n42: Strings - Cello\n43: Strings - Contrabass\n44: Strings - Tremolo Strings\n45: Strings - Pizzicato Strings\n46: Strings - Orchestral Harp\n47: Strings - Timpani\n48: Ensemble - String Ensemble 1\n49: Ensemble - String Ensemble 2\n50: Ensemble - Synth Strings 1\n51: Ensemble - Synth Strings 2\n52: Ensemble - Choir Aahs\n53: Ensemble - Voice Oohs\n54: Ensemble - Synth Choir\n55: Ensemble - Orchestra Hit\n56: Brass - Trumpet\n57: Brass - Trombone\n58: Brass - Tuba\n59: Brass - Muted Trumpet\n60: Brass - French Horn\n61: Brass - Brass Section\n62: Brass - Synth Brass 1\n63: Brass - Synth Brass 2\n64: Reed - Soprano Sax\n65: Reed - Alto Sax\n66: Reed - Tenor Sax\n67: Reed - Baritone Sax\n68: Reed - Oboe\n69: Reed - English Horn\n70: Reed - Bassoon\n71: Reed - Clarinet\n72: Pipe - Piccolo\n73: Pipe - Flute\n74: Pipe - Recorder\n75: Pipe - Pan Flute\n76: Pipe - Blown bottle\n77: Pipe - Shakuhachi\n78: Pipe - Whistle\n79: Pipe - Ocarina\n80: Synth Lead - Lead 1 (square)\n81: Synth Lead - Lead 2 (sawtooth)\n82: Synth Lead - Lead 3 (calliope)\n83: Synth Lead - Lead 4 (chiff)\n84: Synth Lead - Lead 5 (charang)\n85: Synth Lead - Lead 6 (voice)\n86: Synth Lead - Lead 7 (fifths)\n87: Synth Lead - Lead 8 (bass + lead)\n88: Synth Pad - Pad 1 (new age)\n89: Synth Pad - Pad 2 (warm)\n90: Synth Pad - Pad 3 (polysynth)\n91: Synth Pad - Pad 4 (choir)\n92: Synth Pad - Pad 5 (bowed)\n93: Synth Pad - Pad 6 (metallic)\n94: Synth Pad - Pad 7 (halo)\n95: Synth Pad - Pad 8 (sweep)\n96: Synth Effects - FX 1 (rain)\n97: Synth Effects - FX 2 (soundtrack)\n98: Synth Effects - FX 3 (crystal)\n99: Synth Effects - FX 4 (atmosphere)\n100: Synth Effects - FX 5 (brightness)\n101: Synth Effects - FX 6 (goblins)\n102: Synth Effects - FX 7 (echoes)\n103: Synth Effects - FX 8 (sci-fi)\n104: Ethnic - Sitar\n105: Ethnic - Banjo\n106: Ethnic - Shamisen\n107: Ethnic - Koto\n108: Ethnic - Kalimba\n109: Ethnic - Bagpipe\n110: Ethnic - Fiddle\n111: Ethnic - Shanai\n112: Percussive - Tinkle Bell\n113: Percussive - Agogo\n114: Percussive - Steel Drums\n115: Percussive - Woodblock\n116: Percussive - Taiko Drum\n117: Percussive - Melodic Tom\n118: Percussive - Synth Drum\n119: Percussive - Reverse Cymbal\n120: Sound effects - Guitar Fret Noise\n121: Sound effects - Breath Noise\n122: Sound effects - Seashore\n123: Sound effects - Bird Tweet\n124: Sound effects - Telephone Ring\n125: Sound effects - Helicopter\n126: Sound effects - Applause\n127: Sound effects - Gunshot\n\nDrums:\nDrum_Stan1_SC88P\nStandard\nStandard_part2\nStandard\nDRUM_SFX\nRoom_2\nStandard_2_PART3\nCM_64_32_MT_32\nRoom_3\nRoomm_PART3\nRoom_4\nPower_PART3\nRoom_5\nElectronic_PART3\nRoom_6\nzTR_808_PART3\nRoom_7\nDance_PART3\nPower\nJazz_PART3\nPower_1\nBrush_PART3\nPower_2\nOrchestra_PART3\nPower_3\nSFX_PART3\nDrum_Room\nStandard_1\nRoomm_PART2\nRoom\nElectronic\nStandard\nTR_808\nRoomm\nJazz\nPower_SC_55\nJazz_1\nElectronic_SC_55\nJazz_2\nzTR_808\nJazz_3\nDance_SC_88\nJazz_4\nJazz\nBrush\nBrush_SC_55\nBrush_1\nOrchestra\nBrush_2\nSFX\nDrum_Room_SC88P\nStandard_2\nPower_PART2\nPower\nOrchestra_Kit\nDrum_Power\nStandard_3\nElectronic_PART2\nElectronic\nDrum_Elec_SC88P\nStandard_4\nzTR_808_PART2\nTR_808\nDrum_TR808_SC88P\nStandard_5\nDance_PART2\nJazz\nDrum_TR909_SC88P\nStandard_6\nJazz_PART2\nBrush\nDrum_Jazz\nStandard_7\nBrush_PART2\nOrchestra\nDrum_Brush_SC88P\nRoom\nOrchestra_PART2\nSFX\nDrum_Orch_SC88P\nRoom_1\nSFX_PART2\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/third-party/wavetable.ts","import { doRunCode, flashRange } from './editor'\nimport { LiveCoding } from './live-coding'\nimport { prevBuffer, nextBuffer } from './editor-buffers'\nimport { loadSamples } from './instruments'\n\n\nexport function registerActions(editor: any) {\n\tconst CTRL_ALT = monaco.KeyMod.Alt | monaco.KeyMod.CtrlCmd\n\tconst CTRL_SHIFT = monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift\n\tlet editorActions = new EditorActions(editor)\n\tregisterButtons(editorActions)\n\tsetColorTheme(editorActions)\n\tregisterDnD()\n\t// -------------------- Run code actions --------------------\n\teditor.addAction({\n\t\tid: 'walc-run-all',\n\t\tlabel: 'Run all code',\n\t\tkeybindings: [CTRL_ALT | monaco.KeyCode.Enter],\n\t\tcontextMenuGroupId: 'modulator',\n\t\tcontextMenuOrder: 1,\n\t\trun: () => editorActions.runAllCode()\n\t})\n\teditor.addAction({\n\t\tid: 'walc-run-part',\n\t\tlabel: 'Run current line or selection',\n\t\tkeybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyCode.Enter],\n\t\tcontextMenuGroupId: 'modulator',\n\t\tcontextMenuOrder: 2,\n\t\trun: () => editorActions.runSomeCode()\n\t})\n\teditor.addAction({\n\t\tid: 'walc-stop-all',\n\t\tlabel: 'Stop all tracks',\n\t\tkeybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyCode.US_DOT],\n\t\tcontextMenuGroupId: 'modulator',\n\t\tcontextMenuOrder: 3,\n\t\trun: () => editorActions.stopAllTracks()\n\t})\n\t// -------------------- Font size actions --------------------\n\teditor.addAction({\n\t\tid: 'walc-font-sm',\n\t\tlabel: 'Reduce code font',\n\t\tkeybindings: [CTRL_ALT | monaco.KeyCode.US_COMMA],\n\t\tcontextMenuGroupId: 'modulator',\n\t\tcontextMenuOrder: 4,\n\t\trun: () => editorActions.reduceFont()\n\t})\n\teditor.addAction({\n\t\tid: 'walc-font-lg',\n\t\tlabel: 'Enlarge code font',\n\t\tkeybindings: [CTRL_ALT | monaco.KeyCode.US_DOT],\n\t\tcontextMenuGroupId: 'modulator',\n\t\tcontextMenuOrder: 5,\n\t\trun: () => editorActions.enlargeFont()\n\t})\n\t// -------------------- Buffer actions --------------------\n\teditor.addAction({\n\t\tid: 'walc-buffer-prev',\n\t\tlabel: 'Previous code buffer',\n\t\tkeybindings: [CTRL_SHIFT | monaco.KeyCode.US_COMMA],\n\t\trun: () => editorActions.showPrevBuffer()\n\t})\n\teditor.addAction({\n\t\tid: 'walc-buffer-next',\n\t\tlabel: 'Next code buffer',\n\t\tkeybindings: [CTRL_SHIFT | monaco.KeyCode.US_DOT],\n\t\trun: () => editorActions.showNextBuffer()\n\t})\n}\n\nfunction registerButtons(editorActions: EditorActions) {\n\tlet refocus = (x: any) => editorActions.editor.focus()\n\t// ----- Left buttons ----\n\t$('#walc-run-all').click(_ => refocus(editorActions.runAllCode()))\n\t$('#walc-run-sel').click(_ => refocus(editorActions.runSomeCode()))\n\t$('#walc-stop').click(_ => refocus(editorActions.stopAllTracks()))\n\t// ----- Right buttons -----\n\t$('#walc-toggle-theme').click(_ => refocus(editorActions.toggleTheme()))\n\t$('#walc-font-sm').click(_ => refocus(editorActions.reduceFont()))\n\t$('#walc-font-lg').click(_ => refocus(editorActions.enlargeFont()))\n}\n\nfunction setColorTheme(editorActions: EditorActions) {\n\tlet theme = localStorage.walc_prefs_theme\n\tif (theme == 'dark') editorActions.toggleTheme()\n}\n\nfunction registerDnD() {\n\t$('#live-coding').on('drag dragstart dragend dragover dragenter dragleave drop', e => {\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t})\n\t.on('drop', e => {\n\t\tlet files = (<DragEvent>e.originalEvent).dataTransfer.files\n\t\tloadSamples(files)\n\t})\n}\n\n\ndeclare let lc: LiveCoding\ndeclare let monaco: any\n\n\nclass EditorActions {\n\tlightTheme = true\n\n\tconstructor(public editor: any) {}\n\n\trunAllCode() {\n\t\tlet model = this.editor.getModel()\n\t\tdoRunCode(model.getValue())\n\t\tflashRange(model.getFullModelRange())\n\t}\n\n\trunSomeCode() {\n\t\tlet range = this.editor.getSelection()\n\t\tlet sel = this.getRange(range)\n\t\tdoRunCode(sel)\n\t\tflashRange(range)\n\t}\n\n\tstopAllTracks() {\n\t\tlc.reset()\n\t}\n\n\ttoggleTheme() {\n\t\tthis.lightTheme = !this.lightTheme\n\t\tif (this.lightTheme) {\n\t\t\t$('body').removeClass('dark')\n\t\t\tmonaco.editor.setTheme('vs')\n\t\t\t$('.logo > img').attr('src', 'img/logo.svg')\n\t\t}\n\t\telse {\n\t\t\t$('body').addClass('dark')\n\t\t\tmonaco.editor.setTheme('vs-dark')\n\t\t\t$('.logo > img').attr('src', 'img/logo-white.svg')\n\t\t}\n\t\tlocalStorage.walc_prefs_theme = this.lightTheme ? 'light' : 'dark'\n\t}\n\n\treduceFont() {\n\t\tlet fs = this.getFontSize()\n\t\tif (fs <= 1) return\n\t\tthis.editor.updateOptions({ fontSize: fs - 1 })\n\t}\n\n\tenlargeFont() {\n\t\tthis.editor.updateOptions({ fontSize: this.getFontSize() + 1 })\n\t}\n\n\tshowPrevBuffer() {\n\t\tprevBuffer(this.editor)\n\t}\n\tshowNextBuffer() {\n\t\tnextBuffer(this.editor)\n\t}\n\n\tprivate getRange(range: any) {\n\t\tlet sel: string\n\t\tif (range.startLineNumber != range.endLineNumber\n\t\t\t|| range.startColumn != range.endColumn) {\n\t\t\tsel = this.editor.getModel().getValueInRange(range)\n\t\t}\n\t\telse {\n\t\t\tsel = this.editor.getModel().getLineContent(range.startLineNumber)\n\t\t\trange.startColumn = 1\n\t\t\trange.endColumn = sel.length + 1\n\t\t}\n\t\treturn '\\n'.repeat(range.startLineNumber - 1) + sel\n\t}\n\n\tprivate getFontSize() {\n\t\treturn this.editor.getConfiguration().fontInfo.fontSize\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/editor-actions.ts","import { random } from './random'\n\nexport class Ring<T> extends Array<T> {\n\ttick_ct = 0\n\n\ttick(): T {\n\t\tlet result = this[this.tick_ct]\n\t\tthis.tick_ct++\n\t\tif (this.tick_ct >= this.length) this.tick_ct = 0\n\t\treturn result\n\t}\n\n\tchoose(): T {\n\t\treturn this[random.integer(0, this.length - 1)]\n\t}\n\n\tfromArray(arr: T[]): Ring<T> {\n\t\tfor (let x of arr) this.push(x)\n\t\treturn this\n\t}\n\n\ttoArray(): T[] {\n\t\treturn new Array(...this)\n\t}\n\n\tclone(): Ring<T> {\n\t\treturn copytick(this, this.toArray().ring())\n\t}\n\n\treverse(): Ring<T> {\n\t\treturn copytick(this, this.toArray().reverse().ring())\n\t}\n\n\tsort(compareFn?: (a: T, b: T) => number): this {\n\t\tlet r = this.toArray().sort(compareFn).ring()\n\t\treturn <this>copytick(this, r)\n\t}\n\n\tshuffle(): Ring<T> {\n\t\tlet r = this.clone()\n\t\tfor (let i = r.length - 1; i > 0; i--) {\n\t\t\tlet j = random.integer(0, i)\n\t\t\tlet temp = r[i]\n\t\t\tr[i] = r[j]\n\t\t\tr[j] = temp\n\t\t}\n\t\treturn copytick(this, r)\n\t}\n\n\ttake(n: number): Ring<T> {\n\t\treturn copytick(this, <Ring<T>>this.slice(0, n))\n\t}\n\n\tdrop(n: number): Ring<T> {\n\t\treturn copytick(this, <Ring<T>>this.slice(n))\n\t}\n\n\tbutlast(): Ring<T> {\n\t\treturn this.take(this.length - 1)\n\t}\n\n\tdrop_last(n: number): Ring<T> {\n\t\treturn this.take(this.length - n)\n\t}\n\n\ttake_last(n: number): Ring<T> {\n\t\treturn this.drop(this.length - n)\n\t}\n\n\tstretch(n: number): Ring<T> {\n\t\tlet r = new Ring<T>()\n\t\tfor (let x of this)\n\t\t\tfor (let i = 0; i < n; i++)\n\t\t\t\tr.push(x)\n\t\treturn copytick(this, r)\n\t}\n\n\trepeat(n: number): Ring<T> {\n\t\tlet r = new Ring<T>()\n\t\tfor (let i = 0; i < n; i++)\n\t\t\tfor (let x of this)\n\t\t\t\tr.push(x)\n\t\treturn copytick(this, r)\n\t}\n\n\tmirror(): Ring<T> {\n\t\tlet r = this.concat(this.reverse())\n\t\treturn copytick(this, <Ring<T>>r)\n\t}\n\n\treflect(): Ring<T> {\n\t\tlet r = this.concat(this.reverse().drop(1))\n\t\treturn copytick(this, <Ring<T>>r)\n\t}\n\n\tscale(n: number): Ring<T> {\n\t\tlet r = <any>this.clone()\n\t\tfor (let i = 0; i < r.length; i++) r[i] *= n\n\t\treturn copytick(this, r)\n\t}\n\n\ttranspose(n: number): Ring<T> {\n\t\tlet r = <any>this.clone()\n\t\tfor (let i = 0; i < r.length; i++) r[i] += n\n\t\treturn copytick(this, r)\n\t}\n\n\ttoString() {\n\t\tlet arr: string[] = []\n\t\tfor (let x of this) arr.push(x.toString())\n\t\tarr[this.tick_ct] = '>' + arr[this.tick_ct] + '<'\n\t\treturn '(' + arr.join(', ') + ')'\n\t}\n}\n\ndeclare global {\n\tinterface Array<T> {\n\t\tring: () => Ring<T>\n\t}\n}\n\nexport function setupRing() {\n\tif (!Array.prototype.ring) {\n\t\tArray.prototype.ring = function() {\n\t\t\treturn new Ring().fromArray(this)\n\t\t}\n\t}\n}\n\nfunction copytick<T>(from: Ring<T>, to: Ring<T>): Ring<T> {\n\tto.tick_ct = from.tick_ct\n\tif (to.tick_ct >= to.length) to.tick_ct = to.length - 1\n\treturn to\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/live-coding/rings.ts","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baagøe.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by François Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/index.js\n// module id = 38\n// module chunks = 0","// A port of an algorithm by Johannes Baagøe <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baagøe <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// \n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n// \n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = data.toString();\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/lib/alea.js\n// module id = 39\n// module chunks = 0","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/lib/xor128.js\n// module id = 40\n// module chunks = 0","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/lib/xorwow.js\n// module id = 41\n// module chunks = 0","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// François Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/lib/xorshift7.js\n// module id = 42\n// module chunks = 0","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/lib/xor4096.js\n// module id = 43\n// module chunks = 0","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/lib/tychei.js\n// module id = 44\n// module chunks = 0","/*\nCopyright 2014 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\nvar global = this,\n    width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\nmath['seed' + rngname] = seedrandom;\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n}\n\n// End anonymous scope, and pass initial values.\n})(\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/seedrandom/seedrandom.js\n// module id = 45\n// module chunks = 0","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// crypto (ignored)\n// module id = 46\n// module chunks = 0","let oldPage: string\nlet mainRoute: string\n\nexport function setupRoutes(initialRoute: string) {\n\twindow.onhashchange = showPageFromHash\n\tmainRoute = initialRoute\n\tshowPageFromHash()\n\treturn loadPages()\n}\n\nfunction showPageFromHash() {\n\tconst hash = location.hash || mainRoute\n\t$('#page > div').hide()\n\t$(hash).show().css('outline', 'none').focus()\n\tif (oldPage) $(document).trigger('route:hide', oldPage)\n\t$(document).trigger('route:show', hash)\n\toldPage = hash\n\twindow.scrollTo(0, 0)\n}\n\nfunction loadPages() {\n\treturn Promise.all([\n\t\tloadPage('live-coding'),\n\t\tloadPage('synth')\n\t])\n}\n\nfunction loadPage(pname: string) {\n\treturn new Promise<void>(resolve => {\n\t\t$.get(pname + '.html', data => {\n\t\t\t$('#' + pname).empty().append(data)\n\t\t\tresolve()\n\t\t})\n\t})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/routes.ts"],"sourceRoot":""}