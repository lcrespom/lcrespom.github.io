!function(e){function t(a){if(n[a])return n[a].exports;var l=n[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}({16:function(e,t,n){e.exports=n(17)},17:function(e,t){function n(e){let t=document.getElementById(e);if(!t||!t.getContext)return null;let n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);let a=t.width;return t.width=1,t.width=a,n}function a(e){return parseFloat(e).toLocaleString()}function l(e){return e<10?"0"+e:e}function r(e){let t,n,a;return a=Math.round(e/1e3),n=Math.floor(a/60),(t=Math.floor(n/60))+":"+l(n%60)+":"+l(a%60)}function o(){return m("params.migration")||1e4}function s(){return m("params.nworkers")||1}function i(e){let t=document.getElementsByClassName("slider");for(let n=0;n<t.length;n++)!function(e,t){let n=e.getElementsByClassName("slider-toggle")[0],a=e.getElementsByClassName("slider-content")[0];if(!n||!a)return;if(a.style.maxHeight="",a.style.maxHeight=a.offsetHeight+"px",!t)return;n.addEventListener("click",e=>a.classList.toggle("slider-closed"))}(t[n],e)}function u(e){return document.getElementById(e)}function c(e,t){let n=u(e);n&&("INPUT"==n.tagName?n.value=t:n.innerText=t)}function f(e,t=""){let n=u(e);return n&&"INPUT"==n.tagName?n.value:t}function m(e){let t=f(e,"0");return parseFloat(t)}const d="#343a40",p="#007bff",g=3,h=1.2,v="#dfefff",b=640,x=240,y=2e3;let w,k,E,M=[],I=0,T=!1,W={eval:0,incumbentGen:0,incumbentWhen:0},S=u("start")||new HTMLElement;S.addEventListener("click",e=>{if(T){for(let e of w)e.terminate();S.innerText="Start"}else!function(e){w=[],k=[],E=[];let t=function(){let e=f("params.seed");return s()>1&&0==e.trim().length&&(e=""+Date.now()),{numCities:m("params.ncities"),population:m("params.popsize"),elite:m("params.elite"),invertRatio:m("params.invert"),weightExponent:m("params.exponent"),mapSeed:e}}();for(let l=0;l<e;l++)w.push(function(e){let t=new Worker("tsp-worker.js");return t.postMessage({command:"start",params:e}),t.postMessage({command:"steps",steps:o()}),t.onmessage=(e=>{switch(e.data.command){case"status":!function(e){if(E.push(e),E.length<w.length)return;let t=function(){let e=E[0];for(let t=1;t<E.length;t++){let n=E[t];n.eval<e.eval&&(e.eval=n.eval,e.incumbent=n.incumbent),e.generation+=n.generation,e.gps+=n.gps}return e.elapsed=E[E.length-1].elapsed,e}();t.eval!=W.eval&&(function(e){let t=function(e){let t=[];for(let n=0;n<e.cityX.length;n++)t.push({x:e.cityX[n],y:e.cityY[n]});return t}(e.map);if(0==t.length)return;let a=n("canvas");a&&(a.fillStyle=d,a.strokeStyle=p,a.lineWidth=h,a.translate(10,10),function(e,t,n){let a;for(let l=0;l<n.length;l++)a=t[n[l]],0==l?e.moveTo(a.x,a.y):e.lineTo(a.x,a.y);a=t[n[0]],e.lineTo(a.x,a.y),e.stroke()}(a,t,e.cities),function(e,t){for(let n=0;n<t.length;n++)e.beginPath(),e.arc(t[n].x,t[n].y,g,0,2*Math.PI),e.fill()}(a,t))}(t.incumbent),function(e){e.elapsed<y||M.push({when:e.elapsed,eval:e.incumbent.eval})}(t),W.eval=t.eval,W.incumbentGen=t.generation,W.incumbentWhen=t.elapsed),t.lastIncumbentGen=W.incumbentGen,t.lastIncumbentWhen=W.incumbentWhen,function(e){c("status.generation",a(e.generation)),c("status.gps",a(e.gps.toFixed(0))),c("status.eval",a(Math.round(e.eval))),c("status.lastIncumbentGen",a(e.lastIncumbentGen)),c("status.elapsed",r(e.elapsed)),c("status.lastIncumbentWhen",r(e.lastIncumbentWhen))}(t),function(e){let t=Math.ceil(e/1e3);if(t==I)return;I=t;let a=n("histogram");if(!a)return;a.strokeStyle=p,a.fillStyle=v,a.lineWidth=1;let l=(e-y)/1e3;l>b&&a.translate(b-l,0),a.fillRect(0,0,t+.5,x);for(let e of M)!function(e,t){let n=(t.when-y)/1e3,a=x*t.eval/M[0].eval;e.beginPath(),e.moveTo(n,x),e.lineTo(n,x-a),e.stroke()}(a,e)}(t.elapsed),E=[]}(e.data.status);break;case"steps":!function(e,t){k.push(t),k.length>=w.length&&function(){let e=k[0];for(let t of k)t.eval<e.eval&&(e=t);k=[];for(let t of w)t.postMessage({command:"migrate",solution:e})}(),e.postMessage({command:"steps",steps:o()})}(t,e.data.incumbent);break;default:throw Error("Unknown command: "+e.data.command)}}),t}(t))}(s()),M=[],S.innerText="Stop";T=!T}),window.addEventListener("load",e=>i(!0)),window.addEventListener("resize",e=>i(!1))}});