{"version":3,"sources":["webpack:///webpack/bootstrap 61bc32a89dbfc2634790","webpack:///./ts/main.ts","webpack:///./ts/synthUI.ts","webpack:///./ts/notes.ts","webpack:///./ts/modern.ts","webpack:///./ts/graph.ts","webpack:///./ts/synth.ts","webpack:///./ts/palette.ts","webpack:///./ts/paramsUI.ts","webpack:///./ts/keyboard.ts"],"names":["setupKeyboard","setupTheme","getSearch","SynthUI","SynthUI.constructor","SynthUI.addOutputNode","SynthUI.registerPaletteHandler","SynthUI.addNode","SynthUI.findFreeSpot","SynthUI.dist2nearestNode","SynthUI.initNodeDimensions","NodeData","NodeData.constructor","SynthGraphHandler","SynthGraphHandler.constructor","SynthGraphHandler.canBeSource","SynthGraphHandler.canConnect","SynthGraphHandler.connected","SynthGraphHandler.disconnected","SynthGraphHandler.nodeSelected","SynthGraphHandler.getArrowColor","getCssFromClass","BaseNoteHandler","BaseNoteHandler.constructor","BaseNoteHandler.noteOn","BaseNoteHandler.noteOff","BaseNoteHandler.noteEnd","BaseNoteHandler.clone","BaseNoteHandler.disconnect","OscNoteHandler","OscNoteHandler.constructor","OscNoteHandler.noteOn","OscNoteHandler.noteOff","OscNoteHandler.noteEnd","ADSRNoteHandler","ADSRNoteHandler.constructor","ADSRNoteHandler.noteOn","ADSRNoteHandler.noteOff","ADSRNoteHandler.noteEnd","ADSRNoteHandler.sendNoteEnd","ADSRNoteHandler.setupOtherHandlers","ADSRNoteHandler.loopParams","ADSRNoteHandler.getParamValue","OutputTracker","OutputTracker.constructor","OutputTracker.connect","OutputTracker.disconnect","OutputTracker.onBefore","removeArrayElement","Graph","Graph.constructor","Graph.addNode","Graph.removeNode","Graph.selectNode","Graph.connect","Graph.disconnect","Graph.draw","Node","Node.constructor","Node.addInput","Node.removeInput","DefaultGraphHandler","DefaultGraphHandler.constructor","DefaultGraphHandler.canBeSource","DefaultGraphHandler.canConnect","DefaultGraphHandler.connected","DefaultGraphHandler.disconnected","DefaultGraphHandler.nodeSelected","DefaultGraphHandler.getArrowColor","GraphInteraction","GraphInteraction.constructor","GraphInteraction.registerNode","GraphInteraction.selectNode","GraphInteraction.setupConnectHandler","GraphInteraction.connectOrDisconnect","GraphInteraction.getElementUnderMouse","GraphInteraction.registerRubberBanding","GraphInteraction.deregisterRubberBanding","GraphInteraction.getNodeFromDOM","GraphDraw","GraphDraw.constructor","GraphDraw.draw","GraphDraw.clearCanvas","GraphDraw.drawArrow","GraphDraw.drawArrowTip","GraphDraw.getNodeCenter","Synth","Synth.constructor","Synth.createAudioNode","Synth.play","Synth.stop","Synth.noteOn","Synth.noteOff","Synth.addNoteHandler","Synth.removeNoteHandler","Synth.initNodeParams","Synth.registerCustomNode","CustomNodeBase","CustomNodeBase.constructor","CustomNodeBase.connect","CustomNodeBase.disconnect","CustomNodeBase.addEventListener","CustomNodeBase.dispatchEvent","CustomNodeBase.removeEventListener","ADSR","ADSR.constructor","renderParams","addDeleteButton","renderAudioParam","renderParamControl","renderOtherParam","renderSlider","renderCombo","logarithm","param2slider","slider2param","ucfirst","truncateFloat","Keyboard","Keyboard.constructor","Keyboard.setupHandler","Keyboard.key2midi","Keyboard.midi2freqRatio","Keyboard.noteOn","Keyboard.noteOff"],"mappings":"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,GAAPA,UAAQA,CAAOA,EAAEA,OAAgBA;SAChCE,CAACA,CAACA,OAAOA,GAAGA,CAACA,CAACA,OAAOA,CAACA;cACpBA,QAAQA,CAACA,MAAMA,CAACA;cAChBA,IAAIA,CAACA,CAACA,CAACA,IAAIA,CAACA;cACZA,GAAGA,CAACA,EAAEA,IAAIA,EAAEA,CAACA,CAACA,CAACA,EAAEA,GAAGA,EAAEA,CAACA,CAACA,CAACA,EAAEA,MAAMA,EAAEA,SAASA,EAAEA,CAACA,CAACA;SAClDA,EAAEA,CAACA,CAACA,OAAOA,CAACA;aAACA,CAACA,CAACA,OAAOA,CAACA,QAAQA,CAACA,OAAOA,CAACA,CAACA;SACzCA,IAAIA,CAACA,UAAUA,CAACA,MAAMA,CAACA,CAACA,CAACA,OAAOA,CAACA,CAACA;SAClCA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;SACnBA,IAAIA,CAACA,aAAaA,CAACA,YAAYA,CAACA,CAACA,CAACA,CAACA;SACnCA,IAAIA,CAACA,IAAIA,EAAEA,CAACA;KACbA,CAACA;KAEDF,0BAAUA,GAAVA,UAAWA,CAAOA;SACjBG,IAAMA,GAAGA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA;SAClCA,EAAEA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA;aACXA,MAAMA,CAACA,OAAOA,CAACA,IAAIA,CAACA,WAASA,CAACA,CAACA,IAAIA,+BAA4BA,CAACA,CAACA;SAClEA,GAAGA,CAACA,CAAaA,UAAUA,EAAVA,SAAIA,CAACA,KAAKA,EAAtBA,cAAQA,EAARA,IAAsBA,CAACA;aAAvBA,IAAMA,EAAEA;aACZA,EAAEA,CAACA,CAACA,CAACA,IAAIA,EAAEA,CAACA;iBAACA,QAAQA,CAACA;aACtBA,IAAIA,CAACA,UAAUA,CAACA,CAACA,EAAEA,EAAEA,CAACA,CAACA;aACvBA,IAAIA,CAACA,UAAUA,CAACA,EAAEA,EAAEA,CAACA,CAACA,CAACA;UACvBA;SACDA,IAAIA,CAACA,K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BA,IAAIA,CAACA,OAAOA,EAAEA,aAAaA,CAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA,CAACA;KACzCA,SAASA,CAACA,MAAMA,CAACA,QAAQA,CAACA,CAACA;KAC3BA,SAASA,CAACA,MAAMA,CAACA,MAAMA,CAACA,CAACA;KACzBA,SAASA,CAACA,MAAMA,CAACA,CAACA,CAACA,aAAaA,GAAGA,OAAOA,CAACA,KAAKA,CAACA,GAAGA,SAASA,CAACA,CAACA,CAACA;KAChEA,KAAKA,CAACA,MAAMA,CAACA,SAASA,CAACA,CAACA;KACxBA,MAAMA,CAACA,EAAEA,CAACA,OAAOA,EAAEA,WAACA;SACnBA,IAAMA,KAAKA,GAAGA,YAAYA,CAACA,UAAUA,CAACA,MAAMA,CAACA,GAAGA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,CAACA;SAC3DA,QAAQA,CAACA,GAAGA,CAACA,aAAaA,CAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA,CAACA;SACtCA,QAAQA,CAACA,KAAKA,CAACA,CAACA;KACjBA,CAACA,CAACA,CAACA;KACHA,QAAQA,CAACA,EAAEA,CAACA,OAAOA,EAAEA,WAACA;SACrBA,IAAMA,KAAKA,GAAGA,UAAUA,CAACA,QAAQA,CAACA,GAAGA,EAAEA,CAACA,CAACA;SACzCA,EAAEA,CAACA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA;aAACA,MAAMA,CAACA;SACzBA,MAAMA,CAACA,GAAGA,CAACA,YAAYA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,CAACA,CAACA;SACtCA,QAAQA,CAACA,KAAKA,CAACA,CAACA;KACjBA,CAACA,CAACA,CAACA;AACJA,EAACA;AAED,sBAAqB,KAAa,EAAE,OAAiB,EAAE,QAAgB,EAAE,KAAa;KACrFC,IAAMA,SAASA,GAAGA,CAACA,CAACA,0BAA0BA,CAACA,CAACA;KAChDA,IAAMA,KAAKA,GAAGA,CAACA,CAACA,UAAUA,CAACA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,OAAOA,CAACA,MAAMA,CAACA,CAACA;KACzDA,GAAGA,C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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 61bc32a89dbfc2634790\n **/","/**\n * Main entry point: setup synth editor and keyboard listener.\n */\n\nimport { SynthUI } from './synthUI';\nimport { Keyboard } from './keyboard';\n\nsetupTheme();\nconst graphCanvas = <HTMLCanvasElement>$('#graph-canvas')[0];\nconst synthUI = new SynthUI(graphCanvas, $('#node-params'));\nsetupKeyboard();\n\n\nfunction setupKeyboard() {\n\tvar kb = new Keyboard();\n\tkb.noteOn = (midi, ratio) => {\n\t\tsynthUI.synth.noteOn(midi, 1, ratio);\n\t};\n\tkb.noteOff = (midi) => {\n\t\tsynthUI.synth.noteOff(midi, 1);\n\t};\n}\n\nfunction setupTheme() {\n\tconst search: any = getSearch();\n\tif (search.theme)\n\t\t$('body').addClass(search.theme);\n}\n\nfunction getSearch() {\n\tconst search = {};\n\tlet sstr = document.location.search;\n\tif (!sstr) return search;\n\tif (sstr[0] == '?') sstr = sstr.substr(1);\n\tfor (const part of sstr.split('&')) {\n\t\tconst kv = part.split('=');\n\t\tsearch[kv[0]] = kv[1];\n\t}\n\treturn search;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./ts/main.ts\n **/","import { NoteHandler, NoteHandlers } from './notes';\nimport { ModernAudioNode } from './modern';\n\n/**\n * Customizes the generic graph editor in order to manipulate and control a graph of\n * AudioNodes\n */\nexport class SynthUI {\n\tgr: Graph;\n\tsynth: Synth;\n\tnw: number;\n\tnh: number;\n\n\tconstructor(graphCanvas: HTMLCanvasElement, jqParams: JQuery) {\n\t\tthis.gr = new Graph(graphCanvas);\n\t\tthis.gr.handler = new SynthGraphHandler(this.gr, jqParams);\n\t\tthis.synth = new Synth();\n\t\tthis.registerPaletteHandler();\n\t\tthis.addOutputNode();\n\t}\n\n\taddOutputNode() {\n\t\t//TODO avoid using hardcoded position\n\t\tconst out = new Node(500, 210, 'Out');\n\t\tconst data = new NodeData();\n\t\tout.data = data;\n\t\tdata.anode = this.synth.ac.destination;\n\t\tdata.nodeDef = this.synth.palette['Speaker'];\n\t\tthis.gr.addNode(out);\n\t\tthis.initNodeDimensions(out);\n\t}\n\n\tregisterPaletteHandler() {\n\t\tvar self = this;\t// JQuery sets 'this' in event handlers\n\t\t$('.palette > .node').click(function(evt) {\n\t\t\tconst elem = $(this);\n\t\t\tself.addNode(elem.attr('data-type'), elem.text());\n\t\t});\n\t}\n\n\taddNode(type: string, text: string): void {\n\t\tlet { x, y } = this.findFreeSpot();\n\t\tconst n = new Node(x, y, text);\n\t\tconst data = new NodeData();\n\t\tn.data = data;\n\t\tdata.anode = this.synth.createAudioNode(type);\n\t\tdata.nodeDef = this.synth.palette[type];\n\t\tthis.gr.addNode(n, data.nodeDef.control ? 'node-ctrl' : undefined);\n\t\tthis.gr.selectNode(n);\n\t\tif (!data.anode) {\n\t\t\tconsole.warn(`No AudioNode found for '${type}'`);\n\t\t\tn.element.css('background-color', '#BBB');\n\t\t}\n\t\telse {\n\t\t\tconst nh = data.nodeDef.noteHandler;\n\t\t\tif (nh) {\n\t\t\t\tdata.noteHandler = new NoteHandlers[nh](n);\n\t\t\t\tthis.synth.addNoteHandler(data.noteHandler);\n\t\t\t}\n\t\t\t// LFO does not have a note handler yet needs to be started\n\t\t\telse if (data.anode['start']) data.anode['start']();\n\t\t}\n\t}\n\n\n\t//----- Rest of methods are used to find a free spot in the canvas -----\n\n\tfindFreeSpot() {\n\t\tlet maxDist = 0;\n\t\tconst canvasW = this.gr.canvas.width;\n\t\tconst canvasH = this.gr.canvas.height;\n\t\tlet x = canvasW / 2;\n\t\tlet y = canvasH / 2;\n\t\tfor (let xx = 10; xx < canvasW - this.nw; xx += 10) {\n\t\t\tfor (let yy = 10; yy < canvasH - this.nh; yy += 10) {\n\t\t\t\tconst dist = this.dist2nearestNode(xx, yy);\n\t\t\t\tif (dist > maxDist && dist < this.nw * 3) {\n\t\t\t\t\tx = xx;\n\t\t\t\t\ty = yy;\n\t\t\t\t\tmaxDist = dist;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { x, y };\n\t}\n\n\tdist2nearestNode(x: number, y: number) {\n\t\tlet minDist = Number.MAX_VALUE;\n\t\tfor (const n of this.gr.nodes) {\n\t\t\tconst dx = x - n.x;\n\t\t\tconst dy = y - n.y;\n\t\t\tconst dist = Math.sqrt(dx*dx + dy*dy);\n\t\t\tif (dist < minDist) minDist = dist;\n\t\t}\n\t\treturn minDist;\n\t}\n\n\tinitNodeDimensions(n) {\n\t\tthis.nw = n.element.outerWidth();\n\t\tthis.nh = n.element.outerHeight();\n\t}\n\n}\n\n/**\n * Holds all data associated with an AudioNode in the graph\n */\nexport class NodeData {\n\t// Used by all nodes\n\tanode: ModernAudioNode;\n\tnodeDef: NodeDef;\n\t// Used by control nodes\n\tcontrolParam: string;\n\tcontrolParams: string[];\n\tcontrolTarget: ModernAudioNode;\n\t// Used by source audio nodes\n\tnoteHandler: NoteHandler;\n}\n\n\n//-------------------- Privates --------------------\n\nimport { Graph, Node, GraphHandler } from './graph';\nimport { Synth } from './synth';\nimport { NodeDef } from './palette';\nimport { renderParams, addDeleteButton } from './paramsUI';\n\nclass SynthGraphHandler implements GraphHandler {\n\n\tgr: Graph;\n\tjqParams: JQuery;\n\tarrowColor: string;\n\tctrlArrowColor: string;\n\n\tconstructor(gr: Graph, jqParams: JQuery) {\n\t\tthis.gr = gr;\n\t\tthis.jqParams = jqParams;\n\t\tthis.arrowColor = getCssFromClass('arrow', 'color');\n\t\tthis.ctrlArrowColor = getCssFromClass('arrow-ctrl', 'color');\n\t}\n\n\tcanBeSource(n: Node): boolean {\n\t\tconst data: NodeData = n.data;\n\t\treturn data.anode.numberOfOutputs > 0;\n\t}\n\n\tcanConnect(src: Node, dst: Node): boolean {\n\t\tconst srcData: NodeData = src.data;\n\t\tconst dstData: NodeData = dst.data;\n\t\t//TODO even if src node is control, should not connect to Speaker output\n\t\tif (srcData.nodeDef.control) return true;\n\t\treturn dstData.anode.numberOfInputs > 0;\n\t}\n\n\tconnected(src: Node, dst: Node): void {\n\t\tconst srcData: NodeData = src.data;\n\t\tconst dstData: NodeData = dst.data;\n\t\tif (srcData.nodeDef.control && !dstData.nodeDef.control) {\n\t\t\tsrcData.controlParams = Object.keys(dstData.nodeDef.params)\n\t\t\t\t.filter(pname => dstData.anode[pname] instanceof AudioParam);\n\t\t\tsrcData.controlParam = srcData.controlParams[0];\n\t\t\tsrcData.controlTarget = dstData.anode;\n\t\t\tsrcData.anode.connect(dstData.anode[srcData.controlParam]);\n\t\t\t//TODO update params box in case selected node is src\n\t\t}\n\t\telse srcData.anode.connect(dstData.anode);\n\t}\n\n\tdisconnected(src: Node, dst: Node): void {\n\t\tconst srcData: NodeData = src.data;\n\t\tconst dstData: NodeData = dst.data;\n\t\tif (srcData.nodeDef.control && !dstData.nodeDef.control) {\n\t\t\tsrcData.controlParams = null;\n\t\t\tsrcData.anode.disconnect(dstData.anode[srcData.controlParam]);\n\t\t}\n\t\telse\n\t\t\tsrcData.anode.disconnect(dstData.anode);\n\t}\n\n\tnodeSelected(n: Node): void {\n\t\tconst data: NodeData = n.data;\n\t\trenderParams(data, this.jqParams);\n\t\tif (n.data.anode instanceof AudioDestinationNode) return;\n\t\taddDeleteButton(this.jqParams, () => {\n\t\t\tthis.gr.removeNode(n);\n\t\t\tthis.jqParams.empty();\n\t\t});\n\t}\n\n\tgetArrowColor(src: Node, dst: Node): string {\n\t\tconst srcData: NodeData = src.data;\n\t\treturn srcData.nodeDef.control ? this.ctrlArrowColor : this.arrowColor;\n\t}\n}\n\n\nfunction getCssFromClass(className, propName) {\n\tconst tmp = $('<div>').addClass(className);\n\t$('body').append(tmp);\n\tconst propValue = tmp.css(propName);\n\ttmp.remove();\n\treturn propValue;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/synthUI.ts\n **/","import { Node } from './graph';\nimport { NodeData } from './synthUI';\nimport { ADSR } from './synth';\nimport { ModernAudioNode, removeArrayElement } from './modern';\n\n/**\n * A note handler handles MIDI keyboard events on behalf of a synth node,\n * updating the node status accordingly.\n */\nexport interface NoteHandler {\n\tnoteOn(midi: number, gain: number, ratio: number):void;\n\tnoteOff(midi: number, gain: number): void;\n\tnoteEnd(midi: number): void;\n\tkbTrigger: boolean;\n\tplayAfterNoteOff: boolean;\n\thandlers: NoteHandler[];\n}\n\n/**\n * Handles common AudioNode cloning, used by oscillator and buffered data nodes.\n */\nclass BaseNoteHandler implements NoteHandler {\n\tnode: Node;\n\toutTracker: OutputTracker;\n\tkbTrigger = false;\n\tplayAfterNoteOff = false;\n\thandlers = null;\n\n\tconstructor(n: Node) {\n\t\tthis.node = n;\n\t\tthis.outTracker = new OutputTracker(n.data.anode);\n\t}\n\n\tnoteOn(midi: number, gain: number, ratio: number):void {}\n\tnoteOff(midi: number, gain: number): void {}\n\tnoteEnd(midi: number): void {}\n\n\tclone(): AudioNode {\n\t\tconst data: NodeData = this.node.data;\n\t\t// Create clone\n\t\tconst anode = data.anode.context[data.nodeDef.constructor]();\n\t\t// Copy parameters\n\t\tfor (const pname of Object.keys(data.nodeDef.params)) {\n\t\t\tconst param = data.anode[pname];\n\t\t\tif (param instanceof AudioParam)\n\t\t\t\tanode[pname].value = data.anode[pname].value;\n\t\t\telse\n\t\t\t\tanode[pname] = data.anode[pname];\n\t\t}\n\t\t// Copy output connections\n\t\tfor (const out of this.outTracker.outputs)\n\t\t\tanode.connect(out);\n\t\t// Copy control input connections\n\t\tfor (const inNode of this.node.inputs) {\n\t\t\tconst inData: NodeData = inNode.data;\n\t\t\tinNode.data.anode.connect(anode[inData.controlParam]);\n\t\t}\n\t\t//TODO should copy snapshot of list of inputs and outputs\n\t\t//...in case user connects or disconnects during playback\n\t\treturn anode;\n\t}\n\n\tdisconnect(anode: ModernAudioNode): void {\n\t\t// Disconnect outputs\n\t\tfor (const out of this.outTracker.outputs)\n\t\t\tanode.disconnect(out);\n\t\t// Disconnect control inputs\n\t\tfor (const inNode of this.node.inputs) {\n\t\t\tconst inData: NodeData = inNode.data;\n\t\t\tinNode.data.anode.disconnect(anode[inData.controlParam]);\n\t\t}\n\t}\n}\n\n/**\n * Handles note events for an OscillatorNode\n */\nclass OscNoteHandler extends BaseNoteHandler {\n\toscClone: OscillatorNode;\n\tlastNote: number;\n\tplaying = false;\n\n\tnoteOn(midi: number, gain: number, ratio: number):void {\n\t\tif (this.playing) this.noteEnd(midi);\t// Because this is monophonic\n\t\tthis.playing = true;\n\t\tthis.oscClone = <OscillatorNode>this.clone();\n\t\t//TODO should also listen to value changes on original osc and apply them to clone\n\t\tthis.oscClone.frequency.value = this.oscClone.frequency.value * ratio;\n\t\tthis.oscClone.start();\n\t\tthis.lastNote = midi;\n\t}\n\n\tnoteOff(midi: number, gain: number): void {\n\t\t//TODO if ADSR is present, noteEnd will be generated by ADSR module\n\t\tif (midi != this.lastNote) return;\n\t\tif (!this.playAfterNoteOff) this.noteEnd(midi);\n\t}\n\n\tnoteEnd(midi: number): void {\n\t\t// Stop and disconnect\n\t\tif (!this.playing) return;\n\t\tthis.playing = false;\n\t\tthis.oscClone.stop();\n\t\tthis.disconnect(this.oscClone);\n\t\tthis.oscClone = null;\n\t}\n\n}\n\n/**\n * Handles note events for a custom ADSR node\n */\n\nclass ADSRNoteHandler extends BaseNoteHandler {\n\tlastNote: number;\n\tkbTrigger = true;\n\n\tnoteOn(midi: number, gain: number, ratio: number):void {\n\t\tthis.setupOtherHandlers();\n\t\tthis.lastNote = midi;\n\t\tconst adsr: ADSR = this.node.data.anode;\n\t\tconst now = adsr.context.currentTime;\n\t\tthis.loopParams(out => {\n\t\t\tconst v = this.getParamValue(out);\n\t\t\tout.cancelScheduledValues(now);\n\t\t\tout.linearRampToValueAtTime(0, now);\n\t\t\tout.linearRampToValueAtTime(v, now + adsr.attack);\n\t\t\tout.linearRampToValueAtTime(v * adsr.sustain, now + adsr.attack + adsr.decay);\n\t\t});\n\t}\n\n\tnoteOff(midi: number, gain: number): void {\n\t\tif (midi != this.lastNote) return;\n\t\tconst adsr: ADSR = this.node.data.anode;\n\t\tconst now = adsr.context.currentTime;\n\t\tthis.loopParams(out => {\n\t\t\tconst v = out.value;\t// Get the really current value\n\t\t\tout.cancelScheduledValues(now);\n\t\t\tout.linearRampToValueAtTime(v, now);\n\t\t\tout.linearRampToValueAtTime(0, now + adsr.release);\n\t\t\t//setTimeout(_ => this.sendNoteEnd(midi), adsr.release * 2000);\n\t\t});\n\t}\n\n\tnoteEnd(midi: number): void {}\n\n\tsendNoteEnd(midi: number): void {\n\t\tfor (const nh of this.handlers) nh.noteEnd(midi);\n\t}\n\n\tsetupOtherHandlers() {\n\t\tfor (const nh of this.handlers) nh.playAfterNoteOff = true;\n\t}\n\n\tloopParams(cb: (out: AudioParam) => void): void {\n\t\tfor (const out of this.outTracker.outputs)\n\t\t\tif (out instanceof AudioParam)\n\t\t\t\tcb(out);\n\t}\n\n\tgetParamValue(p: AudioParam): number {\n\t\tif (p['_value'] === undefined) p['_value'] = p.value;\n\t\treturn p['_value'];\n\t}\n}\n\n/**\n * Exports available note handlers so they are used by their respective\n * nodes from the palette.\n */\nexport const NoteHandlers = {\n\t'osc': OscNoteHandler,\n\t'ADSR': ADSRNoteHandler\n};\n\n\n/**\n * Tracks a node output connections and disconnections, to be used\n * when cloning, removing or controlling nodes.\n */\nclass OutputTracker {\n\toutputs: (AudioNode | AudioParam) [] = [];\n\n\tconstructor(anode: AudioNode) {\n\t\tthis.onBefore(anode, 'connect', this.connect);\n\t\tthis.onBefore(anode, 'disconnect', this.disconnect);\n\t}\n\n\tconnect(np) {\n\t\tthis.outputs.push(np);\n\t}\n\n\tdisconnect(np) {\n\t\tremoveArrayElement(this.outputs, np);\n\t}\n\n\tonBefore(obj: any, fname: string, funcToCall: Function) {\n\t\tconst oldf = obj[fname];\n\t\tconst self = this;\n\t\tobj[fname] = function() {\n\t\t\tfuncToCall.apply(self, arguments);\n\t\t\toldf.apply(obj, arguments);\n\t\t}\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/notes.ts\n **/","/**\n * Modernize browser interfaces so that TypeScript does not complain\n * when calling new features.\n *\n * Also provides some basic utility funcitons which should be part of\n * the standard JavaScript library.\n */\n\nexport interface ModernWindow extends Window {\n\tAudioContext: AudioContext;\n\twebkitAudioContext: AudioContext;\n}\n\nexport interface ModernAudioContext extends AudioContext {\n\tsuspend: () => void;\n\tresume: () => void;\n}\n\nexport interface ModernAudioNode extends AudioNode {\n\tdisconnect(output?: number | AudioNode | AudioParam): void\n}\n\n\nexport function removeArrayElement(a: any[], e: any): boolean {\n\tconst pos = a.indexOf(e);\n\tif (pos < 0) return false;\t// not found\n\ta.splice(pos, 1);\n\treturn true;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./ts/modern.ts\n **/","/**\n * A generic directed graph editor.\n */\nexport class Graph {\n\n\tnodeCanvas: JQuery;\n\tcanvas: HTMLCanvasElement;\n\tnodes: Node[] = [];\n\tgraphDraw: GraphDraw;\n\tgraphInteract: GraphInteraction;\n\thandler: GraphHandler;\n\n\tconstructor(canvas: HTMLCanvasElement) {\n\t\tthis.nodeCanvas = $(canvas.parentElement);\n\t\tthis.canvas = canvas;\n\t\tconst gc = canvas.getContext('2d');\n\t\tthis.graphDraw = new GraphDraw(this, gc, canvas);\n\t\tthis.graphInteract = new GraphInteraction(this, gc);\n\t\tthis.handler = new DefaultGraphHandler();\n\t}\n\n\taddNode(n: Node, classes?: string) {\n\t\tn.element = $('<div>')\n\t\t\t.addClass('node')\n\t\t\t.text(n.name)\n\t\t\t.css({ left: n.x, top: n.y, cursor: 'default' });\n\t\tif (classes) n.element.addClass(classes);\n\t\tthis.nodeCanvas.append(n.element);\n\t\tthis.nodes.push(n);\n\t\tthis.graphInteract.registerNode(n);\n\t\tthis.draw();\n\t}\n\n\tremoveNode(n: Node): void {\n\t\tconst pos = this.nodes.indexOf(n);\n\t\tif (pos < 0)\n\t\t\treturn console.warn(`Node '${n.name}' is not a member of graph`);\n\t\tfor (const nn of this.nodes) {\n\t\t\tif (n == nn) continue;\n\t\t\tthis.disconnect(n, nn);\n\t\t\tthis.disconnect(nn, n);\n\t\t}\n\t\tthis.nodes.splice(pos, 1);\n\t\tn.element.remove();\n\t\tthis.draw();\n\t}\n\n\tselectNode(n: Node) {\n\t\tthis.graphInteract.selectNode(n);\n\t}\n\n\tconnect(srcn: Node, dstn: Node): boolean {\n\t\tif (!this.handler.canBeSource(srcn) || !this.handler.canConnect(srcn, dstn))\n\t\t\treturn false;\n\t\tdstn.addInput(srcn);\n\t\tthis.handler.connected(srcn, dstn);\n\t\treturn true;\n\t}\n\n\tdisconnect(srcn: Node, dstn: Node): boolean {\n\t\tif (!dstn.removeInput(srcn)) return false;\n\t\tthis.handler.disconnected(srcn, dstn);\n\t\treturn true;\n\t}\n\n\tdraw() {\n\t\tthis.graphDraw.draw();\n\t}\n\n}\n\n/**\n * A node in the graph. Application-specific data can be attached\n * to its data property.\n */\nexport class Node {\n\tx: number;\n\ty: number;\n\tname: string;\n\tinputs: Node[] = [];\n\telement: JQuery;\n\tw: number;\n\th: number;\n\tdata: any;\n\n\tconstructor(x: number, y: number, name: string) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.name = name;\n\t}\n\n\taddInput(n: Node) {\n\t\tthis.inputs.push(n);\n\t}\n\n\tremoveInput(n: Node): boolean {\n\t\tconst pos: number = this.inputs.indexOf(n);\n\t\tif (pos < 0) return false;\n\t\tthis.inputs.splice(pos, 1);\n\t\treturn true;\n\t}\n\n}\n\n/**\n * A set of callbacks to be implemented by the application in order\n * to customize the graph editor and add application-specific behavior.\n */\nexport interface GraphHandler {\n\tcanBeSource(n: Node): boolean;\n\tcanConnect(src: Node, dst: Node): boolean;\n\tconnected(src: Node, dst: Node): void;\n\tdisconnected(src: Node, dst: Node): void;\n\tnodeSelected(n: Node): void;\n\tgetArrowColor(src: Node, dst: Node): string;\n}\n\n\n//------------------------- Privates -------------------------\n\n/** Default, do-nothing GraphHandler implementation */\nclass DefaultGraphHandler implements GraphHandler {\n\tcanBeSource(n: Node): boolean { return true; }\n\tcanConnect(src: Node, dst: Node): boolean { return true; }\n\tconnected(src: Node, dst: Node): void {}\n\tdisconnected(src: Node, dst: Node):void {}\n\tnodeSelected(n: Node): void {}\n\tgetArrowColor(src: Node, dst: Node): string { return \"black\"; }\n}\n\n/**\n * Handles all UI interaction with graph in order to move, select, connect\n * and disconnect nodes.\n */\nclass GraphInteraction {\n\n\tgraph: Graph;\n\tgc: CanvasRenderingContext2D;\n\tdragging = false;\n\tselectedNode: Node;\n\n\tconstructor(graph: Graph, gc: CanvasRenderingContext2D) {\n\t\tthis.graph = graph;\n\t\tthis.gc = gc;\n\t\tthis.setupConnectHandler();\n\t}\n\n\tregisterNode(n: Node) {\n\t\tn.element.draggable({\n\t\t\tcontainment: 'parent',\n\t\t\tdistance: 5,\n\t\t\tstack: '.node',\n\t\t\tdrag: (event, ui) => {\n\t\t\t\tn.x = ui.position.left;\n\t\t\t\tn.y = ui.position.top;\n\t\t\t\tthis.graph.draw();\n\t\t\t},\n\t\t\tstart: (event, ui) => {\n\t\t\t\tthis.dragging = true;\n\t\t\t\tui.helper.css('cursor', 'move');\n\t\t\t},\n\t\t\tstop: (event, ui) => {\n\t\t\t\tui.helper.css('cursor', 'default');\n\t\t\t\tthis.dragging = false;\n\t\t\t}\n\t\t});\n\t\tn.element.click(_ => {\n\t\t\tif (this.dragging) return;\n\t\t\tif (this.selectedNode == n) return;\n\t\t\tthis.selectNode(n);\n\t\t});\n\t}\n\n\tselectNode(n: Node): void {\n\t\tif (this.selectedNode)\n\t\t\tthis.selectedNode.element.removeClass('selected');\n\t\tn.element.addClass('selected');\n\t\tthis.selectedNode = n;\n\t\tthis.graph.handler.nodeSelected(n);\n\t}\n\n\tsetupConnectHandler() {\n\t\tlet srcn: Node;\n\t\tlet connecting = false;\n\t\t$('body').keydown(evt => {\n\t\t\tif (evt.keyCode != 16  || connecting) return;\n\t\t\tsrcn = this.getNodeFromDOM(this.getElementUnderMouse());\n\t\t\tif (!srcn) return;\n\t\t\tif (!this.graph.handler.canBeSource(srcn)) {\n\t\t\t\tsrcn.element.css('cursor', 'not-allowed');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconnecting = true;\n\t\t\tthis.registerRubberBanding(srcn);\n\t\t})\n\t\t.keyup(evt => {\n\t\t\tif (evt.keyCode != 16) return;\n\t\t\tconnecting = false;\n\t\t\tthis.deregisterRubberBanding();\n\t\t\tconst dstn = this.getNodeFromDOM(this.getElementUnderMouse());\n\t\t\tif (!dstn || srcn == dstn) return;\n\t\t\tthis.connectOrDisconnect(srcn, dstn);\n\t\t\tthis.graph.draw();\n\t\t});\n\t}\n\n\tconnectOrDisconnect(srcn: Node, dstn: Node) {\n\t\tif (this.graph.disconnect(srcn, dstn)) return;\n\t\telse this.graph.connect(srcn, dstn);\n\t}\n\n\tgetElementUnderMouse(): JQuery {\n\t\tconst hovered = $(':hover');\n\t\tif (hovered.length <= 0) return null;\n\t\tconst jqNode = $(hovered.get(hovered.length - 1));\n\t\tif (!jqNode.hasClass('node')) return null;\n\t\treturn jqNode;\n\t}\n\n\tregisterRubberBanding(srcn: Node) {\n\t\tconst ofs = this.graph.nodeCanvas.offset();\n\t\tconst dstn = new Node(0, 0, '');\n\t\tdstn.w = 0;\n\t\tdstn.h = 0;\n\t\t$(this.graph.nodeCanvas).on('mousemove', evt => {\n\t\t\tdstn.x = evt.clientX - ofs.left;\n\t\t\tdstn.y = evt.clientY - ofs.top;\n\t\t\tthis.graph.draw();\n\t\t\tthis.gc.save();\n\t\t\tthis.gc.setLineDash([10]);\n\t\t\tthis.graph.graphDraw.drawArrow(srcn, dstn);\n\t\t\tthis.gc.restore();\n\t\t});\n\t\t// Setup cursors\n\t\tthis.graph.nodeCanvas.css('cursor', 'crosshair');\n\t\tthis.graph.nodeCanvas.find('.node').css('cursor', 'crosshair');\n\t\tfor (const n of this.graph.nodes)\n\t\t\tif (n != srcn && !this.graph.handler.canConnect(srcn, n))\n\t\t\t\tn.element.css('cursor', 'not-allowed');\n\t}\n\n\tderegisterRubberBanding() {\n\t\tthis.graph.nodeCanvas.css('cursor', '');\n\t\tthis.graph.nodeCanvas.find('.node').css('cursor', 'default');\n\t\tthis.graph.nodeCanvas.off('mousemove');\n\t\tthis.graph.graphDraw.draw();\n\t}\n\n\tgetNodeFromDOM(jqNode: JQuery) {\n\t\tif (!jqNode) return null;\n\t\tfor (const n of this.graph.nodes)\n\t\t\tif (n.element[0] == jqNode[0]) return n;\n\t\treturn null;\n\t}\n}\n\n\ninterface Point {\n\tx: number,\n\ty: number\n}\n\n\n/**\n * Handles graph drawing by rendering arrows in a canvas.\n */\nclass GraphDraw {\n\n\tgraph: Graph;\n\tgc: CanvasRenderingContext2D;\n\tcanvas: HTMLCanvasElement;\n\tarrowHeadLen = 10;\n\tnodes: Node[];\n\n\tconstructor(graph: Graph, gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement) {\n\t\tthis.graph = graph;\n\t\tthis.gc = gc;\n\t\tthis.canvas = canvas;\n\t\tthis.nodes = graph.nodes;\n\t}\n\n\tdraw() {\n\t\tthis.clearCanvas();\n\t\tthis.gc.lineWidth = 2;\n\t\tfor (const ndst of this.nodes)\n\t\t\tfor (const nsrc of ndst.inputs)\n\t\t\t\tthis.drawArrow(nsrc, ndst);\n\t}\n\n\tclearCanvas() {\n\t\tthis.gc.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t}\n\n\tdrawArrow(srcNode: Node, dstNode: Node) {\n\t\tconst srcPoint = this.getNodeCenter(srcNode);\n\t\tconst dstPoint = this.getNodeCenter(dstNode);\n\t\tthis.gc.strokeStyle = this.graph.handler.getArrowColor(srcNode, dstNode);\n\t\tthis.gc.beginPath();\n\t\tthis.gc.moveTo(srcPoint.x, srcPoint.y);\n\t\tthis.gc.lineTo(dstPoint.x, dstPoint.y);\n\t\tthis.drawArrowTip(srcPoint, dstPoint);\n\t\tthis.gc.closePath();\n\t\tthis.gc.stroke();\n\t}\n\n\tdrawArrowTip(src: Point, dst: Point) {\n\t\tconst posCoef = 0.6;\n\t\tconst mx = src.x + (dst.x - src.x) * posCoef;\n\t\tconst my = src.y + (dst.y - src.y) * posCoef;\n\t\tvar angle = Math.atan2(dst.y - src.y, dst.x - src.x);\n\t\tthis.gc.moveTo(mx, my);\n\t\tthis.gc.lineTo(\n\t\t\tmx - this.arrowHeadLen * Math.cos(angle - Math.PI/6),\n\t\t\tmy - this.arrowHeadLen * Math.sin(angle - Math.PI/6)\n\t\t);\n\t\tthis.gc.moveTo(mx, my);\n\t\tthis.gc.lineTo(\n\t\t\tmx - this.arrowHeadLen * Math.cos(angle + Math.PI/6),\n\t\t\tmy - this.arrowHeadLen * Math.sin(angle + Math.PI/6)\n\t\t);\n\t}\n\n\tgetNodeCenter(n: Node): Point {\n\t\tn.w = n.w !== undefined ? n.w : n.element.outerWidth();\n\t\tn.h = n.h !== undefined ? n.h : n.element.outerHeight();\n\t\treturn { x: n.x + n.w / 2, y: n.y + n.h / 2 };\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/graph.ts\n **/","import { NoteHandler } from './notes';\nimport { NodeDef, NodePalette, palette } from './palette';\nimport { ModernWindow, ModernAudioContext, removeArrayElement } from './modern';\n\n/**\n * Performs global operations on all AudioNodes:\n * - Manages AudioNode creation and initialization from the palette\n * - Distributes MIDI keyboard events to NoteHandlers\n */\nexport class Synth {\n\tac: ModernAudioContext;\n\tcustomNodes: { [key: string]: Function } = {};\n\tpalette: NodePalette;\n\tnoteHandlers: NoteHandler[] = [];\n\n\tconstructor() {\n\t\tconst CtxClass: any = window.AudioContext || window.webkitAudioContext;\n\t\tthis.ac = new CtxClass();\n\t\tthis.palette = palette;\n\t\tthis.registerCustomNode('createADSR', ADSR);\n\t}\n\n\tcreateAudioNode(type: string): AudioNode {\n\t\tconst def: NodeDef = palette[type];\n\t\tif (!def) return null;\n\t\tconst factory = def.custom ? this.customNodes : this.ac;\n\t\tif (!factory[def.constructor]) return null;\n\t\tconst anode = factory[def.constructor]();\n\t\tif (!anode.context) anode.context = this.ac;\n\t\tthis.initNodeParams(anode, def, type);\n\t\treturn anode;\n\t}\n\n\tplay() {\n\t\tthis.ac.resume();\n\t}\n\n\tstop() {\n\t\tthis.ac.suspend();\n\t}\n\n\tnoteOn(midi: number, gain: number, ratio: number): void {\n\t\tfor (const nh of this.noteHandlers) {\n\t\t\tif (nh.kbTrigger) nh.handlers = this.noteHandlers;\n\t\t\tnh.noteOn(midi, gain, ratio);\n\t\t}\n\t}\n\n\tnoteOff(midi: number, gain: number): void {\n\t\tfor (const nh of this.noteHandlers)\n\t\t\tnh.noteOff(midi, gain);\n\t}\n\n\taddNoteHandler(nh: NoteHandler): void {\n\t\tthis.noteHandlers.push(nh);\n\t}\n\n\tremoveNoteHandler(nh: NoteHandler): void {\n\t\tremoveArrayElement(this.noteHandlers, nh)\n\t}\n\n\tinitNodeParams(anode: AudioNode, def: NodeDef, type: string): void {\n\t\tfor (const param of Object.keys(def.params || {}))\n\t\t\tif (!anode[param])\n\t\t\t\tconsole.warn(`Parameter '${param}' not found for node ${type}'`)\n\t\t\telse if (anode[param] instanceof AudioParam)\n\t\t\t\tanode[param].value = def.params[param].initial;\n\t\t\telse\n\t\t\t\tanode[param] = def.params[param].initial;\n\t}\n\n\tregisterCustomNode(constructorName: string, nodeClass: any) {\n\t\tthis.customNodes[constructorName] = () => new nodeClass();\n\t}\n\n}\n\n\n//-------------------- Custom nodes --------------------\n\nclass CustomNodeBase implements AudioNode {\n\tcustom = true;\n\tchannelCount = 2;\n\tchannelCountMode = 'max';\n\tchannelInterpretation = 'speakers';\n\tcontext: AudioContext;\n\tnumberOfInputs = 0;\n\tnumberOfOutputs = 1;\n\tconnect(param: AudioParam | AudioNode) {}\n\tdisconnect() {}\n\t// Required for extending EventTarget\n\taddEventListener(){}\n\tdispatchEvent(evt: Event): boolean { return false; }\n\tremoveEventListener(){}\n}\n\n/**\n * A custom AudioNode providing ADSR envelope control\n */\nexport class ADSR extends CustomNodeBase {\n\tattack: number = 0.2;\n\tdecay: number = 0.5;\n\tsustain: number = 0.5;\n\trelease: number = 1;\n\t//TODO 0 <= depth <= 1\n\t//TODO linear / exponential\n\t//TODO kb trigger (boolean)\n}\n\n\ndeclare var window: ModernWindow;\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/synth.ts\n **/","/** Configuration data for an AudioNode parameter */\nexport interface NodeParamDef {\n\tinitial: number | string;\n\tmin?: number;\n\tmax?: number;\n\tlinear?: boolean;\n\tchoices?: string[];\n}\n\n/** Configuration data for an AudioNode */\nexport interface NodeDef {\n\tconstructor: string;\n\tcustom?: boolean;\n\tnoteHandler?: string;\n\tcontrol?: boolean;\n\tparams: { [key: string]: NodeParamDef };\n}\n\n/** A set of AudioNode configuration elements */\nexport interface NodePalette {\n\t[key: string]: NodeDef;\n}\n\n//-------------------- Node palette definition --------------------\n\nconst OCTAVE_DETUNE: NodeParamDef = {\n\tinitial: 0,\n\tmin: -1200,\n\tmax: 1200,\n\tlinear: true\n};\n\n/**\n * The set of AudioNodes available to the application, along with\n * their configuration.\n */\nexport var palette: NodePalette = {\n\t// Sources\n\tOscillator: {\n\t\tconstructor: 'createOscillator',\n\t\tnoteHandler: 'osc',\n\t\tparams: {\n\t\t\tfrequency: { initial: 220, min: 20, max: 20000 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\ttype: {\n\t\t\t\tinitial: 'sawtooth',\n\t\t\t\tchoices: ['sine', 'square', 'sawtooth', 'triangle']\n\t\t\t}\n\t\t}\n\t},\n\t// Effects\n\tGain: {\n\t\tconstructor: 'createGain',\n\t\tparams: {\n\t\t\tgain: { initial: 1, min: 0, max: 10, linear: true }\n\t\t}\n\t},\n\tFilter: {\n\t\tconstructor: 'createBiquadFilter',\n\t\tparams: {\n\t\t\tfrequency: { initial: 440, min: 20, max: 20000 },\n\t\t\tQ: { initial: 0, min: 0, max: 100 },\n\t\t\t//TODO gain\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\ttype: {\n\t\t\t\tinitial: 'lowpass',\n\t\t\t\tchoices: ['lowpass', 'highpass', 'bandpass',\n\t\t\t\t\t'lowshelf', 'highshelf', 'peaking', 'notch', 'allpass']\n\t\t\t}\n\t\t},\n\t},\n\tDelay: {\n\t\tconstructor: 'createDelay',\n\t\tparams: {\n\t\t\tdelayTime: { initial: 1, min: 0, max: 5 }\n\t\t}\n\t},\n\t// Controllers\n\tLFO: {\n\t\tconstructor: 'createOscillator',\n\t\tcontrol: true,\n\t\tparams: {\n\t\t\tfrequency: { initial: 5, min: 0.01, max: 200 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\ttype: {\n\t\t\t\tinitial: 'sine',\n\t\t\t\tchoices: ['sine', 'square', 'sawtooth', 'triangle']\n\t\t\t}\n\t\t}\n\t},\n\tGainCtrl: {\n\t\tconstructor: 'createGain',\n\t\tcontrol: true,\n\t\tparams: {\n\t\t\tgain: { initial: 10, min: 0, max: 1000, linear: true }\n\t\t}\n\t},\n\t// Output\n\tSpeaker: {\n\t\tconstructor: null,\n\t\tparams: null\n\t},\n\t// Custom\n\tADSR: {\n\t\tconstructor: 'createADSR',\n\t\tnoteHandler: 'ADSR',\n\t\tcontrol: true,\n\t\tcustom: true,\n\t\tparams: {\n\t\t\tattack:  { initial: 0.2, min: 0, max: 10 },\n\t\t\tdecay:   { initial: 0.5, min: 0, max: 10 },\n\t\t\tsustain: { initial: 0.5, min: 0, max: 1, linear: true },\n\t\t\trelease: { initial: 1.0, min: 0, max: 10 },\n\t\t}\n\t}\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/palette.ts\n **/","import { Node } from './graph';\nimport { NodeDef, NodeParamDef } from './palette';\nimport { NodeData } from './synthUI';\n\n/**\n * Renders the UI controls associated with the parameters of a given node\n */\nexport function renderParams(ndata: NodeData, panel: JQuery): void {\n\tpanel.empty();\n\tif (ndata.nodeDef.control)\n\t\trenderParamControl(ndata, panel);\n\tfor (const param of Object.keys(ndata.nodeDef.params || {}))\n\t\tif (ndata.anode[param] instanceof AudioParam)\n\t\t\trenderAudioParam(ndata.anode, ndata.nodeDef, param, panel);\n\t\telse\n\t\t\trenderOtherParam(ndata.anode, ndata.nodeDef, param, panel);\n}\n\n/**\n * Renders a \"delete node\" button inside the parameters panel\n */\nexport function addDeleteButton(panel: JQuery, handler: () => void): void {\n\tconst button = $(`\n\t\t<button class=\"btn btn-danger btn-sm del-node-but\" type=\"button\">\n\t\t\t<span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span>\n\t\t</button>\n\t`);\n\tpanel.append(button);\n\tbutton.click(_ => {\n\t\tif (confirm('Delete node?')) handler();\n\t});\n}\n\n\nfunction renderAudioParam(anode: AudioNode, ndef: NodeDef, param: string, panel: JQuery) {\n\tconst pdef: NodeParamDef = ndef.params[param];\n\tconst aparam: AudioParam = anode[param];\n\tif (aparam['_value']) aparam.value = aparam['_value'];\n\trenderSlider(panel, pdef, param, aparam.value, value => {\n\t\taparam.value = value;\n\t\taparam['_value'] = value;\n\t});\n}\n\nfunction renderParamControl(ndata: NodeData, panel: JQuery) {\n\tif (!ndata.controlParams) return;\n\tconst combo = renderCombo(panel, ndata.controlParams, ndata.controlParam, 'Controlling');\n\tcombo.on('input', _ => {\n\t\tif (ndata.controlParam)\n\t\t\tndata.anode.disconnect(ndata.controlTarget[ndata.controlParam]);\n\t\tndata.controlParam = combo.val();\n\t\tndata.anode.connect(ndata.controlTarget[ndata.controlParam]);\n\t});\n}\n\nfunction renderOtherParam(anode: AudioNode, ndef: NodeDef, param: string, panel: JQuery) {\n\tconst pdef: NodeParamDef = ndef.params[param];\n\tif (pdef.choices) {\n\t\tconst combo = renderCombo(panel, pdef.choices, anode[param], ucfirst(param));\n\t\tcombo.on('input', _ => {\n\t\t\tanode[param] = combo.val();\n\t\t});\n\t}\n\telse if (pdef.min != undefined) {\n\t\trenderSlider(panel, pdef, param, anode[param], value => anode[param] = value);\n\t}\n}\n\n\nfunction renderSlider(panel: JQuery, pdef: NodeParamDef,\n\tparam: string, value: number, setValue: (value: number) => void) {\n\tconst sliderBox = $('<div class=\"slider-box\">');\n\tconst slider = $('<input type=\"range\" orient=\"vertical\">')\n\t\t.attr('min', 0)\n\t\t.attr('max', 1)\n\t\t.attr('step', 0.001)\n\t\t.attr('value', param2slider(value, pdef))\n\tconst numInput = $('<input type=\"number\">')\n\t\t.attr('min', pdef.min)\n\t\t.attr('max', pdef.max)\n\t\t.attr('value', truncateFloat(value, 5));\n\tsliderBox.append(numInput);\n\tsliderBox.append(slider);\n\tsliderBox.append($('<span><br/>' + ucfirst(param) + '</span>'));\n\tpanel.append(sliderBox);\n\tslider.on('input', _ => {\n\t\tconst value = slider2param(parseFloat(slider.val()), pdef);\n\t\tnumInput.val(truncateFloat(value, 5));\n\t\tsetValue(value);\n\t});\n\tnumInput.on('input', _ => {\n\t\tconst value = parseFloat(numInput.val());\n\t\tif (isNaN(value)) return;\n\t\tslider.val(param2slider(value, pdef));\n\t\tsetValue(value);\n\t});\n}\n\nfunction renderCombo(panel: JQuery, choices: string[], selected: string, label: string): JQuery {\n\tconst choiceBox = $('<div class=\"choice-box\">');\n\tconst combo = $('<select>').attr('size', choices.length);\n\tfor (const choice of choices) {\n\t\tconst option = $('<option>').text(choice);\n\t\tif (choice == selected) option.attr('selected', 'selected');\n\t\tcombo.append(option);\n\t}\n\tchoiceBox.append(combo);\n\tcombo.after('<br/><br/>' + label);\n\tpanel.append(choiceBox);\n\treturn combo;\n}\n\nconst LOG_BASE = 2;\n\nfunction logarithm(base: number, x: number): number {\n\treturn Math.log(x) / Math.log(base);\n}\n\nfunction param2slider(paramValue: number, pdef: NodeParamDef): number {\n\tif (pdef.linear) {\n\t\treturn (paramValue - pdef.min) / (pdef.max - pdef.min);\n\t}\n\telse {\n\t\tif (paramValue - pdef.min == 0) return 0;\n\t\tconst logRange = logarithm(LOG_BASE, pdef.max - pdef.min);\n\t\treturn logarithm(LOG_BASE, paramValue - pdef.min) / logRange;\n\t}\n}\n\nfunction slider2param(sliderValue: number, pdef: NodeParamDef): number {\n\tif (pdef.linear) {\n\t\treturn pdef.min + sliderValue * (pdef.max - pdef.min);\n\t}\n\telse {\n\t\tconst logRange = logarithm(LOG_BASE, pdef.max - pdef.min);\n\t\treturn pdef.min + Math.pow(LOG_BASE, sliderValue * logRange);\n\t}\n}\n\n\n//-------------------- Misc utilities --------------------\n\nfunction ucfirst(str: string) {\n\treturn str[0].toUpperCase() + str.substring(1);\n}\n\nfunction truncateFloat(f: number, len: number): string {\n\tlet s: string = '' + f;\n\ts = s.substr(0, len);\n\tif (s[s.length - 1] == '.') return s.substr(0, len - 1);\n\telse return s;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./ts/paramsUI.ts\n **/","const KB_NOTES = 'ZSXDCVGBHNJMQ2W3ER5T6Y7UI9O0P';\nconst BASE_NOTE = 36;\nconst SEMITONE = Math.pow(2, 1/12);\nconst A4 = 57;\n\n/**\n * Provides a piano keyboard using the PC keyboard.\n * Listens to keyboard events and generates MIDI-style noteOn/noteOff events.\n */\nexport class Keyboard {\n\n\tconstructor() {\n\t\tthis.setupHandler();\n\t}\n\n\tsetupHandler() {\n\t\tconst pressedKeys = {};\n\t\t$('body')\n\t\t.on('keydown', evt => {\n\t\t\tif (pressedKeys[evt.keyCode]) return;\t// Skip repetitions\n\t\t\tpressedKeys[evt.keyCode] = true;\n\t\t\tconst midi = this.key2midi(evt.keyCode);\n\t\t\tif (midi < 0) return;\n\t\t\tthis.noteOn(midi, this.midi2freqRatio(midi));\n\t\t})\n\t\t.on('keyup', evt => {\n\t\t\tpressedKeys[evt.keyCode] = false;\n\t\t\tconst midi = this.key2midi(evt.keyCode);\n\t\t\tif (midi < 0) return;\n\t\t\tthis.noteOff(midi);\n\t\t});\n\t}\n\n\tkey2midi(keyCode: number): number {\n\t\tconst pos = KB_NOTES.indexOf(String.fromCharCode(keyCode));\n\t\tif (pos < 0) return -1;\n\t\treturn BASE_NOTE + pos;\n\t}\n\n\tmidi2freqRatio(midi: number): number {\n\t\treturn Math.pow(SEMITONE, midi - A4);\n\t}\n\n\tnoteOn(midi: number, ratio: number):void {}\n\tnoteOff(midi: number): void {}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/keyboard.ts\n **/"],"sourceRoot":""}