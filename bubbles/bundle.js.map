{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 31304d6b992d7078a0f9","webpack:///./src/animation.ts","webpack:///./src/simple-anim.ts","webpack:///./src/main.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","drawLoop","cb","timeData","window","requestAnimationFrame","_","before","performance","now","calcTime","time","count","elapsed","fps","cpu","showTimeData","gc","isNaN","fillStyle","font","txt","toPrecision","fillText","runAnimation","canvas","animation","showInfo","ctx","getContext","Error","w","width","h","height","step","clearRect","draw","AnimationContainer","this","items","add","item","push","_i","_a","length","filter","done","rnd","range","Math","floor","random","__WEBPACK_IMPORTED_MODULE_0__animation__","Circles","__extends","b","__","constructor","create","Figure","Circle","_super","_this","x","y","strokeStyle","r","g","a","dx","dy","drawCircle","beginPath","arc","PI","fill","steps","createCanvas","div","document","createElement","style","position","display","margin","top","bottom","left","right","backgroundColor","body","appendChild","clientWidth","clientHeight","setAttribute","main","__WEBPACK_IMPORTED_MODULE_1__simple_anim__"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return AnimationContainer; });\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = runAnimation;\nvar AnimationContainer = (function () {\n    function AnimationContainer() {\n        this.items = [];\n    }\n    AnimationContainer.prototype.add = function (item) {\n        this.items.push(item);\n    };\n    AnimationContainer.prototype.step = function () {\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.step();\n        }\n        this.items = this.items.filter(function (item) { return !item.done; });\n    };\n    AnimationContainer.prototype.draw = function (gc) {\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.draw(gc);\n        }\n    };\n    return AnimationContainer;\n}());\n\nfunction drawLoop(cb, timeData) {\n    if (timeData === void 0) { timeData = {}; }\n    window.requestAnimationFrame(function (_) {\n        timeData.before = performance.now();\n        cb(timeData);\n        calcTime(timeData);\n        drawLoop(cb, timeData);\n    });\n}\nfunction calcTime(timeData) {\n    timeData.time = timeData.time || 0;\n    timeData.count = timeData.count || 1;\n    var now = performance.now();\n    var elapsed = now - timeData.time;\n    timeData.time = now;\n    timeData.count++;\n    timeData.fps = 1000 / elapsed;\n    timeData.cpu = (now - timeData.before) / elapsed;\n}\nfunction showTimeData(gc, timeData) {\n    if (isNaN(timeData.fps))\n        return;\n    gc.fillStyle = 'white';\n    gc.font = '16px sans-serif';\n    if (timeData.count % 30 == 0)\n        timeData.txt = '' + timeData.fps.toPrecision(2) + ' FPS';\n    gc.fillText(timeData.txt || '', 15, 30);\n}\nfunction runAnimation(canvas, animation, showInfo) {\n    if (showInfo === void 0) { showInfo = true; }\n    var ctx = canvas.getContext('2d');\n    if (!ctx)\n        throw Error('No 2d context!');\n    var w = canvas.width;\n    var h = canvas.height;\n    var gc = ctx;\n    drawLoop(function (timeData) {\n        animation.step();\n        gc.clearRect(0, 0, w, h);\n        animation.draw(gc);\n        if (showInfo)\n            showTimeData(gc, timeData);\n    });\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__animation__ = __webpack_require__(0);\n/* unused harmony export Circle */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Circles; });\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar Figure = (function () {\n    function Figure() {\n    }\n    return Figure;\n}());\nfunction rnd(range) {\n    return Math.floor(Math.random() * range);\n}\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(w, h) {\n        var _this = _super.call(this) || this;\n        _this.x = Math.random() * w;\n        _this.y = Math.random() * h;\n        _this.w = 1; // Math.random() * w / 10;\n        _this.h = _this.w;\n        _this.strokeStyle = 'white';\n        _this.r = rnd(256);\n        _this.g = rnd(256);\n        _this.b = rnd(256);\n        _this.a = 1;\n        _this.dx = Math.random() * 2 - 1;\n        _this.dy = Math.random() * 2 - 1;\n        _this.done = false;\n        return _this;\n    }\n    Circle.prototype.step = function () {\n        this.x += this.dx;\n        this.y += this.dy;\n        this.w += this.a;\n        this.a -= 0.0025;\n        if (this.a <= 0)\n            this.done = true;\n    };\n    Circle.prototype.draw = function (gc) {\n        gc.strokeStyle = this.strokeStyle;\n        gc.fillStyle = this.fillStyle;\n        this.fillStyle = \"rgba(\" + this.r + \", \" + this.g + \", \" + this.b + \", \" + this.a + \")\";\n        this.drawCircle(gc, this.x, this.y);\n        // this.drawCircle(gc, this.x + 3, this.y);\n        // this.drawCircle(gc, this.x, this.y + 3);\n    };\n    Circle.prototype.drawCircle = function (gc, x, y) {\n        gc.beginPath();\n        gc.arc(x, y, this.w, 0, Math.PI * 2);\n        gc.fill();\n    };\n    return Circle;\n}(Figure));\n\nvar Circles = (function (_super) {\n    __extends(Circles, _super);\n    function Circles(w, h) {\n        var _this = _super.call(this) || this;\n        _this.w = w;\n        _this.h = h;\n        _this.steps = 0;\n        return _this;\n    }\n    Circles.prototype.step = function () {\n        this.steps++;\n        if (this.steps % 5 == 0)\n            this.add(new Circle(this.w, this.h));\n        _super.prototype.step.call(this);\n    };\n    return Circles;\n}(__WEBPACK_IMPORTED_MODULE_0__animation__[\"b\" /* AnimationContainer */]));\n\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__animation__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__simple_anim__ = __webpack_require__(1);\n\n\nfunction createCanvas() {\n    var div = document.createElement('div');\n    div.style.position = 'fixed';\n    div.style.display = 'block';\n    var margin = '0';\n    div.style.top = margin;\n    div.style.bottom = margin;\n    div.style.left = margin;\n    div.style.right = margin;\n    div.style.backgroundColor = 'black';\n    document.body.appendChild(div);\n    var canvas = document.createElement('canvas');\n    var w = div.clientWidth;\n    var h = div.clientHeight;\n    canvas.setAttribute('width', '' + w);\n    canvas.setAttribute('height', '' + h);\n    div.appendChild(canvas);\n    return canvas;\n}\nfunction main() {\n    var canvas = createCanvas();\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__animation__[\"a\" /* runAnimation */])(canvas, new __WEBPACK_IMPORTED_MODULE_1__simple_anim__[\"a\" /* Circles */](canvas.width, canvas.height));\n}\nmain();\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 31304d6b992d7078a0f9","export interface Animation {\n\tstep: () => void;\n\tdraw: (gc: CanvasRenderingContext2D) => void;\n\tdone: boolean;\n}\n\nexport class AnimationContainer implements Animation {\n\titems: Animation[];\n\tdone: false;\n\n\tconstructor() {\n\t\tthis.items = [];\n\t}\n\n\tadd(item: Animation) {\n\t\tthis.items.push(item);\n\t}\n\n\tstep() {\n\t\tfor (let item of this.items) item.step();\n\t\tthis.items = this.items.filter(item => !item.done);\n\t}\n\n\tdraw(gc: CanvasRenderingContext2D) {\n\t\tfor (let item of this.items) item.draw(gc);\n\t}\n}\n\n\nfunction drawLoop(cb, timeData: any = {}) {\n\twindow.requestAnimationFrame(_ => {\n\t\ttimeData.before = performance.now();\n\t\tcb(timeData);\n\t\tcalcTime(timeData);\n\t\tdrawLoop(cb, timeData);\n\t});\n}\n\nfunction calcTime(timeData) {\n\ttimeData.time = timeData.time || 0;\n\ttimeData.count = timeData.count || 1;\n\tlet now = performance.now();\n\tlet elapsed = now - timeData.time;\n\ttimeData.time = now;\n\ttimeData.count++;\n\ttimeData.fps = 1000 / elapsed;\n\ttimeData.cpu = (now - timeData.before) / elapsed;\n}\n\nfunction showTimeData(gc: CanvasRenderingContext2D, timeData) {\n\tif (isNaN(timeData.fps)) return;\n\tgc.fillStyle = 'white';\n\tgc.font = '16px sans-serif';\n\tif (timeData.count % 30 == 0)\n\t\ttimeData.txt = '' + timeData.fps.toPrecision(2) + ' FPS';\n\tgc.fillText(timeData.txt || '', 15, 30);\n}\n\nexport function runAnimation(canvas: HTMLCanvasElement, animation: Animation, showInfo = true) {\n\tlet ctx = canvas.getContext('2d');\n\tif (!ctx) throw Error('No 2d context!');\n\tlet w = canvas.width;\n\tlet h = canvas.height;\n\tlet gc = ctx;\n\tdrawLoop(timeData => {\n\t\tanimation.step();\n\t\tgc.clearRect(0, 0, w, h);\n\t\tanimation.draw(gc);\n\t\tif (showInfo) showTimeData(gc, timeData);\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/animation.ts","import { Animation, AnimationContainer } from './animation';\n\nclass Figure {\n\tx: number;\n\ty: number;\n\tw: number;\n\th: number;\n\tdone: boolean;\n\tstrokeStyle: string;\n\tfillStyle: string;\n}\n\nfunction rnd(range) {\n\treturn Math.floor(Math.random() * range);\n}\n\nexport class Circle extends Figure implements Animation {\n\tr: number; g: number; b: number; a: number;\n\tdx: number; dy: number;\n\n\tconstructor(w: number, h: number) {\n\t\tsuper();\n\t\tthis.x = Math.random() * w;\n\t\tthis.y = Math.random() * h;\n\t\tthis.w = 1; // Math.random() * w / 10;\n\t\tthis.h = this.w;\n\t\tthis.strokeStyle = 'white';\n\t\tthis.r = rnd(256);\n\t\tthis.g = rnd(256);\n\t\tthis.b = rnd(256);\n\t\tthis.a = 1;\n\t\tthis.dx = Math.random() * 2 - 1;\n\t\tthis.dy = Math.random() * 2 - 1;\n\t\tthis.done = false;\n\t}\n\n\tstep() {\n\t\tthis.x += this.dx;\n\t\tthis.y += this.dy;\n\t\tthis.w += this.a;\n\t\tthis.a -= 0.0025;\n\t\tif (this.a <= 0) this.done = true;\n\t}\n\n\tdraw(gc: CanvasRenderingContext2D) {\n\t\tgc.strokeStyle = this.strokeStyle;\n\t\tgc.fillStyle = this.fillStyle;\n\t\tthis.fillStyle = `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\n\t\tthis.drawCircle(gc, this.x, this.y);\n\t\t// this.drawCircle(gc, this.x + 3, this.y);\n\t\t// this.drawCircle(gc, this.x, this.y + 3);\n\t}\n\n\tdrawCircle(gc: CanvasRenderingContext2D, x: number, y: number) {\n\t\tgc.beginPath();\n\t\tgc.arc(x, y, this.w, 0, Math.PI * 2);\n\t\tgc.fill();\n\t}\n}\n\n\nexport class Circles extends AnimationContainer {\n\tsteps = 0;\n\n\tconstructor(private w: number, private h: number) {\n\t\tsuper();\n\t}\n\n\tstep() {\n\t\tthis.steps++;\n\t\tif (this.steps % 5 == 0)\n\t\t\tthis.add(new Circle(this.w, this.h));\n\t\tsuper.step();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/simple-anim.ts","import { runAnimation } from './animation';\nimport { Circles } from './simple-anim';\n\n\nfunction createCanvas(): HTMLCanvasElement {\n\tlet div = document.createElement('div');\n\tdiv.style.position = 'fixed';\n\tdiv.style.display = 'block';\n\tlet margin = '0';\n\tdiv.style.top = margin;\n\tdiv.style.bottom = margin;\n\tdiv.style.left = margin;\n\tdiv.style.right = margin;\n\tdiv.style.backgroundColor = 'black';\n\tdocument.body.appendChild(div);\n\tlet canvas = document.createElement('canvas');\n\tlet w = div.clientWidth;\n\tlet h = div.clientHeight;\n\tcanvas.setAttribute('width', '' + w);\n\tcanvas.setAttribute('height', '' + h);\n\tdiv.appendChild(canvas);\n\treturn canvas;\n}\n\n\n\nfunction main() {\n\tlet canvas = createCanvas();\n\trunAnimation(canvas as HTMLCanvasElement, new Circles(canvas.width, canvas.height));\n}\n\nmain();\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}