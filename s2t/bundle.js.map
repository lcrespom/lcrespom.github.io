{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "src/listen.ts",
    "src/main.ts"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "interface ModernWindow extends Window {\n\tAudioContext: any;\n\twebkitAudioContext: any;\n}\n\ndeclare var window: ModernWindow;\n\n\nexport function listenAndOsc(canvas: HTMLCanvasElement, cb: (MediaStream) => void) {\n\tlet audioCtx: AudioContext = new (window.AudioContext || window.webkitAudioContext)();\n\tlet analyser = audioCtx.createAnalyser();\n\tconst navigator: any = window.navigator;\n\tnavigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia ||\n\t\tnavigator.mozGetUserMedia || navigator.msGetUserMedia);\n\tnavigator.getUserMedia({ audio: true }, stream => {\n\t\tlet ctx2d = get2dCtx(canvas);\n\t\tlet oscData = new Uint8Array(analyser.fftSize);\n\t\tlet source = audioCtx.createMediaStreamSource(stream);\n\t\tsource.connect(analyser);\n\t\twindow.requestAnimationFrame(_ => updateCanvas(ctx2d, canvas, analyser, oscData));\n\t\tcb(stream);\n\t}, error => console.error(error));\n}\n\nexport function stop(stream: MediaStream) {\n\tfor (let mst of stream.getAudioTracks()) mst.stop();\n}\n\n\nfunction get2dCtx(canvas: HTMLCanvasElement): CanvasRenderingContext2D {\n\tlet gc = canvas.getContext('2d');\n\tif (!gc)\n\t\tthrow Error('No CanvasRenderingContext2D found');\n\treturn gc;\n}\n\nfunction updateCanvas(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\tanalyser: AnalyserNode, data: Uint8Array) {\n\tdrawOsc(gc, canvas, analyser, data, '#FFFF00');\n\twindow.requestAnimationFrame(_ => updateCanvas(gc, canvas, analyser, data));\n}\n\nfunction drawOsc(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\tanalyser: AnalyserNode, data: Uint8Array, color: string) {\n\tconst [w, h] = setupDraw(gc, canvas, data, color);\n\tanalyser.getByteTimeDomainData(data);\n\tgc.moveTo(0, h / 2);\n\tlet x = 0;\n\twhile (data[x] > 128 && x < data.length / 4) x++;\n\twhile (data[x] < 128 && x < data.length / 4) x++;\n\tconst dx = (data.length * 0.75) / canvas.width;\n\tfor (let i = 0; i < w; i++) {\n\t\tlet y = data[Math.floor(x)];\n\t\tx += dx;\n\t\tgc.lineTo(i, h * y / 256);\n\t}\n\tgc.stroke();\n\tgc.closePath();\n}\n\nfunction setupDraw(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\tdata: Uint8Array, color: string) {\n\tconst w = canvas.width;\n\tconst h = canvas.height;\n\tgc.clearRect(0, 0, w, h);\n\tgc.beginPath();\n\tgc.strokeStyle = color;\n\treturn [w, h];\n}\n",
    "import * as listen from './listen';\n\ndeclare let webkitSpeechRecognition;\n\n\nfunction initS2T() {\n\tlet recognition = new webkitSpeechRecognition();\n\trecognition.continuous = true;\n\trecognition.interimResults = true;\n\treturn recognition;\n}\n\nfunction traceEvent(txt, cb?) {\n\treturn function (event) {\n\t\tconsole.log(txt + ':', event);\n\t\tif (cb) cb();\n\t};\n}\n\nfunction registerS2TListeners(s2t) {\n\ts2t.onresult = function (event) {\n\t\tconsole.log('Result:', event);\n\t\tlet txt = '';\n\t\tfor (let i = 0; i < event.results.length; i++)\n\t\t\ttxt += event.results[i][0].transcript;\n\t\tlet result = $('#result');\n\t\tresult.text(txt);\n\t};\n\ts2t.onnomatch = traceEvent('No match');\n\ts2t.onerror = traceEvent('Error');\n\n\ts2t.onstart = traceEvent('Start');\n\ts2t.onend = traceEvent('End');\n\n\ts2t.onaudiostart = traceEvent('Audio start',\n\t\t_ => $('#b-listening').addClass('btn-info'));\n\ts2t.onaudioend = traceEvent('Audio end',\n\t\t_ => $('#b-listening').removeClass('btn-info'));\n\n\ts2t.onsoundstart = traceEvent('Sound start',\n\t\t_ => $('#b-sound').addClass('btn-info'));\n\ts2t.onsoundend = traceEvent('Sound end',\n\t\t_ => $('#b-sound').removeClass('btn-info'));\n\n\ts2t.onspeechstart = traceEvent('Speech start',\n\t\t_ => $('#b-speech').addClass('btn-info'));\n\ts2t.onspeechend = traceEvent('Speech end',\n\t\t_ => $('#b-speech').removeClass('btn-info'));\n}\n\nfunction registerButtonListeners(s2t) {\n\tlet stream;\n\n\t$('#s2t').click(function () {\n\t\tconsole.log('Listen start');\n\t\ts2t.lang = $('#langSel').val();\n\t\ts2t.start();\n\t\tlisten.listenAndOsc($('#audio-osc')[0] as HTMLCanvasElement,\n\t\t\tstrm => stream = strm);\n\t});\n\n\t$('#s2tstop').click(function () {\n\t\ts2t.stop();\n\t\tlisten.stop(stream);\n\t});\n}\n\n$(function () {\n\tlet s2t = initS2T();\n\tregisterS2TListeners(s2t);\n\tregisterButtonListeners(s2t);\n});\n"
  ]
}